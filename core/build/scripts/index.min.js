/* Quark, also named AliHub core library. (c) Kingcean Tuan, 2014. Alibaba Group. */
var __extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},AliHub;(function(n){var t;(function(t){function b(t){if(t&&t.process&&t.count!==0&&t.span!==0){if(!t.start&&t.count==null)return function(){return t.process(0,t)};var i=0,r=null;return function(){var u=r!=null?n.Common.DateTime.getSpan(r,new Date):null,f;if(r=new Date,u==null||isNaN(u)||u>(t.span||1e3)){i=1;return}i++;f=t.start?t.start:0;i>=f&&(t.count==null||t.count>i-f)&&t.process(i-1,t)}}}function k(n,i,r){var u={timeout:i,times:0};return t.Maths.isValidNumber(r)&&r>=0&&(u.count=r),u.proc=function(){var t=n();try{if(u.times<Number.MAX_VALUE&&u.times++,u.times>=u.count&&u.count>=0)return}catch(i){}t&&(u.token=setTimeout(function(){delete u.token;u.proc()},u.timeout))},u.proc(),{dispose:function(){if(u.token!=null)try{clearTimeout(u.token)}catch(n){}},times:function(){return u.times},timeout:function(n){return arguments.length>0&&t.Maths.isValidNumber(n)&&(u.timeout=n),u.timeout},count:function(n){return arguments.length>0&&(t.Maths.isValidNumber(n)?u.count=n:delete u.count),u.count},handler:function(){return n}}}function d(){if(typeof Promise!="undefined")try{if(Promise){var t,i,n=new Promise(function(n,r){t=n;i=r});return{resolve:function(n){t(n)},reject:function(n){i(n)},promise:function(){return n},then:function(){n.then.apply(n,arguments)},"catch":function(){n.catch.apply(n,arguments)}}}}catch(r){}return typeof jQuery!="undefined"&&jQuery&&jQuery.Deferred?jQuery.Deferred():null}function g(n,i,r,u){return n||(n=t.deferred()),n.reject({title:i,message:i,info:r,inner:u,timestamp:new Date}),n}function nt(t,i,r,u){var f,e;return u===void 0&&(u=!1),f=new n.Collection.DisposableArray,i||(i={}),e=function(){i.id=t.getId();i.model=t.viewModel();i.info=t.info();i.converted=t.converted();i.prop={};t.propKeys().forEach(function(n){i.prop[n]=t.prop(n)})},r||(r=function(n){n()}),u?e():r(e),t.viewModelChanged.add(function(n){r(function(){i.model=n.value})},t,f),t.convertedChanged.add(function(n){r(function(){i.converted=n.value})},t,f),t.convertorChanged.add(function(n){r(function(){i.convertor=n.value})},t,f),t.propChanged.add(function(n){n.key&&r(function(){i.prop||(i.prop={});i.prop[n.key]=n.value})},t,f),f.data=i,f}function tt(n,t){return t===void 0&&(t=!1),arguments.length>0&&(t===!0&&i.bindingFactory||(i.bindingFactory=n)),i.bindingFactory}function it(n){return i.bindingFactory?arguments.length>0?i.bindingFactory.create(n):i.bindingFactory.create():arguments.length>0?f(n):f()}function f(i){var f=i,e=0,h=0,s=new n.Collection.EventHandlers,o=new n.Collection.EventHandlers,u=function(n){if(arguments.length>0){h<Number.MAX_VALUE&&h++;var t=f;if(n===t)return;if(u.format&&typeof u.format=="function"&&(n=u.format(n,t)),n===t)return;s.raise({oldValue:t,newValue:n,event:"changing",target:null,times:e});f=n;e<Number.MAX_VALUE&&e++;o.raise({oldValue:t,newValue:n,event:"changed",target:null,times:e})}return f};return u.bag={},u.listenChanging=function(n,t,i,r,u){return s.add(n,t,i,r,u)},u.listen=function(n,t,i,r,u){return o.add(n,t,i,r,u)},u.listenOnce=function(n,t,i,r){return o.addOnce(n,t,i,r)},u.forceToNotify=function(n){var t=function(){s.raise({oldValue:f,newValue:f,event:"notify",target:null,times:e});o.raise({oldValue:f,newValue:f,event:"notify",target:null,times:e})};n==null||n===!1?t():n===!0?setTimeout(t,0):typeof n=="number"&&setTimeout(t,n)},u.unlisten=function(n){o.remove(n)},u.unlistenChanging=function(n){s.remove(n)},u.clearListener=function(){o.clear()},u.clearChangingListener=function(){s.clear()},u.subscribe=function(n,t,i){return(i=i?i.toString().toLowerCase():null,!i||i==="changed"||i==="change")?o.add(function(i){n.call(t,i.newValue)}):i==="changing"||i==="beforechange"?s.add(function(i){n.call(t,i.newValue)}):{useless:!0,dispose:function(){},raise:function(){n.call(t,f)}}},u.model=function(n,t){return t===void 0&&(t=!1),arguments.length>0&&(t&&u()===n?u.forceToNotify():u(n)),f},u.loadFromWeb=function(t,i,r){var f=n.Web.resolve(t,i,r);return f.then(function(n){u.model(n.result)}),f},u.copyModel=function(){return r.copy(f)},u.changeTimes=function(){return e},u.setterCalledTimes=function(){return h},u.toJSON=function(){return t.Text.serialize(f)},u}function rt(n,t){var i=arguments.length>1?f(t):f();return i.getEntity=n&&typeof n=="function"?function(){var t=i();return t?n(t):null}:null,i}function c(n){if(i.bindingFactory)return arguments.length>0?i.bindingFactory.createArray(n):i.bindingFactory.createArray();var r=t.listenedObj(n);return r.indexOf=function(n,t){return(r()||[]).indexOf(n,t)},r.slice=function(n,t){return(r()||[]).slice(n,t)},r.splice=function(n,t){for(var f,u=[],i=2;i<arguments.length;i++)u[i-2]=arguments[i];return(f=r()||[]).splice.apply(f,[n,t].concat(u))},r.pop=function(){return(r()||[]).pop()},r.push=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];(t=r(),t)&&t.push.apply(t,i)},r.shift=function(){return(r()||[]).shift()},r.unshift=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(r()||[]).unshift()},r.reverse=function(){return c((r()||[]).reverse())},r.sort=function(n){var t=r();if(t)return c(arguments.length>0?t.sort(n):t.sort())},r}function ut(n){i.bindingFactory&&n&&i.bindingFactory.applyBindings(n)}function ft(n,t){i.templateEngines[n]=t}function et(n){delete i.templateEngines[n]}function ot(r,u,f,e,o){var h,c,v,y,b,s,l,k;if(u&&(f&&f!==""||(f="static"),h=null,c=u.getElement(),c)){switch(f.toString().toLowerCase()){case"html":case"htm":case"static":h=e?e.toString():"";break;case"element":if(v=e?n.Elements.getById(e):c,!v)return;h=v.innerHTML;break;case"this":case"inner":if(e){if(y=u.getChildElement(!0,e),!y)return;h=y.innerHTML}else h=c.innerHTML;break;case"ajax":e&&n.Web.RestJob.getString(e,{}).then(function(n){t.applyTemplate(r,u,"static",n,o)});return;default:return}if(h){if(h=h.replace(/__view_control_/g,c.id+"_").replace(/{{_id}}/g,c.id).replace(/{{id\(\)}}/g,c.id),c.innerHTML=h,!r){var p=t.Text.trim(h),w="<!-- template-engine:",d=p.indexOf(w);d<5&&(b=p.indexOf("-->",w.length),b<50&&(s=p.substring(d+w.length,b),s&&s.indexOf("\n")>0&&(s=s.substring(0,s.indexOf("\n"))),s&&s.indexOf("\r")>0&&(s=s.substring(0,s.indexOf("\r"))),s&&(s=t.Text.trim(s.replace("\n","").replace("\r",""))),s&&(r=s)))}}else c.innerHTML="";try{l=null;r&&(l=typeof r=="function"?r:i.templateEngines[r]);!l&&i.defaultTemplateEngine&&(l=i.templateEngines[i.defaultTemplateEngine]);l||(l=t.applyBindings);l?l(u):n.Diagnostics.error("CoreLibrary","[0x02090404] Failed to apply bindings because there is no one registered.")}catch(a){if(!o)return;if(k=a&&a.message?a.message:n.Res.builtIn().localString("bindingError"),n.Diagnostics.error("CoreLibrary","[0x02090403] Failed to apply bindings"+(r?" via "+r:"")+". ("+k+")"),!o(k))throw a;}}}function st(n){return arguments.length>0&&(i.defaultTemplateEngine=n),i.defaultTemplateEngine}function ht(t){var r=n.Elements.getById(t),i;if(!r)return null;for(i=r.parentElement;i&&i!==document.body;){if(i._control)return i._control;i=i.parentElement}return null}function ct(t){for(var i=n.Elements.getById(t);i&&i!==document.body;){if(i._control)return i._control;i=i.parentElement}return null}function lt(i){if(typeof i!="string")return null;switch(i.toLowerCase().replace(".","").replace(".","").replace(".","").replace(".","").replace("-","").replace("-","").replace("-","").replace("-","").replace("alihub","").replace("quark","").replace("control","")){case"visual":case"commonvisual":return t.VisualControl;case"binding":case"commonbinding":return t.BindingControl;case"activity":case"commonactivity":return t.ActivityControl;case"time":case"commontime":return t.TimeControl;case"list":case"collectionlist":return n.Collection.ListControl;case"table":case"collectiontable":return n.Collection.TableControl;case"paging":case"collectionpaging":return n.Collection.PagingControl;case"array":case"arraybinding":case"collectionbinding":return n.Collection.BindingControl;case"switch":case"collectionswitch":return n.Collection.SwitchControl;case"singleflow":case"collectionsingleflow":return n.Collection.SingleFlowControl;case"audio":case"mediaaudio":return n.Media.AudioControl;case"camera":case"mediacamera":return n.Media.CameraControl;case"button":case"elementsbutton":return n.Elements.ButtonControl;case"checkbox":case"elementscheckbox":return n.Elements.ButtonControl;default:return n.Elements.getControlRegisteredForTag(i.toLowerCase())}}function at(t,i,u){var f=n.Elements.getById(t),c,e,o,s,h;if(!f||!f.tagName)return null;if(f._control)return f._control;for(c=!0,e=f;e;){if(o=e.tagName?e.tagName.toString().toLowerCase():null,!o||o==="template"||o==="part"||o==="template-part"){c=!1;break}e=e.parentElement}if(c)return(i||(f.tagName.toLowerCase().indexOf("quark-")===0?i=f.tagName.toLowerCase():n.Elements.hasControlRegisteredForTag()&&f.tagName.toLowerCase().indexOf("-")>0?i=f.tagName.toLowerCase():f.getAttribute&&f.getAttribute("data-control-type")&&(i=f.getAttribute("data-control-type"))),!i)?null:(s=i,typeof i=="string"&&(s=lt(i)),h=f&&s&&typeof s=="function"?new s(f):null,!h)?null:(h.loadOptions(r.unwrapObject(u,h)),h)}function vt(t){for(var r,u=[],i=1;i<arguments.length;i++)u[i-1]=arguments[i];return r=n.Elements.getById.apply(n.Elements,[t].concat(u)),r&&r._control?r._control:null}function o(n,i,r,f){var e,o,s;if(i||(i=u),e=r,o=f&&f.getId?f:null,r&&r.getId&&(!o||!o.getId)&&(e=null,o=r),e||!f||f.getId||(e=f),o){if(!n)return null;n.tagName&&(n.id||(n.id=t.Maths.randomString("ali_content_ele_t_ri")),n=n.id);s=o.createControl(n,i)}else s=new i(n);return e&&s&&s.loadOptions(e),s}function yt(n,t,i){return o(n,null,t,i)}function pt(n,t,i){return o(n,s,t,i)}function wt(n,t,i){return o(n,h,t,i)}var p,w,i,u,e,r,l,a,v,s,h,y;(function(n){n[n.Unknown=0]="Unknown";n[n.Hbi=1]="Hbi";n[n.Mbi=2]="Mbi";n[n.Lbi=3]="Lbi";n[n.None=7]="None"})(p=t.SensitiveLevels||(t.SensitiveLevels={})),function(n){n[n.Unknown=0]="Unknown";n[n.Millisecond=1]="Millisecond";n[n.Second=2]="Second";n[n.Minute=3]="Minute";n[n.Hour=4]="Hour";n[n.Day=5]="Day"}(w=t.TimePrecisions||(t.TimePrecisions={}));i=function(){function n(){}return n}();i.templateEngines={none:function(){}};u=function(){function i(i){var y=this,u,r,v,o,s,h,l,f,c,a;if(this._increaseNumber=0,this._increaseNumberReset=!1,this._properties={},this._propertyHandlers={},this._templateParts={},this.propChanged=new n.Collection.EventHandlers,this.nodeAppended=new n.Collection.EventHandlers,this.disposableContainer=new n.Collection.DisposableArray,u=t.Maths.randomString("ali_content_ele_n_ri"),r=null,i&&(typeof i=="string"?(u=i,u.indexOf("__view_control_")===0&&(v=t.parentControl(u),u=u.replace("__view_control_",v?v.getId():""))):i.tagName?(r=i,o=t.parentControl(r),r.id||r.getAttribute("data-control-id")?!r.id&&r.getAttribute("data-control-id")&&(r.id=n.Elements.mergeId(o&&o.getId()?o.getId():"",[r.getAttribute("data-control-id")])):r.id=t.Maths.randomString(o&&o.getId()?o.getId():"ali_content_ele_e_ri"),u=r.id):i.parent&&i.suffix&&(s=i,h=n.Elements.getById(s.parent),h.body||h.documentElement||h.parent?u=(s.suffix.toString().indexOf("_")===0?"ali_container_ele_b":"")+s.suffix.toString():h&&(u=h.id+(s.suffix.toString().indexOf("_")===0?"":"_")+s.suffix.toString(),r=n.Elements.getById(u),r||(r=document.createElement("div"),r.id=u,h.appendChild(r)),n.Elements.changeStyleRef(r,s.styleRef)))),r||(r=n.Elements.getById(u)),this._containerElement=r,r){if(this.addStyleRef("ali-controls-item"),r.children)for(l=0;l<r.children.length;l++)f=r.children[l],f&&f.tagName&&(f.tagName.toString().toLowerCase()==="template"||f.tagName.toString().toLowerCase()==="section"||f.tagName.toString().toLowerCase()==="div"||f.tagName.toString().toLowerCase()==="part")&&f.innerHTML&&(c=n.Elements.getAttr(f,["data-part","data-key","part","key"]),c!=null&&(c||(c="_"),this._templateParts[c]=f.innerHTML.toString().replace("__view_control_",this._containerElement.id).replace("{{_id}}",this._containerElement.id).replace("{{id()}}",this._containerElement.id)));a=e.initializers();a&&a instanceof Array&&a.forEach(function(t,i){if(t&&t.process)try{t.process(y)}catch(r){var u="Unknown reason.";r&&r.message&&(u=r.message);n.Diagnostics.error("CoreLibrary","[0x02450102] Failed to load control initializer #"+i+". ("+u+")")}});try{r._control=this}catch(p){}}}return i.prototype.getId=function(){return this._containerElement?this._containerElement.id:null},i.prototype.increaseNumber=function(n){n===void 0&&(n=!1);var t=!1;if(this._increaseNumber<Number.MAX_VALUE)try{this._increaseNumber++}catch(i){t=!0}else t=!0;return t&&!n&&(this._increaseNumber=0,this._increaseNumberReset=!0),this._increaseNumber},i.prototype.increaseNumberIsReset=function(){return this._increaseNumberReset},i.prototype.getElement=function(){return this._containerElement},i.prototype.getTagName=function(){var n=this.getElement();return n?n.tagName:undefined},i.prototype.dispose=function(){if(this.disposableContainer&&this.disposableContainer.dispose(),this._containerElement){try{this._containerElement.remove()}catch(n){this._containerElement.outerHTML&&(this._containerElement.outerHTML="")}this._containerElement=null}},i.prototype.prop=function(n,t){var u=this,i,r;return arguments.length>1&&(i=this._properties[n],i!==t&&(this._properties[n]=t,this.propChanged.raise({key:n,value:this._properties[n],old:i}),r=this._propertyHandlers[n],r&&r instanceof Array&&r.forEach(function(t){t&&t({key:n,value:u._properties[n],old:i})}))),this._properties[n]},i.prototype.removeProp=function(n){delete this._properties[n]},i.prototype.getProp=function(n,t){var r=this._properties[n],i;return r!==undefined||!t?r:(i=this.parentControl(),i&&i.getProp&&typeof i.getProp=="function"?i.getProp(n,!0):undefined)},i.prototype.propProp=function(n,t,i){var r=this.getProp(n,i);return(r||{})[t]},i.prototype.propInfo=function(n){var i=this,r=this._properties[n],t;return r!==undefined?{owner:this,name:n,value:r,update:function(t){return i.prop(n,t)},listen:function(t){i.listenProp(n,t)}}:(t=this.parentControl(),t&&t.propInfo&&typeof t.propInfo=="function"?t.propInfo(n):{owner:undefined,name:n,value:undefined,update:function(){return undefined},listen:function(){}})},i.prototype.getPropWithDefaultValue=function(n,t,i){return this._properties[n]!==undefined?this._properties[n]:(t&&(this._properties[n]=t(this,n)),i&&this._properties[n]===undefined&&(this._properties[n]=i),this._properties[n])},i.prototype.propKeys=function(t){var u=[],r,i,f;for(r in this._properties)r&&typeof r=="string"&&u.push(r);return t&&(i=this.parentControl(),i&&i.propKeys&&typeof i.propKeys=="function"&&(f=i.propKeys(!0),n.Collection.pushRange(u,f,!0,!0))),u},i.prototype.propObj=function(n){var u=this,t,i;return n?(t=this.parentControl(),!t)?r.copy(this._properties):(i=t.propObj(!0),this.propKeys().forEach(function(n){n&&typeof n=="string"&&(i[n]=u._properties[n])}),i):r.copy(this._properties)},i.prototype.listenProp=function(n){for(var t,u,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return!n||!r?0:(t=this._propertyHandlers[n],t&&t instanceof Array||(t=[],this._propertyHandlers[n]=t),u=0,r.forEach(function(n){n&&typeof n=="function"&&(t.push(n),u++)}),u)},i.prototype.unlistenProp=function(t){for(var i,f,u=[],r=1;r<arguments.length;r++)u[r-1]=arguments[r];return!t||!u?0:(i=this._propertyHandlers[t],i&&i instanceof Array||(i=[],this._propertyHandlers[t]=i),f=n.Collection.remove(i,u,!0),f?f.length||0:0)},i.prototype.clearListenProp=function(n){n&&delete this._propertyHandlers[n]},i.prototype.getPropSourceControl=function(n){var i=this._properties[n],t;return i!==undefined?this:(t=this.parentControl(),t&&t.getPropSourceControl&&typeof t.getPropSourceControl=="function"?t.getPropSourceControl(n):undefined)},i.prototype.getCommonInfo=function(){return{id:this.getId(),tagName:this.getTagName(),props:this.propObj(!0),type:"VisualControl"}},i.prototype.toJSON=function(){var n=this.getCommonInfo();try{return t.Text.serialize(n)}catch(i){return n.propKeys=this.propKeys(!0),t.Text.serialize(n)}},i.prototype.styleRef=function(t,i){for(var f,u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];return f=this.getChildElement.apply(this,[!0].concat(u)),n.Elements.changeStyleRef(f,t,i)},i.prototype.pickStyleRef=function(t,i){for(var f,e,r,s,o=[],u=2;u<arguments.length;u++)o[u-2]=arguments[u];if(f=this.getChildElement.apply(this,[!0].concat(o)),!f||!i)return[];e=[];for(r in i)r&&typeof r=="string"&&r!==t&&(s=i[r],e.push(n.Collection.toStringArray(s,!0)));return n.Elements.changeStyleRef(f,n.Collection.toStringArray(i[t],!0),e)},i.prototype.addStyleRef=function(){for(var r,i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return r=this.getElement(),n.Elements.changeStyleRef(r,i)},i.prototype.removeStyleRef=function(){for(var r,i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return r=this.getElement(),n.Elements.changeStyleRef(r,[],i)},i.prototype.styleClass=function(n,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return this.styleRef.apply(this,[n,t].concat(r))},i.prototype.pickStyleClass=function(n,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return this.pickStyleRef.apply(this,[n,t].concat(r))},i.prototype.addStyleClass=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.addStyleRef.apply(this,t)},i.prototype.removeStyleClass=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.removeStyleRef.apply(this,t)},i.prototype.styleProp=function(n,t){var i=this.getElement();if(!i)return null;try{return arguments.length>1&&(i.style[n]=t),i.style[n]}catch(r){return null}},i.prototype.parentControl=function(){return t.parentControl(this)},i.prototype.grandParentControl=function(){return t.parentControl(t.parentControl(this))},i.prototype.parentElement=function(){var n=this.getElement();return n?n.parentElement:null},i.prototype.parentNode=function(){var n=this.getElement();return n?n.parentNode:null},i.prototype.templatePart=function(n,t){return n||(n="_"),arguments.length>1&&(this._templateParts[n]=t),this._templateParts[n]},i.prototype.loadOptions=function(t){var i,u;if(!t)return null;typeof t=="function"&&(t=r.unwrapObject(t,this));try{typeof t=="boolean"?this._containerElement&&(i=n.Elements.parseAttr(this._containerElement,"control-options",!0)):i=typeof t=="string"?eval("("+t+")"):t}catch(f){}if(i==null||(typeof i=="function"&&(i=r.unwrapObject(i,this)),i==null||typeof i!="object"))return null;if(i.preInit&&i.preInit(this),i.attr&&this._containerElement)for(u in i.attr)if(!u&&typeof u=="string"&&i.attr[u]==null&&typeof i.attr[u]=="string")try{this._containerElement.setAttribute(u,i.attr[u])}catch(f){}return this.addStyleRef.apply(this,n.Collection.toArray(i.styleRef)),i},i.prototype.appendElement=function(t,i,r,u,f){var s=this.getElement(),o,e;if(!s)return null;if(t==null&&(t="div"),o=typeof t=="string"?document.createElement(t):t,i!=null&&(o.id=this.getId()+"_"+i.toString()),s.appendChild(o),r&&n.Elements.changeStyleRef(o,r),this.nodeAppended.raise([o]),u)for(e in u)e&&typeof e=="string"&&u[e]&&typeof u[e]=="string"&&n.Elements.listen(o,e,u[e]);if(f)for(e in f)e&&typeof e=="string"&&f[e]&&typeof f[e]=="string"&&o.setAttribute(e,f[e]);return o},i.prototype.appendHTML=function(n){var f=this.getElement(),t,i,r,u;if(!f)return null;if(t=document.createElement("div"),t.innerHTML=n,i=[],t.childNodes)for(r=0;r<t.childNodes.length;r++)(u=t.childNodes[r],u)&&i.push(u);return i.forEach(function(n){f.appendChild(n)}),t.innerHTML="",this.nodeAppended.raise(i),i},i.prototype.appendElementByDef=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.appendElementByDefToChild.apply(this,[null].concat(t))},i.prototype.appendElementByDefToChild=function(i){for(var u,e,o,f=[],r=1;r<arguments.length;r++)f[r-1]=arguments[r];return(u=this.getChildElement(i),!u||!f)?[]:(e=function(i,r,u){var f=[];return u.forEach(function(u){var l,v,y,o,p,c,s,w,h,a,b;if(u){if(typeof u=="string"){if(l=document.createElement("div"),l.innerHTML=u,l.childNodes)for(v=0;v<l.childNodes.length;v++)(y=l.childNodes[v],y&&y.tagName)&&f.push(y);f.forEach(function(n){i.appendChild(n)});l.innerHTML="";return}if((o=u.element||document.createElement((u.tagName?u.tagName.toString().toLowerCase():null)||"div"),o.tagName)&&(!u.element||!u.tagName||u.tagName.toString().toLowerCase()===u.element.tagName.toString().toLocaleLowerCase())){if(p=r,u.idSuffix&&(p=n.Elements.mergeId(r,[u.idSuffix]),o.id=p),i.appendChild(o),f.push(o),n.Elements.changeStyleRef(o,u.className),n.Elements.changeStyleRef(o,u.styleRef),u.style)for(s in u.style)s&&typeof s=="string"&&u.style[s]&&typeof u.style[s]=="string"&&(o.style[s]=u.style[s]);if(u.attr)for(s in u.attr)s&&typeof s=="string"&&u.attr[s]&&typeof u.attr[s]=="string"&&o.setAttribute(s,u.attr[s]);if(u.attrObjs)for(s in u.attrObjs)s&&typeof s=="string"&&u.attrObjs.hasOwnProperty&&u.attrObjs.hasOwnProperty(s)&&n.Elements.setAttr(o,s,u.attrObjs[s]);if(u.events){c=u.events;typeof c=="function"&&(c=c(o));for(s in c)s&&typeof s=="string"&&c[s]&&typeof c[s]=="function"&&n.Elements.listen(o,s,c[s])}if(u.onClick)n.Elements.onClick(o,u.onClick);u.gesture&&n.Elements.addGesture(o,u.gesture);u.value&&(h=u.value,typeof h=="function"&&h.listen&&h.model?(o.value=(h.model()||"").toString(),n.Elements.listen(o,"change",function(){h.model(o.value)}),h.listen(function(n){o&&(o.value=(n||"").toString())},u,null,null,function(){return!o||!o.parentElement})):o.value=u.value.toString());u.prepared&&u.prepared(o);u.innerHTML&&(typeof u.innerHTML=="string"||typeof u.innerHTML=="number"?o.innerHTML=u.innerHTML.toString():u.innerHTML.value&&(w=function(n,i,r){var u=n?i?typeof i=="function"?i(n):t.Text.toHTML(n,!0):n.toString():"",f;r&&(f=r.toString().replace("{0}",u).replace("{0}",u).replace("{0}",u),u=f);o.innerHTML=u},typeof u.innerHTML.value=="string"?w(u.innerHTML.value,u.innerHTML.encode,u.innerHTML.template):u.innerHTML.value.model&&u.innerHTML.value.listen&&(h=u.innerHTML.value,w(h.model(),u.innerHTML.encode,u.innerHTML.template),h.listen(function(n){o&&w(n.newValue,u.innerHTML.encode,u.innerHTML.template)},u,null,null,function(){return!o||!o.parentElement}))));u.children&&(a=u.children,typeof a=="function"&&(a=a(o)),a instanceof Array&&e(o,p,a));u.controlType&&typeof u.controlType=="function"&&(b=new u.controlType(o),u.options&&b.loadOptions(u.options));u.ready&&u.ready(o)}}}),f},o=e(u,u.id,f),this.nodeAppended.raise(o),o)},i.prototype.hasAttr=function(n,t){var u,i,r;for(t===void 0&&(t=!1),u=[],i=2;i<arguments.length;i++)u[i-2]=arguments[i];return(r=this.getChildElement.apply(this,[!0].concat(u)),!r)?undefined:r.hasAttribute(n)?!0:t&&r.hasAttribute("data-"+n)},i.prototype.getAttr=function(n,t){var u,r,i;for(t===void 0&&(t=!1),u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];return(i=this.getChildElement.apply(this,[!0].concat(u)),!i)?undefined:i.hasAttribute(n)?i.getAttribute(n):t&&i.hasAttribute("data-"+n)?i.getAttribute("data-"+n):undefined},i.prototype.attr=function(n,t){for(var r,u=[],i=2;i<arguments.length;i++)u[i-2]=arguments[i];return(r=this.getChildElement.apply(this,[!0].concat(u)),!r)?undefined:(arguments.length>1&&r.setAttribute(n,t),r.getAttribute(n))},i.prototype.attrChanged=function(t,i){for(var f,e=this,u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];return f=this.getChildElement.apply(this,[!0].concat(u)),n.Elements.listen(f,"DOMAttrModified",function(n){var r=n.attrName||n.propertyName;t===r&&i(e._containerElement.getAttribute(t))})},i.prototype.parseAttr=function(t,i){return i===void 0&&(i=!1),n.Elements.parseAttr(this._containerElement,t,i)},i.prototype.listenAttr=function(t,i,r,u){var e,f,o;for(r===void 0&&(r=!1),u===void 0&&(u=!1),e=[],f=4;f<arguments.length;f++)e[f-4]=arguments[f];return o=this.getChildElement.apply(this,[!0].concat(e)),n.Elements.listenAttr(o,t,i,r,u)},i.prototype.listen=function(t,i){for(var u,f=[],r=2;r<arguments.length;r++)f[r-2]=arguments[r];u=this.getChildElement.apply(this,[!0].concat(f));u&&n.Elements.listen(u,t,i)},i.prototype.addGesture=function(t){for(var r,u=[],i=1;i<arguments.length;i++)u[i-1]=arguments[i];r=this.getChildElement.apply(this,[!0].concat(u));r&&n.Elements.addGesture(r,t)},i.prototype.onClick=function(t){for(var r,u=[],i=1;i<arguments.length;i++)u[i-1]=arguments[i];if(r=this.getChildElement.apply(this,[!0].concat(u)),r)n.Elements.onClick(r,t)},i.prototype.shortcutKey=function(t){for(var r,u=[],i=1;i<arguments.length;i++)u[i-1]=arguments[i];r=this.getChildElement.apply(this,[!0].concat(u));r&&n.Elements.shortcutKey(r,t)},i.prototype.getSize=function(){for(var i,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return i=this.getChildElement.apply(this,[!0].concat(r)),i?n.Elements.getSize(i,!0):{invalid:!0,message:"element does not exist."}},i.prototype.getPosition=function(){for(var i,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return i=this.getChildElement.apply(this,[!0].concat(r)),i?n.Elements.getPosition(i):{invalid:!0,message:"element does not exist."}},i.prototype.getMousePosition=function(){for(var i,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return i=this.getChildElement.apply(this,[!0].concat(r)),i?n.Elements.getMousePosition(i):{invalid:!0,message:"element does not exist."}},i.prototype.clear=function(){var n=this.getElement();n&&(n.innerHTML="")},i.prototype.getChildElement=function(t){for(var u,f,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return(t==null||t===!0)&&(!i||i.length===0)?this._containerElement:(u=this._containerElement.id,t?typeof t=="string"&&(i=[t].concat(i)):u=null,f=n.Elements.mergeId(u,i),n.Elements.getById(f))},i.prototype.getChildElements=function(t){var u=this.getElement(),f=[],e,i,r;if(!u||!u.children)return f;if(t)for(e=[],(typeof t=="string"?[t]:t).forEach(function(n){n&&e.push(n.toString().toLowerCase())}),i=0;i<u.children.length;i++)(r=u.children[i],r&&r.tagName)&&n.Collection.contains(e,r.tagName.toString().toLowerCase())&&f.push(r);else for(i=0;i<u.children.length;i++)r=u.children[i],f.push(r);return f},i.prototype.getChildControl=function(i){for(var f,e,r=[],u=1;u<arguments.length;u++)r[u-1]=arguments[u];return f=this._containerElement.id,i?typeof i=="string"&&(r=[i].concat(r)):f=null,e=n.Elements.mergeId(f,r),t.getControl(e)},i.prototype.createControl=function(t,i,r,u){var f,e,o;return!t||t.toString()===""||!i?null:(f=t.toString().replace("__view_control_",this._containerElement.id).replace("{{_id}}",this._containerElement.id).replace("{{id()}}",this._containerElement.id),f.indexOf(this._containerElement.id)!==0&&(f=this._containerElement.id+(f.indexOf("_")>0?"_":"")+f),u&&u.toString()!==""||(u="div"),e=n.Elements.getById(f),e||(e=this.appendElement(u)),e.id=f,o=new i(f),o.loadOptions(r),o)},i.prototype.addControl=function(t,i,r){var u,f;if(t&&t.toString()!==""&&i)return u=t.toString().replace("__view_control_",this._containerElement.id).replace("{{_id}}",this._containerElement.id).replace("{{id()}}",this._containerElement.id),u.indexOf(this._containerElement.id)!==0&&(u=this._containerElement.id+(u.indexOf("_")!==0?"_":"")+u),r&&r.toString()!==""||(r="div"),f=n.Elements.getById(u),f||(f=this.appendElement(r)),f.id=u,i(f,this)},i.prototype.innerHTML=function(n){return arguments.length>0&&(this.getElement().innerHTML=n?n.toString().replace(/__view_control_/g,this._containerElement.id+"_").replace(/{{_id}}/g,this._containerElement.id).replace(/{{id\(\)}}/g,this._containerElement.id):""),this.getElement().innerHTML},i.prototype.computedStyle=function(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return(i=this.getChildElement.apply(this,[!0].concat(r)),!i)?null:getComputedStyle(i,n)},i.prototype.styleRefRules=function(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return(i=this.getChildElement.apply(this,[!0].concat(r)),!i)?null:getMatchedCSSRules(i,n)},i.prototype.fullScreen=function(){for(var n,i,r,u=[],t=0;t<arguments.length;t++)u[t]=arguments[t];if(n=this.getChildElement.apply(this,[!0].concat(u)),n)try{i=n.requestFullscreen||n.requestFullScreen||n.webkitRequestFullScreen||n.webkitRequestFullscreen||n.mozRequestFullScreen||n.msRequestFullScreen;i?i.call(n):typeof ActiveXObject!="undefined"&&(r=new ActiveXObject("WScript.Shell"),r&&r.SendKeys("{F11}"))}catch(f){}},i.prototype.lang=function(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];if(i=this.getChildElement.apply(this,[!0].concat(r)),i)return arguments.length>0&&(i.lang=n),i.lang},i.prototype.scrollTo=function(n,t){var i=this._containerElement;i&&(n!=null&&(i.scrollLeft=n),t!=null&&(i.scrollTop=t))},i}();t.VisualControl=u;e=function(){function n(){}return n.initializers=function(){return n._initializers},n}();e._initializers=[];t.ControlManager=e;r=function(){function n(){}return n.isNotNull=function(n){return n!=null},n.isFunction=function(n){return n&&typeof n=="function"},n.copy=function(n){var i,r,t;if(n==null)return null;if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array)return i=[],n.forEach(function(n){i.push(n)}),i;r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},n.addProperties=function(n,t,i){if(i===void 0&&(i=!1),n&&t)for(var r in t)t.hasOwnProperty(r)&&(i||n[r]===undefined)&&(n[r]=t[r])},n.getId=function(n,t){if(n==="")return"";if(!n)return null;typeof n=="function"&&(n=n());var i=null;return typeof n=="number"?i=n.toString():typeof n=="string"?i=n.toString():n.id&&(i=n.id,t&&t(n)),i},n.extend=function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},n.unwrapObject=function(n,t,i){if(n==null)return n;var r=0;for((i==null||i===-1)&&(i=null);n!=null&&typeof n=="function"&&(i==null||r<i);)n=n.apply(t),r++;return n},n.emptyDisposable=function(n){var i={dispose:function(){},useless:!0},t;if(n)for(t in n)t&&typeof t=="string"&&(i[t]=n[t]);return i},n.callMethod=function(n,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n&&n[t]&&typeof n[t]=="function"?n[t].apply(n,r):undefined},n.getProperty=function(n){for(var t,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return!i||i.length<1?n:(t=n,i.some(function(n){if(t==null)return!0;if(t[n]==null&&typeof n=="string"&&n.length>2&&n.indexOf("()")===n.length-2){var i=n.substring(0,n.length-2);if(t[i]&&typeof t[i]=="function")return t=t[i](),!1}return t=t[n],!1}))?undefined:t},n.setProperty=function(n,t){for(var r,f,i=[],u=2;u<arguments.length;u++)i[u-2]=arguments[u];return!i||i.length<1?!1:(r=t,f=!1,i.some(function(t,u){return r==null?!0:(r=r[t],u<i.length-2)?!1:(r[i[i.length-1]]=n,f=!0,!0)}),f)},n.toIntroHTML=function(t,i,r,u,f){var a,y,p,w,l,b,h;i===void 0&&(i=0);r===void 0&&(r=!1);u===void 0&&(u=!1);f===void 0&&(f=null);i==null&&(i=0);var k=i>=0?i+1:-1,o="",c=u?"'":"&quot;";for(a=0;a<i;a++)o+="&nbsp; &nbsp; ";var e=" ",s=r?o:"",v=o;if(i>=0&&(e="<br />",v+="&nbsp; &nbsp; "),t==null)return o+'<span class="ali-x-code-keyword">null<\/span>';if(typeof t=="string")return t.length>5&&t.indexOf("**$")===0&&t.lastIndexOf("**")===t.length-2?(y=t.substring(3,t.length-2),f&&y==="this")?f:y:'<span class="ali-x-code-string">'+c+t+c+"<\/span>";if(typeof t=="function")return'<span class="ali-x-code-unknown">'+t.toString().replace("function",'<\/span><span class="ali-x-code-keyword">function<\/span><span class="ali-x-code-unknown">')+"<\/span>";if(typeof t=="number")return s+'<span class="ali-x-code-number">'+t.toString()+"<\/span>";if(typeof t=="boolean")return s+'<span class="ali-x-code-keyword">'+(t?"true":"false")+"<\/span>";if(t instanceof Date)return s+'<span class="ali-x-code-number">'+t.getTime().toString()+"<\/span>";if(t instanceof Array)return p=[],w=0,t.forEach(function(t,i,r){var e=n.toIntroHTML(t,k,!1,u,f);r.push(e);w+=e.length}),s+(w<50?"["+p.join(", ")+"]":"["+e+p.join(","+e+v)+e+"]");l=s+"{";b=0;for(h in t){if(!h||typeof h!="string")return;b++;l+=e+v+'<span class="ali-x-code-string">'+c+h+c+"<\/span>: "+n.toIntroHTML(t[h],k,!1,u,f)+","}return b===0?"":l.substring(0,l.length-1)+e+o+"}"},n}();t.Reflection=r;l=function(){function n(n){this._model=n&&typeof n!="function"?function(){return n}:n}return n.prototype.model=function(){return this._model()},n}();t.BindingConvertion=l;a=function(){function t(){this._properties=[];this.propChanged=new n.Collection.EventHandlers}return t.prototype.bindStr=function(){return n.Common.bindingObj()},t.prototype.bindObj=function(){return n.Common.bindingObj()},t.prototype.initProp=function(){for(var t=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r&&r.forEach(function(i){t[i]&&typeof t[i]=="function"||(t[i]=n.Common.bindingObj(),t._regProp(i))})},t.prototype.setProp=function(t,i){if(t&&t!=""){var r=null;this[t]&&typeof this[t]=="function"?(r=this[t](),this[t](i)):this[t]=i==null?n.Common.bindingObj():i instanceof Array?n.Common.bindingArray(i):n.Common.bindingObj(i);this._regProp(t);this.propChanged.raise({key:t,old:r,value:i})}},t.prototype.loadObj=function(n,t){var r,i;if(n!=null&&!(n instanceof Array)&&(r=typeof n,r!=="string"&&r!=="number"&&r!=="boolean")){if(t==null){for(i in n)i&&typeof i=="string"&&this.setProp(i,n[i]);return}for(i in t)this.setProp(i,n[i])}},t.prototype.initArray=function(){for(var t=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r&&r.forEach(function(i){t[i]&&typeof t[i]=="function"||(t[i]=n.Common.bindingArray(),t._regProp(i))})},t.prototype.setArray=function(t,i){if(t&&t!=""){var r=null;this[t]&&typeof this[t]=="function"?(r=this[t](),this[t](i)):i==null?this[t]=n.Common.bindingArray():(i instanceof Array||(i=[i]),this[t]=n.Common.bindingArray(i));this._regProp(t);this.propChanged.raise({key:t,old:r,value:i})}},t.prototype.pushArrayItem=function(n){for(var r=this,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return!n||n==""?null:(this.initArray(n),i&&i.forEach(function(t){r[n].push(t)}),this[n]())},t.prototype.getProp=function(n){if(!n||n=="")return undefined;var t=this[n];return t&&typeof t=="function"?t():t},t.prototype.getPropSource=function(n){return!n||n==""?undefined:this[n]},t.prototype.propertyNames=function(){return n.Collection.copy(this._properties)},t.prototype.unwrap=function(n){var i={},u,t;for(u in this._properties)(t=this._properties[u],t&&typeof t=="string")&&(i[t]=r.unwrapObject(this[t],this,n));return i},t.prototype._regProp=function(n){return n?(n=n.toString(),this._properties.some(function(t){return t===n}))?!1:(this._properties.push(n),!0):!1},t}();t.BindingPropertyBag=a;v=function(){function t(){this.changed=new n.Collection.EventHandlers}return t.prototype.get_value=function(){return this._raw},t.prototype.set_value=function(n){if(n!==this._raw){var t=this._raw;this._raw=n;this.changed.raise(this._getChangedArgs(t,"changed"))}},t.prototype.toObservable=function(){var n=this,t=function(t){return typeof t!="undefined"&&t!==void 0&&(n._raw=t),n._raw};return t.subscribe=function(){return{dispose:function(){}}},t},t.prototype._getChangedArgs=function(n,t){return{oldValue:n,newValue:this._raw,target:this,event:t}},t}();t.BindingObject=v;s=function(i){function r(r){var u=i.call(this,r)||this;return u._model=t.bindingObj(),u._info=t.bindingObj(),u._extenders=[],u._convertor=null,u._converted=t.bindingObj(),u._extendersLoaded=!1,u._bindingControls=[],u.viewModelChanged=new n.Collection.EventHandlers,u.convertedChanged=new n.Collection.EventHandlers,u.convertorChanged=new n.Collection.EventHandlers,u.infoChanged=new n.Collection.EventHandlers,u.addStyleRef("ali-controls-binding"),u._modelDispose=u._model.subscribe(function(n){var t=u._updateConverted(n);u._loadExtenders();!u.viewModelChanged||!u.viewModelChanged.raise||u.viewModelChanged.raise({key:"viewModel",value:n});!u.convertedChanged||!u.convertedChanged.raise||u.convertedChanged.raise({key:"converted",value:t})}),u}return __extends(r,i),r.prototype.onBindingError=function(){return!!this._model()},r.prototype.templateEngine=function(n){return arguments.length>0&&(this._templateEngine=n),this._templateEngine},r.prototype.setTemplate=function(n,i){var r=this;if(n!=null||i!=null){if(n==="part"||n==="initpart"){if(i=this.templatePart(!i?"":i),i||(i=this.templatePart("content")),n==="initpart"&&!i)return;n=""}t.applyTemplate(this._templateEngine,this,n,i,function(n){return r.onBindingError(n)});this._loadExtenders()}},r.prototype.viewModel=function(n){return arguments.length>0&&this._model(n),this._model()},r.prototype.setViewModelFromWeb=function(t,i,r){var f=this,u=n.Web.resolve(t,i,r);return u.then(function(n){f.viewModel(n.result)}),u},r.prototype.bindViewModel=function(n){var t=this;!this._modelDispose||!this._modelDispose.dispose||this._modelDispose.dispose();this._model=n;this._modelDispose=this._model.subscribe(function(n){var i=t._updateConverted(n);t._loadExtenders();!t.viewModelChanged||!t.viewModelChanged.raise||t.viewModelChanged.raise({key:"viewModel",value:n});!t.convertedChanged||!t.convertedChanged.raise||t.convertedChanged.raise({key:"converted",value:i})});this.updateConverted();this._extendersLoaded=!1;this._loadExtenders()},r.prototype.subscribeViewModel=function(n,t){var i=this;return this.viewModelChanged.add(function(r){n.call(t||i,r.value)})},r.prototype.observableViewModel=function(){return this._model},r.prototype.info=function(n){return arguments.length>0&&this.setInfo(n),this._info()},r.prototype.setInfo=function(n){this._info(n);this.infoChanged.raise({key:"info",value:n});this._loadExtenders()},r.prototype.convertor=function(n){return arguments.length>0&&this.setConvertor(n),this._convertor},r.prototype.setConvertor=function(n){if(n!==this._convertor&&(n||this._convertor)){this._convertor=n;var t=this.updateConverted();!this.convertorChanged||!this.convertorChanged.raise||this.convertorChanged.raise({key:"convertor",value:n});!this.convertedChanged||!this.convertedChanged.raise||this.convertedChanged.raise({key:"converted",value:t})}},r.prototype.converted=function(){return this._converted()},r.prototype.observableConverted=function(){return this._converted},r.prototype.updateConverted=function(){return this._updateConverted(this._model())},r.prototype.clearViewModel=function(){this._model(null)},r.prototype.listenModel=function(n,i,r){return r===void 0&&(r=!1),t.listenBindingControl(this,n,i,r)},r.prototype.refresh=function(){var n=this._model();this._model(null);this._model(n)},r.prototype.loadOptions=function(n){var t=i.prototype.loadOptions.call(this,n),r;return t?(!t.templateEngine||this.templateEngine(t.templateEngine),!t.bindControl||(this.bindViewModel(t.bindControl.observableViewModel()),this.convertor(function(){return t.bindControl.converted()}),this.setInfo(t.bindControl.info())),!t.viewModel||this.viewModel(t.viewModel),!t.convertor||this.setConvertor(t.convertor),t.ignoreParts||this.setTemplate("initpart",null),this.setTemplate(t.templateType,t.template),this.addExtender(t.extender),!t.webData||(r=typeof t.webData=="function"?t.webData.call(t):t.webData,this.setViewModelFromWeb(r.subject,r.key,r.parameters)),t):null},r.prototype.procExtender=function(n,t){t===void 0&&(t=!1);var i=this.getExtender(n);return i?i.model(this):t===!0?{}:null},r.prototype.getExtender=function(n){if(!n)return null;var t=null;return this._extenders.some(function(i){return i.name!==n?!1:(t=i,!0)}),t},r.prototype.addExtender=function(t){var i=this,r=n.Collection.toArray(t);r.forEach(function(n){n&&n.name&&(i.removeExtender(n.name),i._extenders.push(n),i._extendersLoaded&&!!n.load&&n.load(i))})},r.prototype.removeExtender=function(n){if(n){var t=[];this._extenders.forEach(function(i){i&&i.name!==n&&t.push(i)});this._extenders=t}},r.prototype.updateExtenders=function(){this._loadExtenders()},r.prototype.clearExtenders=function(){this._extenders=[]},r.prototype.addBindingControl=function(t,i,r,u,f){var o=this,e;return(u===void 0&&(u=!0),e=this._getBindingControl(t),!u&&!!e&&!!e.value)?e.value:this.addControl(t,function(u){var s=new n.Common.BindingControl(u);return s.convertor(function(){return o.converted()}),s.bindViewModel(o._model),s.setTemplate(i,r),e?e.value=s:o._bindingControls.push({key:t,value:s}),!f||f(s),s})},r.prototype.getBindingControl=function(n){var t=this._getBindingControl(n);return!t?null:t.value},r.prototype._updateConverted=function(n){if(!this._convertor)return undefined;var t=this._convertor(n);return this._converted(t),this._converted()},r.prototype._getBindingControl=function(n){var t,i;return!n||n.toString().length<1?null:(this._bindingControls.some(function(i){return!i||!i.key||i.key!==n?!1:(t=i,!0)}),t||n.indexOf("_")!==0||(i="_"+n,this._bindingControls.some(function(n){return!n||!n.key||n.key!==i?!1:(t=n,!0)})),t)},r.prototype._loadExtenders=function(){var t=this,n;!this._extendersLoaded&&this.getElement()&&(n=this.getElement().innerHTML,!n||n===""||!this.viewModel()||(this._extendersLoaded=!0,this._extenders.forEach(function(n){!n||!n.load||n.load(t)})))},r}(u);t.BindingControl=s;h=function(i){function r(t){var r=i.call(this,t)||this;return r._activities=[],r._index=-1,r._count=0,r.changing=new n.Collection.EventHandlers,r.changed=new n.Collection.EventHandlers,r.addStyleRef("ali-controls-activity"),r}return __extends(r,i),r.prototype.length=function(){return this._activities.length},r.prototype.index=function(){return this._index},r.prototype.current=function(){if(this._activities.length===0||this._index==-1)return this._index=-1,null;this._index>=this._activities.length&&(this._index=this._activities.length-1);this._index<0&&(this._index=0);var n=this._activities[this._index];return!n?null:{key:n.key,control:n.control,model:n.model,index:this._index}},r.prototype.currentControl=function(){var n=this.current();return!n?null:n.control},r.prototype.currentItemModel=function(){var n=this.current();return!n?null:n.model},r.prototype.add=function(n,i,r){var c=this,o,f;this._count>=1e8&&(this._count=0);this._count++;this._index<this._activities.length-1&&(o=[],this._activities.forEach(function(n,t){n&&n.control&&(t<=c._index?o.push(n):n.control.getElement().outerHTML="")}),this._activities=o,this._index=this._activities.length-1);var e=this.appendElement("div"),h=new Date,s=this._count.toString()+"t"+h.getSeconds().toString()+h.getMilliseconds().toString();return e.id=this.getId()+"_c"+s,n&&n(e),f=t.getControl(e),f||(f=new u(e)),!r||r(f),this._activities.push({key:s,control:f,model:i,index:this._activities.length}),this._turnTo(this._index+1),{key:s,control:f,model:i,index:this._activities.length}},r.prototype.getItem=function(n){var i;if(n==null)return null;if(typeof n=="number")return n>=this._activities.length||n<0?null:(i=this._activities[n],{key:i.key,control:i.control,model:i.model,index:n});var t=null,r=-1,u=typeof n=="string"?n:n.getId();return this._activities.some(function(n){return(r++,!n||!n.control||n.control.getId()!==u&&n.key!==u)?!1:(t=n,!0)}),!t?null:{key:t.key,control:t.control,model:t.model,index:r}},r.prototype.getPrevious=function(){var n=this._index-1;return this.getItem(n)},r.prototype.items=function(){for(var t=[],n=0;n<this._activities.length;n++)t.push(this.getItem(n));return t},r.prototype.turnTo=function(n){var t=this.getItem(n);return this._turnTo(!t?-1:t.index),t},r.prototype.back=function(n){n===void 0&&(n=1);var t=this._index-n;return this.turnTo(t)},r.prototype.loadOptions=function(n){var t=i.prototype.loadOptions.call(this,n);return!t,t},r.prototype._turnTo=function(t){var r=this.current(),i;if(this._index=t,i=this.current(),this.changing.raise({key:"active",old:!!r&&!!r.control?{key:r.key,control:r.control,model:r.model,index:r.index}:null,value:!!i&&!!i.control?{key:i.key,control:i.control,model:i.model,index:t}:null}),!r||!r.control||(n.Elements.changeStyleRef(r.control.getElement(),"ali-state-active-f","ali-state-active-t"),r.control.styleProp("display","none")),!i||!i.control){this.changed.raise(null);return}n.Elements.changeStyleRef(i.control.getElement(),"ali-state-active-t","ali-state-active-f");i.control.styleProp("display","");this.changed.raise({key:i.key,control:i.control,model:i.model,index:t})},r}(u);t.ActivityControl=h;y=function(){function i(){this._model={};this.changed=new n.Collection.EventHandlers}return i.prototype.prop=function(n,t){return n?(arguments.length>1&&this.listenedProp(n,!0)(t),this._model[n]&&typeof this._model[n]=="function"?this._model[n]():undefined):undefined},i.prototype.listenedProp=function(n,i){var u=this,r=this._model[n];return!r&&i&&(this._model[n]=t.listenedObj(),r=this._model[n],r.referenceKey=n,r.listen(function(t){u.changed.raise({key:n,old:t.oldValue,value:t.newValue})})),r},i.prototype.loadModel=function(n){var i,t;if(n){i=0;for(t in n)t&&typeof t=="string"&&(this.prop(t,n[t]),i++);return i}},i.prototype.getModel=function(){var i={},t,n;for(t in this._model)t&&typeof t=="string"&&(n=this._model[t],n&&typeof n=="function"&&n.model&&n.subscribe&&n.listen)&&(i[t]=n());return i},i.prototype.hasProp=function(n){var t=this._model[n];return t&&typeof t=="function"&&t.model&&t.subscribe&&t.listen},i.prototype.removeProp=function(){for(var i,t=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return i=0,r.forEach(function(n){var r,u;n&&typeof n=="string"&&(r=t._model[n],r)&&(u=r(),delete t._model[n],u!==undefined&&t.changed.raise({key:n,old:u,value:undefined}),i++)}),i},i}();t.ListenedBag=y;t.getContinuityTask=b;t.sleepLoop=k;t.deferred=d;t.rejectDeferred=g;t.listenBindingControl=nt;t.bindingFactory=tt;t.bindingObj=it;t.listenedObj=f;t.entityBinding=rt;t.bindingArray=c;t.applyBindings=ut;t.setTemplateEngine=ft;t.removeTemplateEngine=et;t.applyTemplate=ot;t.defaultTemplateEngine=st;t.parentControl=ht;t.currentControl=ct;t.fillControl=at;t.getControl=vt;t.createControl=o;t.visualControl=yt;t.bindingControl=pt;t.activityControl=wt})(t=n.Common||(n.Common={}))})(AliHub||(AliHub={})),function(n){var t;(function(n){n.Sources={}})(t=n.Data||(n.Data={}))}(AliHub||(AliHub={})),function(){var n=function(){return typeof console=="undefined"?AliHub:(console&&typeof console.info=="function"&&console.info("Quark loads completed by AMD."),AliHub)};try{window._pageInitDate||(window._pageInitDate=new Date)}catch(t){}typeof define=="function"?define.amd?define(["exports"],function(){return n("Quark loads completed by AMD.")}):typeof __webpack_require__!="undefined"?define(["exports"],function(){return n("Quark loads completed by Webpack.")}):(typeof modulex!="undefined"||typeof KISSY!="undefined")&&define(function(){return n("Quark loads completed by KISSY / Modulex.")}):typeof require=="function"&&typeof exports=="object"&&typeof module=="object"?(n("Quark loads completed by CommonJS."),module.exports=AliHub):typeof KISSY!="undefined"&&KISSY.add(function(){return n("Quark loads completed by KISSY 1.x.")},{requires:[]})}(),function(n){var t;(function(t){function g(n,t,i,r){t===void 0&&(t=!0);var u;return u=n?n instanceof Array?n:[n]:t?[]:null,!i||!u||u.forEach(i,r),u}function nt(n,t,i,r){t===void 0&&(t=!0);var u;return u=n?n instanceof Array?n:[n.toString()]:t?[]:null,!i||!u||u.forEach(i,r),u}function tt(n){return n!=null&&n instanceof Array}function it(n,i,r){return n?t.indexOf(n,i,r)>=0:!1}function rt(n,t,i){if(!n)return 0;var r=-1;return n.some(function(n,u){return(!i?n===t:typeof i=="string"?n!=null&&n[i]===t:i(n,t))?(r=u,!0):!1}),r}function b(n,t,i){if(!n)return undefined;var r;return n.some(function(n){return(!i?n===t:typeof i=="string"?n!=null&&n[i]===t:i(n,t))?(r=n,!0):!1})?r:undefined}function ut(n,t){if(t===void 0&&(t=!1),!n)return null;var i=[];return n.forEach(function(n){(n||!t)&&i.push(n)}),i}function ft(n,i,r,u){return(r===void 0&&(r=!1),u===void 0&&(u=!1),!n)?null:(!i||i.forEach(function(i){(i||!r)&&(u&&t.contains(n,i,typeof u=="boolean"?null:u)||n.push(i))}),n)}function et(n,i,r,u){var e;if(r===void 0&&(r=!1),u===void 0&&(u=null),!n)return null;if(i==null||i.length===0)return n;var f=r?n:[],s=r?t.copy(n):n,o=f.length;if(o>0)for(e=0;e<o;e++)f.pop();return s.forEach(function(n){t.contains(i,n,u)||f.push(n)}),f}function ot(n,i,r){return r===void 0&&(r=!1),t.remove(n,i,r,function(n,t){return n.key===t})}function st(n,t,i){if(i===void 0&&(i=null),n||(n=[]),!t)return n;var r=!1;return n.forEach(function(n){(!i?n.key!==t.key:i(n.key,t.key))||(r=!0,n.value=t.value)}),r||n.push(t),n}function ht(n,i,r,u,f){if(!i)return n;var e="",o=t.toStringArray(r,!1),s=t.toStringArray(u,!1);return i=i.toString(),e=i+(n||"").toString()+i,e=e.replace(i+i,i),!o||o.forEach(function(n){e=e.replace(i+n+i,i)}),!s||s.forEach(function(n){e=e.replace(i+n+i,i)}),e=(e+i).replace(i+i,i).replace(i+i,i).replace(i+i,i).replace(i+i,i),e===i&&(e=""),!o||o.forEach(function(n){e+=i+n+i;e=e.replace(i+i,i)}),!f&&e.length>i.length*2&&(e=e.substring(i.length,e.length-i.length)),e.replace(i+i,i)}function ct(n,i,r){if(!n||!i)return null;var f=null,u=typeof i=="string"?i:i.id;return(r||!i.type||(r=i.type),!r||!u)?null:(u=u.toString(),r=r.toString(),t.toArray(n).forEach(function(n){var i=n.map,e;(i||(i=n.mapping),i||(i={}),e=i[r],e||(e=[r]),e)&&t.toStringArray(e).forEach(function(t){var i=n[t];i&&i.some(function(n){return n.id!=u?!1:(f=n,!0)})})}),f)}function lt(n,i){if(!n||!i||!i.id||!i.type)return[];var r=[],u=i.type.toString();return t.toArray(n).forEach(function(n){var e=n.map,f;(e||(e=n.mapping),f=e[u],f||(f=[u]),f)&&t.toStringArray(f).forEach(function(t){var u=n[t];u&&u.some(function(n){return n.id!=i.id.toString()?!1:(r.push(n),!0)})})}),r}function at(n,t){if(!n)return null;var i=null;return n.some(function(n){return n.value!==t?!1:(i=n,!0)}),i}function vt(n,i,u){var f,e,o;if(!n||!i)return null;f=!i.property?n:n[i.property.toString()];e=null;i.mapping==null&&(i.mapping=r.Property);switch(i.mapping){case r.Property:if(!f)break;e=!i.key?f:f[i.key.toString()];break;case r.Id:if(!f||!i.key||!t.isArray(f)||!f.length)break;e=t.getItem(f,i.key,"id");break;case r.Key:if(!f||!i.key||!t.isArray(f)||!f.length)break;e=t.getItem(f,i.key,"key");!e||(e=e.value);break;case r.Index:if(!f||i.key==null||!t.isArray(f)||!f.length)break;if(o=typeof i.key=="number"?i.key:parseInt(i.key),isNaN(o)||o<0||o>f.length)break;e=f[o];break;case r.Function:if(!f||!i.key||typeof i.key!="function")break;e=i.key(f);break;case r.Static:e=i.key!=null?i.key:"";break;default:if(!f)break;e=!i.key?f:f[i.key.toString()]}return{column:i,row:n,container:u,value:e}}function yt(n,t,i){if(i===void 0&&(i=!1),!n)return null;var r=[];return n.forEach(function(n){(n||!i)&&r.push(t(n))}),r}function pt(n,i){var r={added:[],modified:[],removed:[],unchanged:[]};return n?i?(n.forEach(function(n){t.contains(i,n)?r.unchanged.push(n):r.removed.push(n)}),i.forEach(function(i){t.contains(n,i)||r.added.push(i)}),r):(r.removed=n,r):(r.added=i||[],r)}function wt(n,i,r,u,f){var o,e;return!n||!r||i==null||i===t.SelectionModes.None?{selectionMode:i!=null?i:t.SelectionModes.None,toSelected:[],toUnselected:[],selected:t.copy(n)}:(o=t.copy(n),r.forEach(function(r){var o,e,s;if(u||(u=function(){}),o=t.contains(n,r),e=f!==!1,f==null&&(e=!o),o===e)return o;switch(i){case t.SelectionModes.Single:case t.SelectionModes.SingleOrEmpty:if(i===t.SelectionModes.Single&&f==null&&o)return!0;while(n.length>0)s=n.pop(),u(s,!1);e&&n.push(r);break;case t.SelectionModes.Multiple:e?n.push(r):t.remove(n,[r],!0)}u(r,e)}),e=t.diff(o,n),{selectionMode:i,toSelected:e.added,toUnselected:e.removed,selected:t.copy(n)})}function bt(t){return arguments.length>0?n.Common.bindingArray(t):n.Common.bindingArray()}function kt(t,i,r){return n.Common.createControl(t,e,i,r)}function dt(t,i,r){return n.Common.createControl(t,o,i,r)}function gt(t,i,r){return n.Common.createControl(t,c,i,r)}function ni(t,i,r){return n.Common.createControl(t,l,i,r)}function ti(t,i,r){return n.Common.createControl(t,s,i,r)}var r,k,d,u,e,f,o,s,a,h,c,v,l,y,p,i,w;(function(n){n[n.Property=0]="Property";n[n.Id=1]="Id";n[n.Key=2]="Key";n[n.Index=3]="Index";n[n.Function=6]="Function";n[n.Static=7]="Static"})(r=t.ReferenceMappingTypes||(t.ReferenceMappingTypes={})),function(n){n[n.None=0]="None";n[n.Property=1]="Property";n[n.Item=2]="Item";n[n.Statistics=3]="Statistics";n[n.Index=4]="Index";n[n.Action=5]="Action";n[n.Decorator=6]="Decorator";n[n.Other=7]="Other"}(k=t.TableColumnTypes||(t.TableColumnTypes={})),function(n){n[n.normal=0]="normal";n[n.text=1]="text";n[n.image=2]="image"}(d=t.ButtonRenderStyles||(t.ButtonRenderStyles={})),function(n){n[n.None=0]="None";n[n.Single=1]="Single";n[n.SingleOrEmpty=2]="SingleOrEmpty";n[n.Multiple=3]="Multiple"}(u=t.SelectionModes||(t.SelectionModes={}));e=function(i){function r(r){var u=i.call(this,r)||this;return u._model=n.Common.bindingArray(),u._info=n.Common.bindingObj(),u._extenders=[],u._convertor=null,u._converted=n.Common.bindingObj(),u._extendersLoaded=!1,u.viewModelChanged=new t.EventHandlers,u.convertedChanged=new t.EventHandlers,u.convertorChanged=new t.EventHandlers,u.infoChanged=new t.EventHandlers,u._modelDispose=u._model.subscribe(function(n){var t=u._updateConverted(n);u._loadExtenders();u.viewModelChanged&&u.viewModelChanged.raise&&u.viewModelChanged.raise({key:"viewModel",value:n});u.convertedChanged&&u.convertedChanged.raise&&u.convertedChanged.raise({key:"converted",value:t})}),u}return __extends(r,i),r.prototype.onBindingError=function(){return!!this._model()},r.prototype.templateEngine=function(n){return arguments.length>0&&(this._templateEngine=n),this._templateEngine},r.prototype.setTemplate=function(t,i){var r=this;if(t!=null||i!=null){if(t==="part"||t==="initpart"){if(i=this.templatePart(!i?"item":i),t==="initpart"&&!i)return;t=""}n.Common.applyTemplate(this._templateEngine,this,t,i,function(n){return r.onBindingError(n)});this._loadExtenders()}},r.prototype.viewModel=function(n){return arguments.length>0&&this._model(n),this._model()},r.prototype.setViewModelFromWeb=function(t,i,r){var f=this,u=n.Web.resolve(t,i,r);return u.then(function(n){f.viewModel(n.result)}),u},r.prototype.subscribeViewModel=function(n,t){var i=this;return this.viewModelChanged.add(function(r){n.call(t||i,r.value)})},r.prototype.observableViewModel=function(){return this._model},r.prototype.info=function(n){return arguments.length>0&&this._info(n),this._info()},r.prototype.setInfo=function(n){this._info(n);this.infoChanged.raise({key:"info",value:n});this._loadExtenders()},r.prototype.convertor=function(n){return arguments.length>0&&this.setConvertor(n),this._convertor},r.prototype.setConvertor=function(n){if(n!==this._convertor&&(n||this._convertor)){this._convertor=n;var t=this.updateConverted();this.convertorChanged&&this.convertorChanged.raise&&this.convertorChanged.raise({key:"convertor",value:n});this.convertedChanged&&this.convertedChanged.raise&&this.convertedChanged.raise({key:"converted",value:t})}},r.prototype.converted=function(){return this._converted()},r.prototype.updateConverted=function(){return this._updateConverted(this._model())},r.prototype.clearViewModel=function(){this.viewModel(null)},r.prototype.listenModel=function(t,i,r){return r===void 0&&(r=!1),n.Common.listenBindingControl(this,t,i,r)},r.prototype.refresh=function(){var n=this._model();this._model();this._model(n)},r.prototype.loadOptions=function(n){var t=i.prototype.loadOptions.call(this,n);return t?(!t.templateEngine||this.templateEngine(t.templateEngine),!t.viewModel||this.viewModel(t.viewModel),!t.convertor||this.setConvertor(t.convertor),this.addExtender(t.extender),this.setTemplate(t.templateType,t.template),t):null},r.prototype.procExtender=function(n,t){t===void 0&&(t=!1);var i=this.getExtender(n);return i?i.model(this):t===!0?{}:null},r.prototype.getExtender=function(n){if(!n)return null;var t=null;return this._extenders.some(function(i){return i.name!==n?!1:(t=i,!0)}),t},r.prototype.addExtender=function(n){var i=this,r=t.toArray(n);r.forEach(function(n){n&&n.name&&(i.removeExtender(n.name),i._extenders.push(n),i._extendersLoaded&&n.load&&n.load(i))})},r.prototype.removeExtender=function(n){if(n){var t=[];this._extenders.forEach(function(i){i&&i.name!==n&&t.push(i)});this._extenders=t}},r.prototype.updateExtenders=function(){this._loadExtenders()},r.prototype.clearExtenders=function(){this._extenders=[]},r.prototype._updateConverted=function(n){if(!this._convertor)return undefined;var t=this._convertor(n);return this._converted(t),this._converted()},r.prototype._loadExtenders=function(){var t=this,n;!this._extendersLoaded&&this.getElement()&&(n=this.getElement().innerHTML,n&&n!==""&&this.viewModel()&&(this._extendersLoaded=!0,this._extenders.forEach(function(n){!n||!n.load||n.load(t)})))},r}(n.Common.VisualControl);t.BindingControl=e;f=function(){function t(){this.ref={};this.notify=new n.Collection.EventHandlers}return t.prototype.setProp=function(n,t){this.ref||(this.ref={});this.ref[n]=t},t.prototype.getProp=function(n){return!this.ref?(this.ref={},null):this.ref[n]},t.prototype.getChildElement=function(t){for(var u,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return u=n.Elements.mergeId(t?this.element.id:null,r),n.Elements.getById(u)},t.prototype.copy=function(){var n=new t;return n.element=this.element,n.model=this.model,n.index=this.index,n.converted=this.converted,n.extenders=this.extenders,n.notify=this.notify,this.ref||(this.ref={}),n.ref=this.ref,n},t}();t.ListItemInfo=f;o=function(r){function e(t){var f=r.call(this,t)||this,o;f._list=[];f._eleCount=0;f._extenders=[];f._references=[];f._selected=[];f.updateRequested=new i;f.entriesPushed=new i;f.selected=new i;f.selectionMode=u.None;var e=f.getId(),s=e+"_list",h=e+"_notification";return f.addStyleRef("ali-controls-list"),f.getElement().innerHTML='<div id="'+h+'" class="ali-pop-notification" style="display: none; "><\/div><ul id="'+s+'"><\/ul><div id="'+e+'_empty" class="ali-container-empty" style="display: none; " ><\/div><div id="'+e+'_note" class="ali-container-note" style="display: none; " ><\/div>',f._listEle=n.Elements.getById(s),o=n.Elements.getById(h),!o||(o.onclick=function(){if(!!f.updateRequested){if(!!f.viewModel&&!!f.viewModel.onUpdateRequested)f.viewModel.onUpdateRequested(f);f.updateRequested.raise({})}o.style.display="none"}),f}return __extends(e,r),e.prototype.isEmpty=function(){var n=this.getChildElement(!0,"empty"),t=this.forEachItem();return t===0?(!n||(n.style.display=""),!0):(!n||(n.style.display="none"),!1)},e.prototype.addReference=function(){for(var r=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];i&&i.forEach(function(n){t.contains(r._references,n)||r._references.push(n)})},e.prototype.containReference=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return t.contains(this._references,i)},e.prototype.removeReference=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t.remove(this._references,i,!0)},e.prototype.clearReference=function(){this._references=[]},e.prototype.getEntry=function(n){return t.getEntry(this._references,n)},e.prototype.getEntries=function(n){if(arguments.length===0){var i=[];return this._list.forEach(function(n){!n||i.push(n.model)}),i}return t.getEntries(this._references,n)},e.prototype.select=function(){for(var r,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];r=t.copy(this._selected);this._changeSelection(i,null)>0&&this.selected.raise({key:"selected",old:r,value:this._selected})},e.prototype.unselect=function(){for(var r,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];r=t.copy(this._selected);this._changeSelection(null,i)>0&&this.selected.raise({key:"selected",old:r,value:this._selected})},e.prototype.changeSelection=function(n,i,r){r===void 0&&(r=!1);r&&this.clearSelection();var u=t.copy(this._selected);this._changeSelection(n,i)>0&&this.selected.raise({key:"selected",old:u,value:this._selected})},e.prototype.clearSelection=function(){var n=t.copy(this._selected);this._changeSelection(null,n)>0&&this.selected.raise({key:"selected",old:n,value:this._selected})},e.prototype.isSelected=function(n){return t.indexOf(this._selected,n)>=0},e.prototype.setTilesView=function(n){var t=n?"ali-controls-tiles":"ali-controls-list";this.styleRef([t],["ali-controls-list","ali-controls-tiles"])},e.prototype.remove=function(n){var r=this,t,i;if(n<0||n>=this._list.length){this.isEmpty();return}t=[];i=[];this._list.forEach(function(u,f){if(n===f){i.push(u.model);u.element.outerHTML="";return}if(t.push(u),!(n>f)){u.index--;r.onItemIndexChanged(u,u.index+1)}});this.changeSelection(null,i);this._list=t;this.isEmpty()},e.prototype.procExtender=function(n,t,i){i===void 0&&(i=!1);var r=this.getExtender(n);return r?r.model(this,t):i===!0?{}:null},e.prototype.getExtender=function(n){if(!n)return null;var t=null;return this._extenders.some(function(i){return i.name!==n?!1:(t=i,!0)}),t},e.prototype.addExtender=function(n){var i=this,r;n&&(r=t.toArray(n),r.forEach(function(n){n&&n.name&&(i.removeExtender(n.name),i._extenders.push(n))}))},e.prototype.removeExtender=function(n){if(n){var t=[];this._extenders.forEach(function(i){i&&i.name!==n&&t.push(i)});this._extenders=t}},e.prototype.clearExtenders=function(){this._extenders=[]},e.prototype.push=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.pushRange(t)},e.prototype.pushRange=function(n){var r=this,i;if(!n)return this.isEmpty(),[];if(t.isArray(n)||(n=n.list||n.arr),!n)return this.isEmpty(),[];if(i=[],n.forEach(function(n){r._push(n)&&i.push(n)}),this.refreshHeaders(),i.length==0)return[];if(!!this.viewModel&&!!this.viewModel.onEntriesPushed)this.viewModel.onEntriesPushed(this,i);return!this.entriesPushed||this.entriesPushed.raise(i),this.isEmpty(),i},e.prototype.pushResource=function(n){for(var e,r,u=this,f=[],i=1;i<arguments.length;i++)f[i-1]=arguments[i];return f?(e=[],r=[],f.forEach(function(i){var f,e,o;if(i){if(i instanceof Array){f=u.pushRange(i);!f||f.forEach(function(n){r.push(n)});return}(u.addReference(i),e=!n?i.list||i.arr:i[n],t.isArray(e))&&(o=u.pushRange(e),!o||o.forEach(function(n){r.push(n)}))}}),r):(this.isEmpty(),[])},e.prototype.pushFromWeb=function(t,i,r,u){var e=this,f;return u===void 0&&(u=!1),f=n.Web.resolve(t,i,r),f.then(function(n){u&&e.clear();e.push(n.result)}),f},e.prototype.pushRangeFromWeb=function(t,i,r,u){var e=this,f;return u===void 0&&(u=!1),f=n.Web.resolve(t,i,r),f.then(function(n){u&&e.clear();e.pushRange(n.result)}),f},e.prototype.pushResourceFromWeb=function(t,i,r,u,f){var o=this,e;return f===void 0&&(f=!1),e=n.Web.resolve(t,i,u),e.then(function(n){f&&o.clear();o.pushResource(r,n.result)}),e},e.prototype.refresh=function(){var n=this;this._listEle&&(this._listEle.innerHTML="",this._eleCount=0,this._list.forEach(function(t){if(t!=null){var i=document.createElement("li");i.className="ali-container-main";i.id=n._listEle.id+"_"+(new Date).getMinutes().toString()+"i"+n._eleCount;t.element=i;n._eleCount++;n._listEle.appendChild(t.element);n.renderItem(t.copy());n.isVisible(t.model)||(t.element.style.display="none")}}),this.refreshHeaders(),this.isEmpty())},e.prototype.loadOptions=function(t){var i=r.prototype.loadOptions.call(this,t),u;return i?(i.itemTemplateEngine&&(this._itemTemplG=i.itemTemplateEngine),i.headerTemplateEngine&&(this._headerTemplG=i.headerTemplateEngine),this.viewModel=new h({areInSameGroup:i.areInSameGroup,areSame:i.areSame,convert:i.convert,getGroupModel:i.getGroupModel,isBefore:i.isBefore,isDeleted:i.isDeleted,isVisible:i.isVisible,mergeChanging:i.mergeChanging,valid:i.valid}),i.tilesView!=null&&this.setTilesView(i.tilesView),i.selectionMode!=null&&(this.selectionMode=i.selectionMode),i.ignoreParts||(this.setItemTemplate("initpart",null),this.setHeaderTemplate("initpart",null),this.setEmptyMessageTemplate("initpart",null)),i.emptyMessageTemplateEngine&&!this._empty&&(this._empty=new n.Common.BindingControl(this.getId()+"_empty"),this._empty.addStyleRef("ali-container-empty"),this._empty.templateEngine(i.emptyMessageTemplateEngine)),i.emptyMessageViewModel!=null&&this.emptyMessageViewModel(i.emptyMessageViewModel),i.emptyMessageTemplate&&this.setEmptyMessageTemplate(i.emptyMessageTemplateType,i.emptyMessageTemplate),this.setItemTemplate(i.itemTemplateType,i.itemTemplate),this.setHeaderTemplate(i.headerTemplateType,i.headerTemplate),i.renderItem&&(this.viewModel||(this.viewModel={}),this.viewModel.renderItem=i.renderItem),i.renderGroupTitle&&(this.viewModel||(this.viewModel={}),this.viewModel.renderGroupTitle=i.renderGroupTitle),this.addExtender(i.extender),i.webData&&(u=typeof i.webData=="function"?i.webData.call(i):i.webData,this.pushResourceFromWeb(u.subject,u.key,u.propertyKey,u.parameters,u.clearBefore)),i):null},e.prototype.setItemTemplate=function(n,t){if(n!=null||t!=null){if(n==="part"||n==="initpart"){if(t=this.templatePart(t?t:"item"),n==="initpart"&&!t)return;n=""}this._itemTemplT=n||"static";this._itemTemplV=t;this.refresh()}},e.prototype.clearItemTemplate=function(){this._itemTemplT=null;this._itemTemplV=null;this.refresh()},e.prototype.setHeaderTemplate=function(n,t){if(n!=null||t!=null){if(n==="part"||n==="initpart"){if(t=this.templatePart(!t?"header":t),n==="initpart"&&!t)return;n=""}this._headerTemplT=!n?"static":n;this._headerTemplV=t;this.refresh()}},e.prototype.clearHeaderTemplate=function(){this._headerTemplT=null;this._headerTemplV=null;this.refresh()},e.prototype.setEmptyMessageTemplate=function(t,i,r){if(r===void 0&&(r=null),t!=null||i!=null){if(this._empty||(this._empty=new n.Common.BindingControl(this.getId()+"_empty"),this._empty.addStyleRef("ali-container-empty")),t==="part"||t==="initpart"){if(i=this.templatePart(!i?"empty":i),t==="initpart"&&!i)return;t=""}this._empty.setTemplate(t,i);arguments.length>2&&this._empty.viewModel(r)}},e.prototype.emptyMessageViewModel=function(n){return this._empty?(arguments.length>0&&this._empty.viewModel(n),this._empty.viewModel()):null},e.prototype.refreshHeaders=function(){var t=this;this.clearHeaders();var i=null,u=0,r=0;return this._list.forEach(function(f){var c,e,s,h,o;if(f!=null&&(c=!i||!t.areInSameGroup(i.model,f.model),i=f,c)){e=document.createElement("li");e.id=t._listEle.id+"_"+(new Date).getMinutes().toString()+"g"+t._eleCount;t._eleCount++;e.className="ali-container-group-title";t._listEle.insertBefore(e,f.element);s={element:e,firstItem:f,model:null};h=t.getGroupModel(s);s.model=h;try{!t._headerTemplT||!t._headerTemplV||(o=new n.Common.BindingControl(e.id),o.templateEngine(t._headerTemplG),o.viewModel(h),o.info(s),o.setTemplate(t._headerTemplT,t._headerTemplV));t.renderGroupTitle({element:e,firstItem:f,model:h})}catch(l){r++;e.outerHTML=""}u++}}),r>0&&n.Diagnostics.warn("CoreLibrary","[0x02072302] Failed to render group title in list control for "+r.toString()+" times."),u},e.prototype.clearHeaders=function(){var n=this.getGroupHeadersElements();n&&n.forEach(function(n){n.outerHTML=""})},e.prototype.getChildrenElements=function(){for(var n,i=[],r=this._listEle.children,t=0;t<r.length;t++)(n=r[t],n)&&(n.className&&n.className!=""&&n.className.indexOf("ali-container-group-title")>=0||i.push(n));return i},e.prototype.getGroupHeadersElements=function(){for(var n,i=[],r=this._listEle.children,t=0;t<r.length;t++)(n=r[t],n)&&(!n.className||n.className==""||n.className.indexOf("ali-container-group-title")<0||i.push(n));return i},e.prototype.clear=function(){this._listEle.innerHTML="";this._list=[];this._selected=[];var n=this.getChildElement(!0,"empty");n&&(n.style.display="")},e.prototype.copyEntries=function(){var n=[];return this._list.forEach(function(t){t&&n.push(t.model)}),n},e.prototype.forEachItem=function(n){var t=0;return this._list.forEach(function(i,r,u){i&&(t++,n&&n(i.copy(),r,u))}),t},e.prototype.itemIndexOf=function(n,t,i){var u=this,r;return this._list.some(function(i){if(!i||!i.model)return!1;if(t!=null){var f=t;if(!f.call(u,i.model,n))return!1}else if(i.model!==n)return!1;return r=i,!0}),!i||i(r),!r?-1:r.index},e.prototype.firstItem=function(n){var t=null;return this._list.some(function(i,r,u){return!i||!!n&&!n(i.copy(),r,u)?!1:(t=i.copy(),!0)}),t},e.prototype.renderItem=function(n){if(!!this.viewModel&&!!this.viewModel.renderItem)return this.viewModel.renderItem(this,n)},e.prototype.renderGroupTitle=function(n){if(!!this.viewModel&&!!this.viewModel.renderGroupTitle)return this.viewModel.renderGroupTitle(this,n)},e.prototype.onItemChanged=function(n,t){if(!!this.viewModel&&!!this.viewModel.onItemChanged)return this.viewModel.onItemChanged(this,n,t)},e.prototype.onItemIndexChanged=function(n,t){if(!!this.viewModel&&!!this.viewModel.onItemIndexChanged)return this.viewModel.onItemIndexChanged(this,n,t)},e.prototype.containsItem=function(n){return!!this.viewModel&&!!this.viewModel.containsItem?this.viewModel.containsItem(this,n):-1},e.prototype.shouldBeBefore=function(n,t){return!!this.viewModel&&!!this.viewModel.shouldBeBefore?this.viewModel.shouldBeBefore(this,n,t):!1},e.prototype.areInSameGroup=function(n,t){return!!this.viewModel&&!!this.viewModel.areInSameGroup?this.viewModel.areInSameGroup(this,n,t):!0},e.prototype.getGroupModel=function(n){return!!this.viewModel&&!!this.viewModel.getGroupModel?this.viewModel.getGroupModel(this,n):null},e.prototype.isVisible=function(n){return!!this.viewModel&&!!this.viewModel.isVisible?this.viewModel.isVisible(this,n):!0},e.prototype.isDeleted=function(n){return!!this.viewModel&&!!this.viewModel.isDeleted?this.viewModel.isDeleted(this,n):!1},e.prototype.mergeChanging=function(n,t){return!!this.viewModel&&!!this.viewModel.mergeChanging?this.viewModel.mergeChanging(this,n,t):n},e.prototype.valid=function(n){return!!this.viewModel&&!!this.viewModel.valid?this.viewModel.valid(this,n):!0},e.prototype._changeSelection=function(i,r){var e=this,f=0,u;return!r||(r.forEach(function(t){e.itemIndexOf(t,null,function(t){t&&n.Elements.changeStyleRef(t.element,[],["ali-state-active-t"])})}),f+=r.length,t.remove(this._selected,r,!0)),!i||(u=[],i.forEach(function(t){e.itemIndexOf(t,null,function(i){i&&(n.Elements.changeStyleRef(i.element,["ali-state-active-t"]),u.push(t))})}),f+=u.length,t.pushRange(this._selected,u)),f},e.prototype._push=function(n){if(!n||!this.valid(n))return!1;var i=this.isDeleted(n),t=this.containsItem(n);return i?(this.remove(t),!0):t>=0?(this._update(n,t),!0):(this._insert(n),!0)},e.prototype._changeElementSelection=function(n){var i,r;if(!n||!n.element||!n.model)return!1;switch(this.selectionMode){case u.None:return this.clearSelection(),!1;case u.Single:return i=t.copy(this._selected),this._changeSelection([n.model],i)>0&&this.selected.raise({key:"selected",old:i,value:this._selected}),!0;case u.Multiple:return(r=this.isSelected(n.model),r)?(this.changeSelection(null,[n.model]),!1):(this.changeSelection([n.model],null),!1)}},e.prototype._insert=function(t){for(var s,r,i,l,e=this,h=[],o=!1,c=!1,u=0;u<this._list.length;u++){if(o||(s=this.shouldBeBefore(t,this._list[u].model),(c&&!s||!c&&s)&&(r=document.createElement("li"),r.className="ali-container-main",r.id=this._listEle.id+"_"+(new Date).getMinutes().toString()+"i"+this._eleCount,this._eleCount++,i=new f,i.element=r,i.model=t,i.index=u,n.Elements.listen(r,"click",function(){e._changeElementSelection(i)}),i.converted=!this.viewModel||!this.viewModel.convert?null:this.viewModel.convert(this,t),i.extenders=function(n){return e.procExtender(n,i.copy())},u>=this._list.length?this._listEle.appendChild(i.element):this._listEle.insertBefore(i.element,this._list[u].element),o=!0,l=this._getItemControl(i),this.renderItem(i.copy()),this._extenders.forEach(function(n){!n||!n.load||n.load(e,i.copy())}),h.push(i),this.isVisible(i.model)||(i.element.style.display="none"))),c=s,o){this._list[u].index++;this.onItemIndexChanged(this._list[u].copy(),this._list[u].index+1)}h.push(this._list[u])}if(!o){r=document.createElement("li");r.className="ali-container-main";r.id=this._listEle.id+"_"+(new Date).getMinutes().toString()+"i"+this._eleCount;this._eleCount++;i=new f;i.element=r;i.model=t;i.index=this._list.length;n.Elements.listen(r,"click",function(){e._changeElementSelection(i)});i.converted=!this.viewModel||!this.viewModel.convert?t:this.viewModel.convert(this,t);i.extenders=function(n){return e.procExtender(n,i.copy())};this._listEle.appendChild(r);l=this._getItemControl(i);this.renderItem(i.copy());this._extenders.forEach(function(n){!n||!n.load||n.load(e,i.copy())});this._list.push(i);this.isVisible(i.model)||(i.element.style.display="none");return}this._list=h},e.prototype._getItemControl=function(t){if(!this._itemTemplT||!this._itemTemplV)return null;var i=new n.Common.BindingControl(t.element);return i.templateEngine(this._itemTemplG),i.viewModel(t.model),i.info(t),i.convertor(function(){return t.converted}),i.setTemplate(this._itemTemplT,this._itemTemplV),t.notify.add(function(){i.viewModel(t.model);i.info(t);i.updateConverted();t.converted=i.converted()}),i},e.prototype._update=function(n,t){var r=this._list[t],a=r.copy(),s=this.mergeChanging(n,r.copy()),o,l,e,u,i;if(s){var f=t,h=t,c=t;if(t<this._list.length-1)for(i=t+1;i<this._list.length;i++)if(o=this.shouldBeBefore(s,this._list[i].model),o||!(t<this._list.length-1)){t==this._list.length-1?this._listEle.appendChild(r.element):this._listEle.insertBefore(r.element,this._list[i].element);f=i-1;c=f;break}if(t>0&&c<=h)for(i=t-1;i>=0;i--)if(o=this.shouldBeBefore(s,this._list[i].model),!o||!(i>0)){if(!o&&i===t+1)break;f=o&&i==0?0:i+1;l=this._list[f].element;r.element!=l&&r.element.id!=l.id&&this._listEle.insertBefore(r.element,l);h=f;break}if(r.index=f,e=[],t!==f){for(i=0;i<h;i++)e.push(this._list[i]);if(t>f){this.onItemIndexChanged(r.copy(),t);for(e.push(r),i=h;i<c;i++){u=this._list[i];u.index++;this.onItemIndexChanged(u.copy(),u.index-1);e.push(u)}}else if(t<f){for(i=h+1;i<=c;i++){u=this._list[i];u.index--;this.onItemIndexChanged(u.copy(),u.index+1);e.push(u)}this.onItemIndexChanged(r.copy(),t);e.push(r)}for(i=c+1;i<this._list.length;i++)e.push(this._list[i]);r.model=s;r.notify.raise({key:"update",value:"Entry updated with new position."});this.onItemChanged(r.copy(),a);this._list=e}else{r.model=s;r.notify.raise({key:"update",value:"Entry updated."});this.onItemChanged(r.copy(),a)}r.element.style.display=this.isVisible(r.model)?"":"none"}},e}(n.Common.VisualControl);t.ListControl=o;s=function(t){function i(n){var i=t.call(this,n)||this;return i._sidebar=[],i._counter=0,i.getElement().innerHTML="",i.addStyleRef("ali-controls-flow-single"),i._renderLayoutTable(),i}return __extends(i,t),i.prototype.getContent=function(){return this._content},i.prototype.setContent=function(n){n&&(this._content=n(this._contentId))},i.prototype.addSidePanel=function(t){var r,i,f,u;return!t||!this._sideBarId?null:(r=n.Elements.getById(this._sideBarId),!r)?null:(i=document.createElement("div"),f=new Date,this._counter++,i.id=r.id+"_i"+this._counter.toString()+"t"+f.getSeconds().toString()+"0"+f.getMilliseconds(),i.className="ali-container-main",r.appendChild(i),u=t(i.id),!u)?(i.outerHTML="",null):(this._sidebar.push(u),u)},i.prototype.getSidePanel=function(n){return n<0||n>this._sidebar.length?null:this._sidebar[n]},i.prototype._renderLayoutTable=function(){var t,e,i,r,u,f;n.Diagnostics.info("CoreLibrary","[0x02210101] Render single flow panel.");t=document.createElement("tr");t.id=this.getId()+"_table_b_r0";e=document.createElement("tbody");e.appendChild(t);i=document.createElement("table");i.id=this.getId()+"_table";i.className="ali-layout-t-grid ali-layout-s-tile";i.cellPadding="0";i.cellSpacing="0";i.appendChild(e);this.appendElement(i);r=document.createElement("td");r.id=t.id+"_c0";r.className="ali-container-main";u=document.createElement("div");u.id=r.id+"_cnt";u.className="ali-container-main";t.appendChild(r);r.appendChild(u);this._contentId=u.id;f=document.createElement("td");f.id=t.id+"_c1";f.className="ali-container-side";t.appendChild(f);this._sideBarId=f.id},i}(n.Common.VisualControl);t.SingleFlowControl=s;a=function(){function n(n,t){this._arr=[];this._split="/";!t||(this._split=t);this.pushString(n)}return n.prototype.pushString=function(n){var i,t,r,u;if(n)for(i=n.split(this._split),t=0;t<i.length;t+=2)r=i[t],u=t+1<i.length?i[t+1]:null,this._arr.push({key:r,value:u})},n.prototype.remove=function(){this._arr.length>0&&this._arr.pop()},n.prototype.item=function(n,t){if(n>this._arr.length||n<0)return null;if(arguments.length>1){if(!t)return;n===this._arr.length?this._arr.push(t):this._arr[n]=t}else if(n===this._arr.length)return null;return this._arr[n]},n.prototype.length=function(){return this._arr.length},n.prototype.toParameterString=function(){var n=this,t="";return this._arr.forEach(function(i){t+=i.key+n._split+i.value+n._split}),t},n}();t.ResourcePath=a;h=function(){function n(n){this._settings=n?n:{}}return n.prototype.isVisible=function(n,t){return!this._settings.isVisible?!0:this._settings.isVisible(t)},n.prototype.shouldBeBefore=function(n,t,i){var r,u;return this._settings.isBefore?this._settings.isBefore===!0?!0:this._settings.isBefore===""?t==i||!!t&&t>i:this._settings.isBefore==="!"?t==i||!!i&&i>t:typeof this._settings.isBefore=="string"?(r=this._settings.isBefore,t[r]==null&&i[r]==null)?!1:(u=!1,r.indexOf("!")===0?(u=!0,r=r.substring(1)):r.indexOf(" ")===0&&(r=r.substring(1)),t[r]==null)?u:i[r]==null?!u:u?t[r]>=i[r]:t[r]<=i[r]:this._settings.isBefore(t,i):!1},n.prototype.areInSameGroup=function(n,t,i){return!this._settings.areInSameGroup?!0:this._settings.areInSameGroup(t,i)},n.prototype.containsItem=function(n,t){var i=this,u,r;return this._settings.areSame?(u=this._settings.areSame,r=typeof this._settings.areSame=="string"?function(n,t){return!!n&&n[i._settings.areSame]==t[i._settings.areSame]}:function(n,t){return i._settings.areSame(n,t)},n.itemIndexOf(t,r)):n.itemIndexOf(t)},n.prototype.mergeChanging=function(n,t,i){return!this._settings.mergeChanging?t:this._settings.mergeChanging(t,i)},n.prototype.isDeleted=function(n,t){return!this._settings.isDeleted?!1:this._settings.isDeleted(t)},n.prototype.getGroupModel=function(n,t){return!this._settings.getGroupModel?null:this._settings.getGroupModel(t)},n.prototype.valid=function(n,t){return!this._settings.valid?!0:this._settings.valid(t)},n.prototype.convert=function(n,t){return!this._settings.convert?null:this._settings.convert(t)},n}();t.ConfigurableListViewModel=h;c=function(t){function r(r){var u=t.call(this,r)||this;return u._index=0,u._around=3,u.viewModelChanged=new i,u.indexChanged=new i,u.totalChanged=new i,u.aroundCountChanged=new i,u.info=n.Common.bindingObj(),u.addStyleRef("ali-controls-paging"),u._selector=u.appendElement("ul"),u._selector.id=u.getId()+"_sel",u._selector.className="ali-container-main",u._infoEle=u.appendElement("div"),u._infoEle.id=u.getId()+"_info",u._infoEle.className="ali-container-main",u._infoEle.style.display="none",u}return __extends(r,t),r.prototype.viewModel=function(n){if(arguments.length>0&&this._viewModel!==n){var t=this._viewModel;this._viewModel=n;this._refreshSelector();this.viewModelChanged.raise({key:"viewModel",value:this._viewModel,old:t})}return this._viewModel},r.prototype.loadOptions=function(n){var i=t.prototype.loadOptions.call(this,n);return i?(i.ignoreParts||(this.setEllipsisTemplate("initpart",null),this.setFunctionTemplate("initpart",null),this.setInfoTemplate("initpart",null),this.setSelectorTemplate("initpart",null)),this.setEllipsisTemplate(i.ellipsisTemplateType,i.ellipsisTemplate),this.setFunctionTemplate(i.functionTemplateType,i.functionTemplate),this.setInfoTemplate(i.infoTemplateType,i.infoTemplate),this.setSelectorTemplate(i.selectorTemplateType,i.selectorTemplate),i):null},r.prototype.total=function(n){if(arguments.length>0&&this._total!==n){var t=this._total;this._total=n;this._refreshSelector();this.totalChanged.raise({key:"total",value:this._total,old:t})}return this._total},r.prototype.index=function(n,t){if(arguments.length>0&&this._index!==n){var i=this._index;this._index=n;this._refreshSelector();t==null&&(t=!0);!t||!this._viewModel||!this._viewModel.turnTo||this._viewModel.turnTo(this,this._index);this.indexChanged.raise({key:"index",value:this._index,old:i,raise:t})}return this._index},r.prototype.aroundCount=function(n){if(arguments.length>0&&this._around!==n){var t=this._around;(n==null||n<0)&&(n=0);this._around=n;this._refreshSelector();this.aroundCountChanged.raise({key:"aroundCount",value:this._around,old:t})}return this._index},r.prototype.getPageModel=function(n){return!this._viewModel||!this._viewModel.getModel?null:this._viewModel.getModel(this,n)},r.prototype.getPageInfo=function(n){var t=this,i=this._getPageInfo(n);return i.turnTo=function(){t.index(n)},i.getModel=function(){return!t._viewModel||!t._viewModel.getModel?null:t._viewModel.getModel(t,n)},i.isCurrent=function(){return t._index===n},i},r.prototype.refresh=function(){this._refreshSelector()},r.prototype.setSelectorTemplate=function(n,t){if(n!=null||t!=null){if(n==="part"||n==="initpart"){if(t=this.templatePart(!t?"selector":t),n==="initpart"&&!t)return;n=""}this._selectorTemplT=n;this._selectorTemplV=t;this._refreshSelector()}},r.prototype.setEllipsisTemplate=function(n,t){if(n!=null||t!=null){if(n==="part"||n==="initpart"){if(t=this.templatePart(!t?"ellipsis":t),n==="initpart"&&!t)return;n=""}this._ellipsisTemplT=n;this._ellipsisTemplV=t;this._refreshSelector()}},r.prototype.setFunctionTemplate=function(n,t){if(n!=null||t!=null){if(n==="part"||n==="initpart"){if(t=this.templatePart(!t?"function":t),n==="initpart"&&!t)return;n=""}this._funcTemplT=n;this._funcTemplV=t;this._refreshSelector()}},r.prototype.setInfoTemplate=function(t,i){if(t!=null||i!=null){if(t==="part"||t==="initpart"){if(i=this.templatePart(!i?"info":i),t==="initpart"&&!i)return;t=""}if(this._infoTemplT=t,this._infoTemplV=i,!this._bindingControl){var r=this.getChildElement(!0,"_info");r.style.display="";this._bindingControl=new n.Common.BindingControl(r.id);this._bindingControl.viewModel(this.info)}this._bindingControl.setTemplate(t,i)}},r.prototype.isValidIndex=function(n){return n!=null&&typeof n=="number"&&n>=0&&(this._total==null||n<this._total)},r.prototype.turnTo=function(n){if(n==null)return this._index;if(typeof n=="number")return this.index(n);n=this._formatKey(n.toString());var t=this.index();switch(n){case"first":t>0&&this.index(0);break;case"previous":t>0&&this.index(t-1);break;case"next":(this._total==null||t<this._total)&&this.index(t+1);break;case"last":this._total!=null&&t<this._total&&this.index(this._total);break;case"refresh":this.refresh()}return this._index},r.prototype._formatKey=function(n){if(n==null)return null;switch(n.toString().toLowerCase()){case"fir":case"first":case"1st":case"1":return"first";case"pre":case"prev":case"previous":return"previous";case"nex":case"nxt":case"next":return"next";case"las":case"lst":case"last":return"last";case"rfr":case"refresh":case"reload":return"refresh";default:return null}},r.prototype._getPageInfo=function(n){var t=this;return{index:n,total:this._total,current:function(){return t._index},turnTo:function(){t.index(n)}}},r.prototype._refreshSelector=function(){var i,t,r,u,n;for(this._selector.innerHTML="",this._selector.style.display=this._total===1?"none":"",i=0,this._index>0&&this._generateFuncPart("previous",this._selector),i>=this._index&&(i=this._index-1),t=(this._total!=null?this._total:0)-1,n=0;n<=i;n++)this._generatePageSelector(n,this._selector);for(r=this._index-this._around,i>=r&&(r=i+1),i<r-1&&this._generateEllipsis(this._selector,"left"),n=r;n<this._index;n++)this._generatePageSelector(n,this._selector);if(this._generatePageSelector(this._index,this._selector,!0),u=this._index+this._around,t>=0)for(t<=u&&(u=t-1),n=this._index+1;n<=u;n++)this._generatePageSelector(n,this._selector);(t<0||t>u+1)&&this._generateEllipsis(this._selector,"right");t>0&&t!==this._index&&this._generatePageSelector(t,this._selector);(t<0||t>this._index)&&this._generateFuncPart("next",this._selector)},r.prototype._generateEllipsis=function(t,i){var e=this,r=document.createElement("li"),u,f;return r.id=t.id+"_"+i,r.innerHTML='<span id="'+r.id+'_link" class="ali-container-main">...<\/span>',t.appendChild(r),this._ellipsisTemplV&&this._ellipsisTemplV!=""&&(n.Elements.getById(r.id,"_link").style.display="none",u=document.createElement("div"),u.id=r.id+"_container",u.className="ali-container-main",t.appendChild(u),f=new n.Common.BindingControl(u.id),f.viewModel({part:i}),f.info({part:i,current:function(){return e._index},total:function(){return e._total}}),f.setTemplate(this._ellipsisTemplT,this._ellipsisTemplV)),r},r.prototype._generateFuncPart=function(t,i){var e=this,u,r,f,o;if(t=this._formatKey(t),!t)return null;u=document.createElement("li");u.id=i.id+"_f_"+t;i.appendChild(u);r=document.createElement("a");r.id=u.id+"_link";r.className="ali-container-main";switch(t){case"first":r.innerHTML="1";break;case"previous":r.innerHTML="&lt;";break;case"next":r.innerHTML="&gt;";break;case"last":r.innerHTML=n.Res.builtIn().localString("last");break;case"refresh":r.innerHTML=n.Res.builtIn().localString("refresh")}return r.href="#",r.onclick=function(){return e.turnTo(t),!1},u.appendChild(r),!this._funcTemplV||this._funcTemplV==""||(r.style.display="none",f=document.createElement("div"),f.id=u.id+"_container",f.className="ali-container-main",i.appendChild(f),o=new n.Common.BindingControl(f.id),o.viewModel({key:t}),o.info({key:t,turnTo:function(){e.turnTo(t)},current:function(){return e._index},total:function(){return e._total}}),o.setTemplate(this._funcTemplT,this._funcTemplV)),u},r.prototype._generatePageSelector=function(t,i,r){var c=this,h,u,f,e,o,s;return(r===void 0&&(r=!1),!this.isValidIndex(t))?null:(h=this.getPageInfo(t),u=document.createElement("li"),u.id=i.id+"_i"+t.toString(),r&&(u.className="ali-state-active-t"),i.appendChild(u),f=document.createElement("a"),f.id=u.id+"_link",f.className="ali-container-main",f.innerHTML=(t+1).toString(),f.href="#",f.onclick=function(){return c.index(t),!1},u.appendChild(f),!this._selectorTemplV||this._selectorTemplV==""||(f.style.display="none",e=document.createElement("div"),e.id=u.id+"_container",e.className="ali-container-main",i.appendChild(e),o=new n.Common.BindingControl(e.id),s=null,!this._viewModel||!this._viewModel.getModel||(s=this._viewModel.getModel(this,t)),o.viewModel(s),o.info(h),o.setTemplate(this._selectorTemplT,this._selectorTemplV)),u)},r}(n.Common.VisualControl);t.PagingControl=c;v=function(){function n(){this._col=[];this._index=-1;this.switched=new t.EventHandlers}return n.prototype.add=function(n,t){return(t===void 0&&(t=!1),!n)?null:(this._col.push(n),!n.onload||n.onload(),t!==!0&&this.turnTo(this._col.length-1),n)},n.prototype.getIndex=function(n){return(n==null&&(n=this._index),typeof n=="number")?n>=0&&n<this._col.length?n:-1:t.indexOf(this._col,n)},n.prototype.getItem=function(n){var t=this.getIndex(n);return t<0||t>=this._col.length?null:this._col[t]},n.prototype.remove=function(n,i){var r=this.getIndex(n),u;if(!(r<0)&&(u=this.getItem(r),u)){if(u.oninactive&&u.oninactive(),t.remove(this._col,[u],!0),this._index=r>=this._col.length?this._col.length-1:r,this._col.length===0){this.switched.raise(null);return}i===!0?this.turnTo(r>=this._col.length?this._col.length-1:r):(this._index=0,this.switched.raise(null))}},n.prototype.clear=function(){var n=this;this._col.forEach(function(t,i){t&&(i!==n._index||!t.oninactive||t.oninactive(),!t.onclose||t.onclose())});this._col=[];this._index=-1;this.switched.raise(null)},n.prototype.turnTo=function(n){var i=this.getIndex(n),t;return i<0?null:(t=this._turnTo(i),!t||this.switched.raise(t),t)},n.prototype._turnTo=function(n){var t=this.getItem(n),i;return t?(i=this.getItem(this._index),!!i&&i.oninactive&&i.oninactive(),this._index=n,!t.onactive||t.onactive(),t):null},n}();t.ActiveItemMonitor=v;l=function(i){function r(r){var u=i.call(this,r)||this;return u._count=0,u._col=[],u._index=n.Common.bindingObj(0),u.switched=new t.EventHandlers,u.tabButton=!0,u.backToFirst=!1,u.addStyleRef("ali-controls-switch"),u._tabs=u.appendElement("ul"),u._tabs.id=u.getId()+"_tabs",u._tabs.className="ali-container-collection-tabs",u}return __extends(r,i),r.prototype.setTabTemplate=function(n,t){if(n!=null||t!=null){if(n==="part"||n==="initpart"){if(t=this.templatePart(!t?"tab":t),n==="initpart"&&!t)return;n=""}this._tabTempT=!n?"static":n;this._tabTempV=t}},r.prototype.clearTabTemplate=function(){this._tabTempT=null;this._tabTempV=null},r.prototype.add=function(t,i,r){var h=this,u,f,s;this._count>=Number.MAX_VALUE&&(this._count=0);r||(r={});this._count++;var c=new Date,e=this._count.toString()+"t"+c.getSeconds().toString()+c.getMilliseconds().toString(),o=this.appendElement("div","c"+e);return t&&t(o),u=n.Common.getControl(o),u||(u=new n.Common.VisualControl(o)),n.Elements.changeStyleRef(o,"ali-state-active-f","ali-state-active-t"),o.style.display="none",f=document.createElement("li"),f.id=this.getId()+"_t"+e,f.className="ali-container-main",n.Elements.listen(f,"click",function(){h.tabButton&&h.turnTo(u)}),this._tabs.appendChild(f),s=n.Common.bindingControl(f,{templateEngine:this._tabTempG,template:this._tabTempV,templateType:this._tabTempT,viewModel:i,styleRef:"ali-controls-switch-tabs-item"}),s.info({control:u,model:i,key:e,index:this._col.length,options:r}),this._col.push({control:u,model:i,key:e,index:this._col.length,options:r,tab:s}),!r.loaded||r.loaded({control:u,model:i,key:e,index:this._col.length,options:r,tab:s}),r.background!==!0&&this.turnTo(this._col.length-1),u},r.prototype.getIndex=function(n){if(n==null&&(n=this._index()),typeof n=="number")return n<0||n>=this._col.length?-1:n;var t=typeof n=="string"?n:n.getId(),i=-1;return this._col.some(function(n,r){return!n||!n.control||n.control.getId()!==t&&n.key!==t?!1:(i=r,!0)}),i},r.prototype.getControl=function(n){var t=this.getItem(n);return!t?null:t.control},r.prototype.getItemModel=function(n){var t=this.getItem(n);return!t?null:t.model},r.prototype.getItem=function(n){var i=this.getIndex(n),t;return i<0||i>=this._col.length?null:(t=this._col[i],!t?null:{key:t.key,control:t.control,model:t.model,index:i,options:t.options,tab:t.tab})},r.prototype.getTabsSize=function(){return n.Elements.getSize(this._tabs)},r.prototype.turnTo=function(n){var u=this,e=this.getItem(),t,i,f,r;return n==null?null:typeof n=="number"?(t=this._turnTo(n),!t?null:t.control):(i=typeof n=="string"?n:n.getId(),r=-1,this._col.some(function(n,t){return(r++,!n||!n.control||n.control.getId()!==i&&n.key!==i)?!1:(u._turnTo(t),!0)}),f)},r.prototype.items=function(){var n=[];return this._col.forEach(function(t,i){t&&n.push({key:t.key,control:t.control,model:t.model,index:i,options:t.options,tab:t.tab})}),n},r.prototype.remove=function(n){var r=this.getIndex(n),t=this._col[r],u,f,e,i,o;if(t&&t.control&&(u=t.control.getId(),f=t.control.getElement(),f&&u)){if(e=[],this._col.forEach(function(n){n&&n.control&&n.control.getId()!==u&&e.push(n)}),this._col=e,f.outerHTML="",i=!t.tab?null:t.tab.getElement(),!i||!i.outerHTML||(i.outerHTML=""),this._col.length===0){this.switched.raise(null);return}o=this.backToFirst?0:r>=this._col.length?this._col.length-1:r;this.turnTo(o)}},r.prototype.clear=function(){this._col.forEach(function(n){if(n&&!n.control){var t=n.control.getElement();t&&(t.outerHTML="")}});this._index(-1);this._col=[];this.switched.raise(null)},r.prototype.hideAll=function(){var t=this;this._index(-1);this._col.forEach(function(i,r){var u,e,f,o;i&&i.control&&(u=i.control.getElement(),u)&&(n.Elements.changeStyleRef(u,"ali-state-active-f","ali-state-active-t"),u.style.display="none",e=t.getId()+"_t"+i.key,f=n.Elements.getById(e),f)&&(o=(" "+f.className+" ").indexOf("ali-state-active-t")>0,n.Elements.changeStyleRef(f,"ali-state-active-f","ali-state-active-t"),o&&!!i.options.hidden&&i.options.hidden({control:i.control,model:i.model,key:i.key,index:r,options:i.options,tab:i.tab}))})},r.prototype.loadOptions=function(n){var t=i.prototype.loadOptions.call(this,n);return t?(!t.tabTemplateEngine||(this._tabTempG=t.tabTemplateEngine),t.tabButton!=null&&(this.tabButton=t.tabButton),t.ignoreParts||this.setTabTemplate("initpart",null),this.setTabTemplate(t.tabTemplateType,t.tabTemplate),t):null},r.prototype._turnTo=function(t){var i,r,u,f;return t>=this._col.length?null:(this.hideAll(),t<0||t>=this._col.length)?null:(i=this._col[t],!i||!i.control)?null:(r=i.control.getElement(),!r)?null:(this._index(t),n.Elements.changeStyleRef(r,"ali-state-active-t","ali-state-active-f"),r.style.display="",u=this.getId()+"_t"+i.key,f=n.Elements.getById(u),n.Elements.changeStyleRef(f,"ali-state-active-t","ali-state-active-f"),!i.options.shown||i.options.shown({control:i.control,model:i.model,key:i.key,index:t,options:i.options,tab:i.tab}),this.switched.raise({key:i.key,control:i.control,model:i.model,index:t,options:i.options,tab:i.tab}),i)},r}(n.Common.VisualControl);t.SwitchControl=l;y=function(r){function u(n){var t=r.call(this,n)||this;return t._options={schema:null,values:null},t._references=[],t.renderingHeadCell=new i,t.renderingCell=new i,t.addStyleRef("ali-controls-table"),t.innerHTML('<table id="{{id()}}_table"><thead id="{{id()}}_table_head"><\/thead><tbody id="{{id()}}_table_body"><\/tbody><tfoot id="{{id()}}_table_foot"><\/tfoot><\/table><div id="" + eleId + "_empty" class="ali-container-empty" style="display: none; " ><\/div>'),t}return __extends(u,r),u.prototype.schema=function(n,t){t===void 0&&(t=!0);this._options.schema=n;t&&this._refresh()},u.prototype.headCell=function(n){return n==null?null:(typeof n=="function"&&(n=n()),typeof n=="string")?b(this._options.schema,n,"id"):typeof n=="number"?n<0?null:!this._options.schema||this._options.schema.length<=n?null:this._options.schema[n]:null},u.prototype.pushRange=function(n){var r=this,i;return n?(this._options.values||(this._options.values=[]),t.isArray(n)||(n=n.list||n.arr),!n)?(this.isEmpty(),[]):(i=[],n.forEach(function(n){n&&(r._options.values.push(n),i.push(n))}),this._refresh(),i.length==0)?[]:i:(this.isEmpty(),[])},u.prototype.pushResource=function(n){for(var e,r,u=this,f=[],i=1;i<arguments.length;i++)f[i-1]=arguments[i];return f?(e=[],r=[],f.forEach(function(i){var f,e,o;if(i){if(i instanceof Array){f=u.pushRange(i);!f||f.forEach(function(n){r.push(n)});return}(u.addReference(i),e=!n?i.list||i.arr:i[n],t.isArray(e))&&(o=u.pushRange(e),!o||o.forEach(function(n){r.push(n)}))}}),r):(this.isEmpty(),[])},u.prototype.pushRangeFromWeb=function(t,i,r,u){var e=this,f;return u===void 0&&(u=!1),f=n.Web.resolve(t,i,r),f.then(function(n){u&&e.clear();e.pushRange(n.result)}),f},u.prototype.pushResourceFromWeb=function(t,i,r,u,f,e){var o=this,s;return f===void 0&&(f=!1),s=n.Web.resolve(t,i,u),s.then(function(n){f&&o.clear();!e||o.schema(n.result[e]);o.pushResource(r,n.result)}),s},u.prototype.isEmpty=function(){var n=this.getChildElement(!0,"empty");return(this._options.values||(this._options.values=[]),this._options.values.length===0)?(!n||(n.style.display=""),!0):(!n||(n.style.display="none"),!1)},u.prototype.loadOptions=function(n){var t=r.prototype.loadOptions.call(this,n),i;return t?(!t.renderCell||this.renderingCell.add(t.renderCell),!t.renderHeadCell||this.renderingCell.add(t.renderHeadCell),t.ignoreParts||this.setCellTemplate("initpart",null),this.setCellTemplate(t.cellTemplateType,t.cellTemplate),this.cellConvertor=t.cellConvertor,t.ignoreParts||this.setHeadCellTemplate("initpart",null),this.setHeadCellTemplate(t.headCellTemplateType,t.headCellTemplate),this.headCellConvertor=t.headCellConvertor,!t.schema||this.schema(t.schema),t.emptyMessageViewModel!=null&&this.emptyMessageViewModel(t.emptyMessageViewModel),this.setEmptyMessageTemplate(t.emptyMessageTemplateType,t.emptyMessageTemplate),!t.emptyMessageTemplate||this.setEmptyMessageTemplate(t.emptyMessageTemplateType,t.emptyMessageTemplate),!t.webData||(i=typeof t.webData=="function"?t.webData.call(t):t.webData,this.pushResourceFromWeb(i.subject,i.key,i.propertyKey,i.parameters,i.clearBefore,i.schemaKey)),t):null},u.prototype.setCellTemplate=function(n,t){if(n!=null||t!=null){if(n==="part"||n==="initpart"){if(t=this.templatePart(!t?"cell":t),n==="initpart"&&!t)return;n=""}this._cellTemplate=t;this._cellTemplateType=n}},u.prototype.setHeadCellTemplate=function(n,t){if(n!=null||t!=null){if(n==="part"||n==="initpart"){if(t=this.templatePart(!t?"head":t),n==="initpart"&&!t)return;n=""}this._headCellTemplate=t;this._headCellTemplateType=n}},u.prototype.setEmptyMessageTemplate=function(t,i,r){if(r===void 0&&(r=null),t!=null||i!=null){if(this._empty||(this._empty=new n.Common.BindingControl(this.getId()+"_empty"),this._empty.addStyleRef("ali-container-empty")),t==="part"||t==="initpart"){if(i=this.templatePart(!i?"empty":i),t==="initpart"&&!i)return;t=""}this._empty.setTemplate(t,i);arguments.length>2&&this._empty.viewModel(r)}},u.prototype.emptyMessageViewModel=function(n){return this._empty?(arguments.length>0&&this._empty.viewModel(n),this._empty.viewModel()):null},u.prototype.refresh=function(){this._refresh()},u.prototype.addReference=function(){for(var r=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];i&&i.forEach(function(n){t.contains(r._references,n)||r._references.push(n)})},u.prototype.containReference=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return t.contains(this._references,i)},u.prototype.removeReference=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t.remove(this._references,i,!0)},u.prototype.clearReference=function(){this._references=[]},u.prototype.getEntry=function(n){return t.getEntry(this._references,n)},u.prototype.getEntries=function(n){return t.getEntries(this._references,n)},u.prototype._refresh=function(){var i=this,u,r,f,e,o,s;this._options&&this._options.schema&&this.parentElement()&&(u=this.getChildElement("table","head"),r=document.createElement("tr"),r.id=u.id+"_main",u.innerHTML="",u.appendChild(r),f=[],this._options.schema.forEach(function(t,u){var e,o,s;if(t&&(t.model||t.render)){f.push(t);e=document.createElement("th");e.id=r.id+"_c"+u.toString();r.appendChild(e);t.width&&(e.style.width=t.width.toString()+(typeof t.width=="string"?"":"px"));t.styleRef&&n.Elements.changeStyleRef(e,t.styleRef);o=null;typeof t.model=="string"?o=t.model.toString():t.model.name&&(typeof t.model.name=="string"||typeof t.model.name=="number")?o=t.model.name.toString():t.model.nickname&&(typeof t.model.nickname=="string"||typeof t.model.nickname=="number")?o=t.model.nickname.toString():t.model.title&&(typeof t.model.title=="string"||typeof t.model.title=="number")&&(o=t.model.title.toString());i._headCellTemplate?(e.innerHTML='<div id="'+e.id+'_container"><\/div>',s=new n.Common.BindingControl(e.id+"_container"),s.info({column:t,container:e}),s.viewModel(t.model),!i.headCellConvertor||s.setConvertor(i.headCellConvertor),s.setTemplate(i._headCellTemplateType,i._headCellTemplate)):e.innerHTML=o;i.renderingHeadCell&&i.renderingHeadCell.raise({column:t,container:e,text:o});t.render&&t.render({column:t,container:e});try{e._bindInfo=t}catch(h){}}}),e=this.getChildElement("table","body"),o=this._options.values,o&&o.forEach(function(r,u){var o=document.createElement("tr");o.id=e.id+"_r"+u.toString();e.appendChild(o);f.forEach(function(u,f){var s=document.createElement("td"),e,c,h;(s.id=o.id+"_c"+f.toString(),o.appendChild(s),e=t.cellInfo(r,u,s),c=null,e)&&(i._cellTemplate?(s.innerHTML='<div id="'+s.id+'_container"><\/div>',h=new n.Common.BindingControl(s.id+"_container"),h.info(e),h.viewModel(e.value),!i.cellConvertor||h.setConvertor(i.cellConvertor),h.setTemplate(i._cellTemplateType,i._cellTemplate)):e.value!=null&&(s.innerHTML=e.value.toString()),!i.renderingCell||i.renderingCell.raise(e),!u.valueRender||u.valueRender(e))})}),s=this.getChildElement("table","foot"),this.isEmpty())},u}(n.Common.VisualControl);t.TableControl=y;p=function(){function n(){this._list=[]}return n.prototype.push=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.pushRange(t)},n.prototype.pushRange=function(n){var i=this,t;return n?(t=[],n.forEach(function(n){n&&n.dispose&&(i._list.push(n),t.push(n))}),t):[]},n.prototype.dispose=function(){this._list.forEach(function(n){if(n&&n.dispose)try{n.dispose()}catch(t){}});this._list=[]},n}();t.DisposableArray=p;i=function(){function n(){this._count=0;this._list=[]}return n.prototype.add=function(n,t,i,r,u,f){var s=this,h,e,o;if(n)return h={handler:n,target:t,args:r,remove:u,start:this._count},e={added:new Date,hasAdded:!1,dispose:function(){s.remove(n)},raise:function(i){r?n.call(t,i,r):n.call(t,i)},count:function(){return s._count-h.start}},i&&i.push(e),o=function(){(e.added=new Date,e.hasAdded=!0,s._list.some(function(i){return i.handler!==n?!1:(i.target=t,!0)}))||s._list.push(h)},f==null||f===!1?o():f===!0?setTimeout(function(){o()},0):typeof f=="number"?setTimeout(function(){o()},f):setTimeout(function(){o()},0),e},n.prototype.addOnce=function(n,t,i,r,u){return this.add(n,t,i,r,function(n,t,i){return i>0},u)},n.prototype.raise=function(n,t,i){var r=this,u;t===void 0&&(t=!1);u=function(){r._count<Number.MAX_VALUE&&r._count++;r._list.forEach(function(i){if(i.remove){var u=!0;try{i.remove.call(i.target,n,i.args,r._count-i.start)||(u=!1)}catch(f){}u&&r.remove(i.handler);return}if(t)try{i.args?i.handler.call(i.target,n,i.args):i.handler.call(i.target,n)}catch(f){}else i.args?i.handler.call(i.target,n,i.args):i.handler.call(i.target,n)})};i==null||i===!1?u():i===!0?setTimeout(function(){u()},0):typeof i=="number"?setTimeout(function(){u()},i):setTimeout(function(){u()},0)},n.prototype.remove=function(n){if(n){var t=[];this._list.forEach(function(i){i.handler!==n&&t.push(i)});this._list=t}},n.prototype.clear=function(){this._list=[]},n.prototype.addListenerMethods=function(n){var t=this;n&&(n.listen=function(n,i,r,u){return t.add(n,i,r,u)},n.unlisten=function(n){t.remove(n)},n.clearListener=function(){t.clear()})},n}();t.EventHandlers=i;w=function(){function n(){this._mapping={};this.caseSensitive=!1;this.changed=new t.EventHandlers}return n.prototype.get=function(n){return n?(n=n.toString(),this._mapping[this.caseSensitive?n:n.toLowerCase()]):undefined},n.prototype.map=function(n,t){var i,r,u;if(t===void 0&&(t=!1),n){t&&this.clear();for(i in n)i&&typeof i=="string"&&(r=n[i],this.caseSensitive||(i=i.toLowerCase()),u=this._mapping[i],this._mapping[i]=r,this.changed.raise({key:i,old:u,value:this._mapping[i]}))}},n.prototype.push=function(n,t){if(n&&t){n=n.toString();this.caseSensitive||(n=n.toLowerCase());var i=this._mapping[n];i!==this._mapping[n]&&(this._mapping[n]=t,this.changed.raise({key:n,old:i,value:this._mapping[n]}))}},n.prototype.item=function(n,t){return n?(arguments.length>1&&(t==null?this.remove(n):this.push(n,t)),this._mapping[n]):undefined},n.prototype.remove=function(n){if(n){n=n.toString();this.caseSensitive||(n=n.toLowerCase());var t=this._mapping[n];this._mapping[n]&&delete this._mapping[n];t!==undefined&&this.changed.raise({key:n,old:t,value:undefined})}},n.prototype.clear=function(){var t=this._mapping,n;this._mapping={};for(n in t)n&&typeof n=="string"&&t[n]!==undefined&&this.changed.raise({key:n,old:t[n],value:undefined})},n}();t.Mapping=w;t.toArray=g;t.toStringArray=nt;t.isArray=tt;t.contains=it;t.indexOf=rt;t.getItem=b;t.copy=ut;t.pushRange=ft;t.remove=et;t.removeKeyValuePair=ot;t.setKeyValue=st;t.addItem=ht;t.getEntry=ct;t.getEntries=lt;t.findItemView=at;t.cellInfo=vt;t.formatList=yt;t.diff=pt;t.changeSelect=wt;t.bindingArray=bt;t.bindingControl=kt;t.listControl=dt;t.pagingControl=gt;t.switchControl=ni;t.singleFlowControl=ti})(t=n.Collection||(n.Collection={}))}(AliHub||(AliHub={})),function(n){var t;(function(t){function f(n,i,u){return t.createControl(n,r,i,u)}var i=function(){function i(){}return i.parse=function(n){var t,r,u;if(n==null)return null;if(n instanceof Date)return n;if(n.month!=null&&n.date!=null)return t=n,new Date(t.year!=null?t.year:(new Date).getFullYear(),t.month,t.date||0,t.hour||0,t.minute||0,t.second||0,t.millisecond||0);switch(typeof n){case"string":switch(n){case"init":return n=window._pageInitDate,r=!n||n==="init"?new Date:i.parse(n),r==null&&(r=new Date),window._pageInitDate=r,r;case"now":return new Date;case"today":return u=new Date,new Date(u.getFullYear(),u.getMonth(),u.getDate());default:return new Date(n)}case"number":return new Date(n);case"boolean":return n===!0?new Date:null;default:return n}},i.toLocaleTimeString=function(n,r){if(r===void 0&&(r=!1),n=i.parse(n),n==null)return"";if(i.only24h||r===!0)return t.Maths.addPrefix(n.getHours(),2)+":"+t.Maths.addPrefix(n.getMinutes(),2)+":"+t.Maths.addPrefix(n.getSeconds(),2);var u=n.toLocaleTimeString();return u.indexOf("GMT")>5?u=u.substring(0,u.indexOf("GMT")):u.indexOf("GMT")===0&&(u=u.substring(5)),u},i.toDayOfWeekString=function(t,i){if(i===void 0&&(i=!1),t==null)return"";var r=typeof t=="number"?t:t.getDay();if(i)switch(r){case 0:return n.Res.builtIn().localString("week0s");case 1:return n.Res.builtIn().localString("week1s");case 2:return n.Res.builtIn().localString("week2s");case 3:return n.Res.builtIn().localString("week3s");case 4:return n.Res.builtIn().localString("week4s");case 5:return n.Res.builtIn().localString("week5s");case 6:return n.Res.builtIn().localString("week6s");default:return""}switch(r){case 0:return n.Res.builtIn().localString("week0f");case 1:return n.Res.builtIn().localString("week1f");case 2:return n.Res.builtIn().localString("week2f");case 3:return n.Res.builtIn().localString("week3f");case 4:return n.Res.builtIn().localString("week4f");case 5:return n.Res.builtIn().localString("week5f");case 6:return n.Res.builtIn().localString("week6f");default:return""}},i.toApmString=function(t){if(t==null)return"";var i=typeof t=="number"?t:t.getHours();return i>=12?n.Res.builtIn().localString("pm"):n.Res.builtIn().localString("am")},i.toMonthString=function(t,i){if(i===void 0&&(i=!1),t==null)return"";var r=typeof t=="number"?t:t.getDay();if(i)switch(r){case 0:return n.Res.builtIn().localString("month0s")||r.toString();case 1:return n.Res.builtIn().localString("month1s")||r.toString();case 2:return n.Res.builtIn().localString("month2s")||r.toString();case 3:return n.Res.builtIn().localString("month3s")||r.toString();case 4:return n.Res.builtIn().localString("month4s")||r.toString();case 5:return n.Res.builtIn().localString("month5s")||r.toString();case 6:return n.Res.builtIn().localString("month6s")||r.toString();case 7:return n.Res.builtIn().localString("month7s")||r.toString();case 8:return n.Res.builtIn().localString("month8s")||r.toString();case 9:return n.Res.builtIn().localString("month9s")||r.toString();case 10:return n.Res.builtIn().localString("monthAs")||r.toString();case 11:return n.Res.builtIn().localString("monthBs")||r.toString();default:return""}switch(r){case 0:return n.Res.builtIn().localString("month0f")||r.toString();case 1:return n.Res.builtIn().localString("month1f")||r.toString();case 2:return n.Res.builtIn().localString("month2f")||r.toString();case 3:return n.Res.builtIn().localString("month3f")||r.toString();case 4:return n.Res.builtIn().localString("month4f")||r.toString();case 5:return n.Res.builtIn().localString("month5f")||r.toString();case 6:return n.Res.builtIn().localString("month6f")||r.toString();case 7:return n.Res.builtIn().localString("month7f")||r.toString();case 8:return n.Res.builtIn().localString("month8f")||r.toString();case 9:return n.Res.builtIn().localString("month9f")||r.toString();case 10:return n.Res.builtIn().localString("monthAf")||r.toString();case 11:return n.Res.builtIn().localString("monthBf")||r.toString();default:return""}},i.toCustomizedString=function(n,r,u){var f,e,h,o,s;if(u===void 0&&(u=!1),n=i.parse(n),n==null)return"";if(r==null)return n.toString();r=r.toString();f=i.getHoroscope(n);switch(r.toLowerCase()){case"localedate":case"ldate":return n.toLocaleDateString();case"localetime":case"ltime":return n.toLocaleTimeString();case"localereladate":case"lrdate":return i.toLocaleString(n,!0);case"localerelatime":case"lrtime":return i.toLocaleString(n,!1);case"localedatetime":case"locale":return n.toLocaleString();case"date":return n.toDateString();case"time":return n.toTimeString();case"full":case"datetime":return n.toString();case"iso":return n.toISOString();case"utc":return n.toUTCString();case"number":return n.getTime().toString();case"horoscope":return!f?"":f.name;case"horoscopesymbo":return!f?"":f.symbo;case"span":return i.getNowSpanString(n)}if(e=n.getHours()%12,e===0&&(e=12),h={localedate:n.toLocaleDateString(),localetime:n.toLocaleTimeString(),locale:n.toLocaleString(),full:n.toString(),iso:n.toISOString(),horoscopename:!f?"":f.name,horoscopeen:!f?"":f.enName,horoscopesymbo:!f?"":f.symbo,yyyy:n.getFullYear(),dddd:i.toDayOfWeekString(n,!1),MMMM:i.toMonthString(n.getMonth(),!1),ddd:i.toDayOfWeekString(n,!0),MMM:i.toMonthString(n.getMonth(),!0),yy:n.getFullYear()%100,MM:t.Maths.addPrefix(n.getMonth()+1,2),dd:t.Maths.addPrefix(n.getDate(),2),M:n.getMonth()+1,d:n.getDate(),HH:t.Maths.addPrefix(n.getHours(),2),hh:t.Maths.addPrefix(e,2),mm:t.Maths.addPrefix(n.getMinutes(),2),ss:t.Maths.addPrefix(n.getSeconds(),2),tt:i.toApmString(n),mmm:t.Maths.addPrefix(n.getMilliseconds(),3),H:n.getHours(),h:e,m:n.getMinutes(),s:n.getSeconds()},o=t.Text.format(r,h),!!o&&!u)for(s in h)!s||typeof s!="string"||(o=o.replace(s,h[s]));return o},i.sameDate=function(n,t){return(n=i.parse(n),t=i.parse(t),n==null&&t==null)?!0:n==null||t==null?!1:n.toDateString()===t.toDateString()},i.toLocaleString=function(t,r){var u,f;if(r===void 0&&(r=!1),t==null)return"";if(t=i.parse(t),u=new Date,t.getFullYear()===u.getFullYear()&&t.getMonth()===u.getMonth()&&t.getDate()===u.getDate())return r?n.Res.builtIn().localString("today"):i.toLocaleTimeString(t);if(f=i.getDaysDiff(u,t),t>u){if(f===1)return r?n.Res.builtIn().localString("tomorrow"):n.Res.builtIn().localString("tomorrowTime").replace("{0}",i.toLocaleTimeString(t));if(t.getDay()-f>0)switch(t.getDay()){case 6:return r?n.Res.builtIn().localString("week6f"):n.Res.builtIn().localString("week6t").replace("{0}",i.toLocaleTimeString(t));case 5:return r?n.Res.builtIn().localString("week5f"):n.Res.builtIn().localString("week5t").replace("{0}",i.toLocaleTimeString(t));case 4:return r?n.Res.builtIn().localString("week4f"):n.Res.builtIn().localString("week4t").replace("{0}",i.toLocaleTimeString(t));case 3:return r?n.Res.builtIn().localString("week3f"):n.Res.builtIn().localString("week3t").replace("{0}",i.toLocaleTimeString(t))}return r?t.toLocaleDateString():t.toLocaleString()}if(f===1)return r?n.Res.builtIn().localString("yesterday"):n.Res.builtIn().localString("yesterdayTime").replace("{0}",i.toLocaleTimeString(t));if(t.getDay()+f<6)switch(t.getDay()){case 4:return r?n.Res.builtIn().localString("week4f"):n.Res.builtIn().localString("week4t").replace("{0}",i.toLocaleTimeString(t));case 3:return r?n.Res.builtIn().localString("week3f"):n.Res.builtIn().localString("week3t").replace("{0}",i.toLocaleTimeString(t));case 2:return r?n.Res.builtIn().localString("week2f"):n.Res.builtIn().localString("week2t").replace("{0}",i.toLocaleTimeString(t));case 1:return r?n.Res.builtIn().localString("week1f"):n.Res.builtIn().localString("week1t").replace("{0}",i.toLocaleTimeString(t))}return r?t.toLocaleDateString():t.toLocaleString()},i.toFullLocaleString=function(n){if(n==null)return"";n=i.parse(n);var t=new Date;return n.toLocaleString()},i.toSimpleString=function(n){return n==null?"":(n=i.parse(n),n.getFullYear().toString()+"-"+t.Maths.addPrefix(n.getMonth()+1,2)+"-"+t.Maths.addPrefix(n.getDate(),2)+" "+t.Maths.addPrefix(n.getHours(),2)+":"+t.Maths.addPrefix(n.getMinutes(),2)+":"+t.Maths.addPrefix(n.getSeconds(),2))},i.monthStart=function(n,t){t===void 0&&(t=0);var i=new Date(n,t);return i.getDay()},i.toNumberString=function(n){return n==null?"":typeof n=="number"?n.toString():(n=i.parse(n),n==null)?"":n.getTime().toString()},i.isLeap=function(n){return n==null?null:n%400==0||n%4==0&&n%100!=0},i.getDayCount=function(n,t){if(t===2)return n==null?null:i.isLeap(n)?29:28;if(t==null)return i.isLeap(n)?366:365;switch(t){case 0:case 2:case 4:case 6:case 7:case 9:case 11:return 31;default:return 30}},i.getDaysDiff=function(n,t){var h,u,r;if(n==null||t==null)return null;n=i.parse(n);t=i.parse(t);n>t&&(h=n,n=t,t=h);var e=t.getFullYear(),f=n.getFullYear(),s=t.getMonth(),o=n.getMonth(),l=t.getDate(),c=n.getDate();if(e===f&&s===o)return l-c;if(u=0,u+=i.getDayCount(f,o)-c,u+=t.getDate(),e===f){if(s-o>1)for(r=o+1;r<s;r++)u+=i.getDayCount(f,r);return u}for(r=o+1;r<12;r++)u+=i.getDayCount(f,r);for(r=0;r<s;r++)u+=i.getDayCount(e,r);if(e-f>1)for(r=f+1;r<e;r++)u+=i.getDayCount(r);return u},i.getYearsDiff=function(n,t){var r;return n==null||t==null?null:(n=i.parse(n),t=i.parse(t),n>t&&(r=n,n=t,t=r),t.getFullYear()-n.getFullYear())},i.getAge=function(n){if(n==null)return null;n=i.parse(n);var t=new Date,r=t.getFullYear()-n.getFullYear();return n.getMonth()>=t.getMonth()?r:r-1},i.getHoroscopes=function(){return[{name:n.Res.builtIn().localString("capricorn"),enName:"Capricorn",start:{month:11,date:22},end:{month:0,date:20},symbo:"♑"},{name:n.Res.builtIn().localString("aquarius"),enName:"Aquarius",start:{month:0,date:21},end:{month:1,date:19},symbo:"♒"},{name:n.Res.builtIn().localString("pisces"),enName:"Pisces",start:{month:1,date:20},end:{month:2,date:20},symbo:"♓"},{name:n.Res.builtIn().localString("aries"),enName:"Aries",start:{month:2,date:21},end:{month:3,date:20},symbo:"♈"},{name:n.Res.builtIn().localString("taurus"),enName:"Taurus",start:{month:3,date:21},end:{month:4,date:21},symbo:"♉"},{name:n.Res.builtIn().localString("gemini"),enName:"Gemini",start:{month:4,date:22},end:{month:5,date:21},symbo:"♊"},{name:n.Res.builtIn().localString("cancer"),enName:"Cancer",start:{month:5,date:22},end:{month:6,date:22},symbo:"♋"},{name:n.Res.builtIn().localString("leo"),enName:"Leo",start:{month:6,date:23},end:{month:7,date:23},symbo:"♌"},{name:n.Res.builtIn().localString("virgo"),enName:"Virgo",start:{month:7,date:24},end:{month:8,date:23},symbo:"♍"},{name:n.Res.builtIn().localString("libra"),enName:"Libra",start:{month:8,date:24},end:{month:9,date:23},symbo:"♎"},{name:n.Res.builtIn().localString("scorpio"),enName:"Scorpio",start:{month:9,date:24},end:{month:10,date:22},symbo:"♏"},{name:n.Res.builtIn().localString("sagittarius"),enName:"Sagittarius",start:{month:10,date:23},end:{month:11,date:21},symbo:"♐"}]},i.getHoroscope=function(n){if(n==null)return null;n=i.parse(n);var t=n.getDate(),r=n.getMonth(),u=i.getHoroscopes();return r==11&&t>=22||r==0&&t<=20?u[0]:r==0&&t>=21||r==1&&t<=19?u[1]:r==1&&t>=20||r==2&&t<=20?u[2]:r==2&&t>=21||r==3&&t<=20?u[3]:r==3&&t>=21||r==4&&t<=21?u[4]:r==4&&t>=22||r==5&&t<=21?u[5]:r==5&&t>=22||r==6&&t<=22?u[6]:r==6&&t>=23||r==7&&t<=23?u[7]:r==7&&t>=24||r==8&&t<=23?u[8]:r==8&&t>=24||r==9&&t<=23?u[9]:r==9&&t>=24||r==10&&t<=22?u[10]:r==10&&t>=23||r==11&&t<=21?u[11]:null},i.addSeconds=function(n,t){if(n=i.parse(n),n==null)return null;return new Date(n.getTime()+t*1e3)},i.addDays=function(n,t){if(n=i.parse(n),n==null)return null;return new Date(n.getTime()+t*864e5)},i.getSpan=function(n,t){if(n=i.parse(n),t=i.parse(t),n==null||t==null)return null;return t.getTime()-n.getTime()},i.getSpanString=function(n,t,r){r===void 0&&(r=!0);var u=i.getSpan(n,t);return i.toSpanString(u,r)},i.getNowSpanString=function(t){t=i.parse(t);var u=new Date,r=i.getSpan(t,u);return r=r/1e4,r<0?n.Res.builtIn().localString("future"):r<2?n.Res.builtIn().localString("secondsAgo"):r<6?n.Res.builtIn().localString("minuteAgo"):r<12?n.Res.builtIn().localString("minutesTwoAgo"):r<360?n.Res.builtIn().localString("minutesAgo").replace("{0}",(r/6).toFixed()):r<720?n.Res.builtIn().localString("hourAgo"):r<1080?n.Res.builtIn().localString("hoursTwoAgo"):r<1e4&&t.getDay()===u.getDay()?n.Res.builtIn().localString("hoursAgo").replace("{0}",(r/360).toFixed()):i.toLocaleString(t)},i.toSpan=function(n){var t,r,u,h,i,e,o,f,s;return n==null?null:(typeof n=="function"&&(n=n()),typeof n!="number")?(t=n,t.Days||(t.Days=0),t.Hours||(t.Hours=0),t.Minutes||(t.Minutes=0),t.Seconds||(t.Seconds=0),t.Milliseconds||(t.Milliseconds=0),t):(r=n,r==null||isNaN(r))?null:(u={Days:0,Hours:0,Minutes:0,Seconds:0,Milliseconds:0},h="",r<0&&(h+="-",r=-r),r<1e3)?(u.Milliseconds=r,u):(i=r,e=parseInt((i/864e5).toString(),10),!isNaN(e)&&e>0&&(u.Days=e),i-=e*864e5,o=parseInt((i/36e5).toString(),10),!isNaN(o)&&o>0&&(u.Hours=o),i-=o*36e5,f=parseInt((i/6e4).toString(),10),isNaN(f)&&(f=0),u.Minutes=f,i-=f*6e4,s=parseInt((i/1e3).toString(),10),isNaN(s)&&(s=0),u.Seconds=s,i-=f*1e3,u.Milliseconds=i,u)},i.toSpanString=function(n,i){var r,u,e,o,f,s;return(i===void 0&&(i=!0),n==null||isNaN(n))?"":(r="",n<0&&(r+="-",n=-n),n<1e3)?r+(i?"0:00."+t.Maths.addPrefix(n,3):n<500?"0:00":"0:01"):(u=n,e=parseInt((u/864e5).toString(),10),!isNaN(e)&&e>0&&(r+=e.toString()+":"),u-=e*864e5,o=parseInt((u/36e5).toString(),10),!isNaN(o)&&o>0&&(r+=t.Maths.addPrefix(o,2)+":"),u-=o*36e5,f=parseInt((u/6e4).toString(),10),isNaN(f)&&(f=0),r+=t.Maths.addPrefix(f,2)+":",u-=f*6e4,s=parseInt((u/1e3).toString(),10),isNaN(s)&&(s=0),r+=t.Maths.addPrefix(s,2),u-=f*1e3,i&&u>0&&(r+="."+t.Maths.addPrefix(u,3)),r==="NaN:NaN"||r==="NaN:NaN:NaN"||r==="NaN:NaN.NaN"||r==="NaN:NaN:NaN.NaN"?"":r)},i.toLocaleSpanString=function(r,u){var f=i.toSpan(r),e;return f?((u==null||u==t.TimePrecisions.Unknown)&&(u=t.TimePrecisions.Second),e=f.Days>0?n.Res.builtIn().localString("daysNum").replace("{0}",f.Days.toString()):"",u===t.TimePrecisions.Day)?e:(f.Hours>0&&(e+=n.Res.builtIn().localString("hoursNum").replace("{0}",f.Hours.toString())),u===t.TimePrecisions.Hour)?e:(f.Minutes>0&&(e+=n.Res.builtIn().localString("minutesNum").replace("{0}",f.Minutes.toString())),u===t.TimePrecisions.Minute)?e:(f.Seconds>0&&(e+=n.Res.builtIn().localString("secondsNum").replace("{0}",f.Seconds.toString())),u===t.TimePrecisions.Second)?e:(f.Milliseconds>0&&(e+=n.Res.builtIn().localString("millisecondsNum").replace("{0}",f.Milliseconds.toString())),e):""},i.toTimeString=function(n,t,r){var u,c,o,s;if(t===void 0&&(t=!0),n=i.parse(n),u="",r===!0)return u=n.getHours()>10?"":"0",u+=n.getHours().toString()+":",u+=n.getMinutes()>10?"":"0",u+=n.getMinutes().toString(),t===!0&&(u+=n.getSeconds()>0?"":"0",u+=n.getSeconds().toString()),u;if(t!==!0)return n.toLocaleTimeString();var l=n.getHours()>=12?23:11,a=new Date(2e3,0,1,l,57,46),e=n.getHours(),h=!1,f=a.toLocaleTimeString();return(f.indexOf("23")>=0&&(h=!0),h!==!0&&f.indexOf("11")<0||f.indexOf("57")<0||f.indexOf("46")<0)?n.toLocaleTimeString():(f=f.replace("23","{{hour}}").replace("11","{{hour}}").replace("57","{{min}}").replace(":46","").replace("46","{{sec}}"),h===!0&&e>=12&&(e-=12),c=e.toString(),e<10&&(c="0"+c),o=n.getMinutes().toString(),n.getMinutes()<10&&(o="0"+o),s=n.getSeconds().toString(),n.getSeconds()<10&&(s="0"+s),f.replace("{{hour}}",e.toString()).replace("{{min}}",o).replace("{{sec}}",s))},i}(),r,u;i.only24h=!1;t.DateTime=i;r=function(n){function t(t){var i=n.call(this,t)||this;return i._start=0,i._end=24,i._unit=40,i.addStyleRef("ali-controls-time"),i._style={labelX:9,labelY:15,scaleWidth:11,scaleHeight:1,scaleLast:!0,itemTitleX:-10,itemTitleY:25},i}return __extends(t,n),t.prototype.loadOptions=function(t){var i=n.prototype.loadOptions.call(this,t),r;if(!i)return i;i.start!=null&&(this._start=i.start);i.end!=null&&(this._end=i.end);this._start<0&&(this._start=0);this._end<0&&(this._end=0);this._start>24&&(this._start=24);this._end>24&&(this._end=24);this._start>this._end&&(r=this._end,this._start=this._end,this._end=r);i.viewModel!=null&&(this._model=i.viewModel);!i.partsStyle||(this._style=i.partsStyle);this._refresh()},t.prototype.startHour=function(n){return arguments.length>0&&n!=null&&n>=0&&n<=24&&n<=this._end&&(this._start=n),this._start},t.prototype.endHour=function(n){return arguments.length>0&&n!=null&&n>=0&&n<=24&&n>=this._start&&(this._end=n),this._end},t.prototype.hours=function(){return this._end-this._start},t.prototype.setViewModel=function(n){this._model=n;this._refresh()},t.prototype._refresh=function(){var t=this,n,i,r;if(!this._model){this.innerHTML("");return}if(n=this._model.sort(function(n,t){return!n||!t?0:(n.start||(n.start={hour:0}),t.start||(t.start={hour:0}),n.start.hour==null&&(n.start.hour=0),t.start.hour==null&&(t.start.hour=0),(n.start.hour-t.start.hour)*3600+((n.start.minute!=null?n.start.minute:0)-(t.start.minute!=null?t.start.minute:0))*60+(n.start.second!=null?n.start.second:0)-(t.start.second!=null?t.start.second:0))}),!n[n.length-1]){this.innerHTML("");return}if(i=n[n.length-1].start,!i||!i.hour){this.innerHTML("");return}var e=(i.hour*3600+(i.minute!=null?i.minute:0)*60+(i.second!=null?i.second:0)+(n[n.length-1].duration!=null?n[n.length-1].duration:0))/3600,u='<svg id="__view_control_svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="'+((e-this._start)*this._unit+(this._style.scaleLast?1:0)).toString()+'"><title>Day view<\/title><desc>Schedule for daily view.<\/desc><defs><\/defs><g id="__view_control_svg_gp" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" class="ali-container-graph ali-container-main"><g id="__view_control_svg_gp_bg" class="ali-container-bg">',f=0;for(r=this._start;r<e;r++)f=r-this._start,u+='<g id="__view_control_svg_gp_bg_i'+r.toString()+'" transform="translate(0, '+(f*this._unit).toString()+')" class="ali-container-main"><rect width="'+(this._style.scaleWidth!=null?this._style.scaleWidth:0).toString()+'" height="'+(this._style.scaleHeight!=null?this._style.scaleHeight:0).toString()+'"><\/rect><text transform="translate('+(this._style.labelX!=null?this._style.labelX:0).toString()+", "+(this._style.labelY!=null?this._style.labelY:0).toString()+')"><tspan>'+r.toString()+":00<\/tspan><\/text><\/g>";u+='<g id="__view_control_svg_gp_bg_last" transform="translate(0, '+((f+1)*this._unit).toString()+')" class="ali-container-main"><rect width="'+(this._style.scaleWidth!=null?this._style.scaleWidth:0).toString()+'" height="'+(this._style.scaleHeight!=null?this._style.scaleHeight:0).toString()+'"><\/rect><\/g><\/g><g id="__view_control_svg_gp_cnt" class="ali-container-main">';n.forEach(function(n,i){var r=n.model,e=n.start.hour+(!n.start.minute?0:n.start.minute/60),f;e=(e-t._start)*t._unit;f=(n.duration!=null?n.duration:0)/3600;f*=t._unit;u+='<g id="__view_control_svg_gp_cnt_i'+i.toString()+'" '+(!r.color?"":'fill="'+r.color+'"')+' transform="translate(0, '+e.toString()+')" class="ali-container-main"><rect '+(!r.bgColor?"":'fill="'+r.bgColor+'"')+' width="100%" height="'+f.toString()+'"><\/rect><rect width="'+(t._style.itemLineWidth!=null?t._style.itemLineWidth:0).toString()+'" height="'+f.toString()+'"><\/rect><text height="'+f.toString()+'" transform="translate('+(t._style.itemTitleX!=null?t._style.itemTitleX:0).toString()+", "+(t._style.itemTitleY!=null?t._style.itemTitleY:0).toString()+')"><tspan x="100%">'+r.value+"<\/tspan><\/text><\/g>"});u+="<\/g><\/g><\/svg>";this.innerHTML(u)},t}(t.VisualControl);t.TimeControl=r;u=function(){function t(){this._time=[];this.recorded=new n.Collection.EventHandlers;this.paused=new n.Collection.EventHandlers;this.cleared=new n.Collection.EventHandlers;this.notifySucceeded=new n.Collection.EventHandlers;this.notifyFailed=new n.Collection.EventHandlers}return t.prototype.reset=function(n){var r=this._time.length,u=this._time.length%2>0,t=i.parse(n);return this._time=n!=null?[t]:[],r>0&&this.cleared.raise(u),t},t.prototype.record=function(n){var t,i,r;return n===void 0&&(n=!1),t=new Date,n?this._time.length%2==0&&this._time.push(t):(i=this._time.length,r=this._time.length%2>0,this._time=[t],i>0&&this.cleared.raise(r)),this.recorded.raise(t),t},t.prototype.stop=function(n){if(n===void 0&&(n=!1),this._time.length<1)return null;if(this._time.length%2==0)return this._time[this._time.length-1];var t=new Date;return this._time.push(t),n&&typeof n!="string"||this.notify(typeof n=="string"?n:null),this.paused.raise(t),t},t.prototype.span=function(n,t){var f,u,r;for(n===void 0&&(n=!1),t===void 0&&(t=!1),n&&this.stop(t),f=0,u=this._time,r=0;r<u.length;r+=2)f+=i.getSpan(u[r],u.length>r+1?u[r+1]:new Date);return f},t.prototype.spanWithRest=function(n,t){return n===void 0&&(n=!1),t===void 0&&(t=!1),n&&this.stop(t),this._time.length>0?i.getSpan(this._time[0],this._time.length%2==0?this._time[this._time.length-1]:new Date):0},t.prototype.latestSpan=function(n,t){return(n===void 0&&(n=!1),t===void 0&&(t=!1),this._time.length<1)?0:(n&&this.stop(t),this._time.length%2==0?i.getSpan(this._time[this._time.length-1],this._time[this._time.length-2]):i.getSpan(new Date,this._time[this._time.length-1]))},t.prototype.hasRecorded=function(){return this._time.length>0},t.prototype.isRecording=function(){return this._time.length%2>0},t.prototype.recordDate=function(n){return n===void 0&&(n=0),this._time.length>n*2?this._time[n*2]:null},t.prototype.latestRecordDate=function(){return this._time.length<1?null:this._time.length%2==0?this._time[this._time.length-2]:this._time[this._time.length-1]},t.prototype.recordedTimes=function(){return this._time.length%2==0?this._time.length/2:(this._time.length+1)/2},t.prototype.pausedTimes=function(){return this._time.length%2==0?this._time.length/2:(this._time.length-1)/2},t.prototype.recordHistory=function(){for(var i=[],t=this._time,n=0;n<t.length;n+=2)i.push({start:t[n],end:t.length>n?t[n+1]:null});return i},t.prototype.info=function(t){for(var h=0,u=this._time,f=n.Elements.getSize()||{x:null,y:null},e=this._time.length%2>0,o=this.latestRecordDate(),s=new Date,r=0;r<u.length;r+=2)h+=i.getSpan(u[r],u.length>r+1?u[r+1]:s);return{tracking:this.trackingId,span:this.span(),totalspan:this.spanWithRest(),begin:this._time.length>0?this._time[0]:null,latest:o,end:e?s:o,recording:e,url:window.location.href,width:f.x,height:f.y,message:t,channel:!!this.notificationOptions&&!!this.notificationOptions.channel?typeof this.notificationOptions.channel=="function"?this.notificationOptions.channel():this.notificationOptions.channel.toString():null}},t.prototype.notify=function(t){var u=this,i=this.notificationOptions,e,r,f;if(i)return e=i.key!=null&&typeof i.key=="boolean"?i.key?"timespan":null:i.key,r=this.info(t),n.Diagnostics.info("CoreLibrary","[0x01291601] Cost "+(!r.span?"0":r.span.toString())+"ms "+(this.trackingId||"timespan")+(!i.channel?"":" ("+i.channel+")")+"."),f=i.post?n.Web.resolveByPost(i.subject,e,{tracking:this.trackingId},r):n.Web.resolve(i.subject,e,r),!f||f.then(function(n){!u.notifySucceeded||u.notifySucceeded.raise(n.result)},function(n){!u.notifyFailed||u.notifyFailed.raise(n||{})}),f},t}();t.Stopwatch=u;t.timeControl=f})(t=n.Common||(n.Common={}))}(AliHub||(AliHub={})),function(n){var t;(function(n){function f(n){return arguments.length>0&&(i.tracker=n),i.tracker||(i.tracker=u()),i.tracker}function e(n){return arguments.length>0&&(i.pageAnalyticsClient=n),i.pageAnalyticsClient||(i.pageAnalyticsClient=u()),i.pageAnalyticsClient}function u(){return i.consoleTracker||(i.consoleTracker=new r),i.consoleTracker.logger=function(){return typeof console!="undefined"?console:null},i.disableAdditionalConsole=!0,i.consoleTracker}function o(){return i.emptyTracker||(i.emptyTracker=new r),i.emptyTracker}function s(n,t,i,r){n&&n.log&&n.log(t,i,r)}function h(i,r){for(var f=[],u=2;u<arguments.length;u++)f[u-2]=arguments[u];n.log.apply(n,[t.info,i,r].concat(f))}function c(i,r){for(var f=[],u=2;u<arguments.length;u++)f[u-2]=arguments[u];n.log.apply(n,[t.debug,i,r].concat(f))}function l(i,r){for(var f=[],u=2;u<arguments.length;u++)f[u-2]=arguments[u];n.log.apply(n,[t.warn,i,r].concat(f))}function a(i,r){for(var f=[],u=2;u<arguments.length;u++)f[u-2]=arguments[u];n.log.apply(n,[t.error,i,r].concat(f))}function v(n,i,u){for(var h,e,c,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];try{if(h=f(),h.log.apply(h,[n,i,u].concat(o)),h.disableAdditionalConsole===!0)return}catch(l){}if(r.console){e=n.toString();switch(n){case t.error:e="error";break;case t.warn:e="warn";break;case t.info:e="info";break;case t.debug:e="debug";break;case"error":case"warn":case"info":case"debug":break;default:return}if(r.console!==!0&&r.console[e]&&typeof r.console[e]=="function")try{(c=r.console)[e].apply(c,["["+i+"] "+u].concat(o));return}catch(l){}if(typeof console=="undefined")return;console&&console[e]&&typeof console[e]=="function"&&console[e].apply(console,["["+i+"] "+u].concat(o))}}function y(n,t){try{e().record(n,t)}catch(i){}}function p(n){for(var r,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];typeof console!="undefined"&&(r=[n],i&&i.forEach(function(n){r.push(n)}),console&&console.debug&&console.debug.apply(console,r))}var i={},t,r;(function(n){n[n.info=0]="info";n[n.debug=1]="debug";n[n.warn=2]="warn";n[n.error=3]="error";n[n.fatal=4]="fatal"})(t=n.LogTypes||(n.LogTypes={}));r=function(){function n(){this.history=[];this.historyCount=0}return n.prototype.record=function(n,t){this.debug("ProcRec",n+" (AliHub.Diagnostics.Tracker.record)",t)},n.prototype.logger=function(){return null},n.prototype.log=function(n,i,r){for(var f=[],u=3;u<arguments.length;u++)f[u-3]=arguments[u];switch(n){case t.info:case"info":this.info&&this.info(i,r);break;case t.debug:case"debug":this.debug&&this.debug(i,r);break;case t.warn:case"warn":this.warn&&this.warn(i,r);break;case t.error:case"error":this.error&&this.error(i,r)}},n.prototype.info=function(n,i){for(var r,e,f=[],u=2;u<arguments.length;u++)f[u-2]=arguments[u];(r=this.logger(),e=new Date,r&&r.info&&r.info.apply(r,["["+n+"] "+i].concat(f)),this.historyCount<1)||(this.historyCount<this.history.length&&this.history.splice(0,this.history.length-this.historyCount+1),this.history.push({level:t.info,category:n,message:i,parameters:f,created:e}))},n.prototype.debug=function(n,i){for(var r,e,f=[],u=2;u<arguments.length;u++)f[u-2]=arguments[u];(r=this.logger(),e=new Date,r&&r.debug&&r.debug.apply(r,["["+n+"] "+i].concat(f)),this.historyCount<1)||(this.historyCount<this.history.length&&this.history.splice(0,this.history.length-this.historyCount+1),this.history.push({level:t.debug,category:n,message:i,parameters:f,created:e}))},n.prototype.warn=function(n,i){for(var r,e,f=[],u=2;u<arguments.length;u++)f[u-2]=arguments[u];(r=this.logger(),e=new Date,r&&r.warn&&r.warn.apply(r,["["+n+"] "+i].concat(f)),this.historyCount<1)||(this.historyCount<this.history.length&&this.history.splice(0,this.history.length-this.historyCount+1),this.history.push({level:t.warn,category:n,message:i,parameters:f,created:e}))},n.prototype.error=function(n,i){for(var r,e,f=[],u=2;u<arguments.length;u++)f[u-2]=arguments[u];(r=this.logger(),e=new Date,r&&r.error&&r.error.apply(r,["["+n+"] "+i].concat(f)),this.historyCount<1)||(this.historyCount<this.history.length&&this.history.splice(0,this.history.length-this.historyCount+1),this.history.push({level:t.error,category:n,message:i,parameters:f,created:e}))},n}();r.console=!1;n.Tracker=r;n.tracker=f;n.pageAnalyticsClient=e;n.consoleTracker=u;n.emptyTracker=o;n.logSwitch=s;n.info=h;n.debug=c;n.warn=l;n.error=a;n.log=v;n.record=y;n.debugInfo=p})(t=n.Diagnostics||(n.Diagnostics={}))}(AliHub||(AliHub={})),function(n){var t;(function(n){var t=function(){function n(){}return n.isNumber=function(n){return n!=null&&typeof n=="number"},n.isValidNumber=function(n){return n!=null&&typeof n=="number"&&!isNaN(n)},n.validNumber=function(n){return n!=null&&typeof n=="number"&&!isNaN(n)},n.addPrefix=function(n,t){var i=n.toString(),r;if(i.length>=t)return i;for(r=0;r<t-i.length;r++)i="0"+i;return i},n.randomString=function(t){var r=new Date,i;n._count>=Number.MAX_VALUE&&(this._count=0);try{n._count++}catch(u){n._count=0}return i="n"+n._count.toString()+"t"+r.getTime().toString(),!t||(i=t+"_"+i),i},n.inRange=function(n,t,i,r,u,f){var o,s,e;return(f===void 0&&(f=!1),o=(t||0)-(i||0),r=r||0,u=u||0,r>u&&(s=r,r=u,u=s),o===0)?(r-u)/2:(u<0&&(u=-u),e=(n-(i||0))*1/o*(r-u)+u,f&&(e>r?e=r:e<u&&(e=u)),e)},n}();t._count=0;n.Maths=t})(t=n.Common||(n.Common={}))}(AliHub||(AliHub={})),function(n){var t;(function(t){function c(){return i.regMsgHs!=null?i.regMsgHs:(i.regMsgHs=[],t.listen(window,"message",function(t){if(t.data.type=="AliHub.Elements.MessagePackageInfoContract"&&t.data.track&&t.data.data){var u=t.data,r=n.Collection.getItem(i.regMsgHs,u,function(n,t){return n.track===t.track});r&&r.process({timestamp:new Date,data:u.data,origin:t.origin,success:u.success,track:r.track,process:r.process})}}),i.regMsgHs)}function k(i){var f=document.createElement("div"),e,r,s,u,a,h,c,o,l;return f.id=n.Common.Maths.randomString("page_hidden_r_container_sender"),f.style.display="none",document.body.appendChild(f),e=document.createElement("iframe"),e.id=f.id+"_iframe",e.name=e.id,f.appendChild(e),r=document.createElement("form"),r.id=f.id+"_form",r.name=r.id,r.target=e.id,r.method="POST",r.action=i||"",f.appendChild(r),s=document.createElement("input"),s.type="submit",r.appendChild(s),u={},h=function(n){var t,i,u;if(n!=null){if(t=r.getElementsByTagName("input"),!!t)for(i=0;i<t.length;i++)if(u=t[i],u&&u.name===n)return u;return null}},u.formData=function(){var n;if(typeof FormData!="undefined")try{!FormData||(n=new FormData(r))}catch(t){}return n},u.url=function(n){return arguments.length>0&&(r.action=n||""),r.action},u.method=function(n){return arguments.length>0&&(r.method=n||""),r.method},u.field=function(n,t){if(n!=null){n=n.toString();var i=h(n);return arguments.length>1&&(t!=null?(i||(i=document.createElement("input")),i.name=n,i.type="text",i.value=t.toString(),r.appendChild(i)):!i||i.remove()),!i?null:i.value}},u.jsonField=function(t,i){var r=u.field(t,n.Common.Text.serialize(i));return!r?null:eval("("+r+")")},c=function(n){if(!n||!n.tagName||n.tagName.toString().toLowerCase()==="file"||!n.files||n.files.length<1||!n.files[0])return null;return n.files[0]},u.fileField=function(i,u,f){var o,e,s;if(!i)return null;if(i=i.toString(),o=n.Common.deferred(),i==null)return o.reject();if(e=h(i),!e){if(!u)return o.reject();e=document.createElement("input");e.type="file";!f||(e.accept=f);e.name=i;r.appendChild(e);r.enctype="multipart/form-data"}return u?(t.listenOnce(e,"change",function(){var n=c(e);n?o.resolve(n):o.reject()}),e.click()):(s=c(e),s?o.resolve(s):o.reject()),o.promise()},u.getFileField=function(n){var t=h(n);return c(t)},u.addSet=function(n){if(n&&typeof n!="string"&&typeof n!="number"&&typeof n!="boolean")for(var t in n)t!=null&&(typeof t=="string"||typeof t=="number")&&u.jsonField(t,n[t])},u.remove=function(){for(var u,f,s,e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!e)return 0;var o=[],i=r.getElementsByTagName("input"),h=i.length;if(!!i)for(u=0;u<i.length;u++)(f=i[u],f&&n.Collection.contains(e,f))&&o.push(f);return s=h-o.length,o.forEach(function(n){n.remove()}),s},u.clear=function(){r.innerHTML=""},o=!0,l=function(){var f=r.action,h="&",i=n.Common.deferred(),s,c,e,l;if(!!f&&f.length>10){if(s=f.indexOf("&callback=?"),s<0&&(s=f.indexOf("?callback=?"),h="?"),s<0){if(typeof FormData=="undefined")return n.Common.rejectDeferred(i,"Cannot find parameter callback.");if(o=!1,c=new FormData(r),typeof jQuery!="undefined")jQuery.ajax({url:r.action,type:r.method,data:c,processData:!1,contentType:!1}).then(function(t){var t=n.Web.DataPackageJob.upgradePackage(t);t.success?i.resolve({result:t.data,timestamp:t.timestamp}):n.Common.rejectDeferred(i,"failed result",t)},function(n){i.reject(n)});else{e=new XMLHttpRequest;try{e.onreadystatechange=function(t){if(e.readyState===4)if(e.status==200){var r=eval("("+e.responseText+")"),r=n.Web.DataPackageJob.upgradePackage(r);r.success?i.resolve({result:r.data,timestamp:r.timestamp}):n.Common.rejectDeferred(i,"failed result",r)}else i.reject(t)};u.onprogress||(u.onprogress=new n.Collection.EventHandlers);e.upload.addEventListener("progress",function(n){u.onprogress.raise(n)},!1)}catch(a){}e.open(r.method,r.action);e.send(c)}return i.promise()}if(s+11<f.length&&f.indexOf("&",s+1)<0&&f.indexOf("#",s+1)<0)return n.Common.rejectDeferred(i,"Parameter callback is invalid.")}return l=n.Common.Maths.randomString("AliHub.Elements.hiddenForm"),f=f.replace(h+"callback=?",h+"callback="+encodeURIComponent(l)),r.action=f+"&callbacktype=message",t.listenMessagePackage(function(t){var r={result:t.data,timestamp:n.Common.DateTime.parse(t.timestamp)};t.success?i.resolve(r):i.reject(t.data)},l),i.promise()},u.submit=function(t){var e,h,i,f;return a=new Date,o=!0,!u.formDataConvert||!u.formData||(h=u.formData()),t?(f=n.Common.deferred(),e=f.promise(),f.resolve(null)):h?(i=new XMLHttpRequest,i.withCredentials=!0,i.open(r.method,r.action,!0),f=n.Common.deferred(),e=f.promise(),i.onload=function(){if(i.readyState===4&&i.status===200)if(i.status===200){var t=n.Web.DataPackageJob.upgradePackage(JSON.parse(i.responseText));t.success?f.resolve(t.data):f.reject(t.message)}else f.reject(i.statusText)},typeof u.formDataConvert=="function"&&u.formDataConvert(h,i),i.send(h),o=!1):e=l(),o&&s.click(),e},u.dispose=function(){try{f.remove()}catch(n){!f.outerHTML||(f.outerHTML="")}},u}function d(n,t,i,r,u){if(n){try{if(!!n.AliHub&&!!n.AliHub.Elements){n.AliHub.Elements.manualReceiveMessagePackage(t,i,r);return}}catch(f){}n.postMessage&&n.postMessage({type:"AliHub.Elements.MessagePackageInfoContract",track:t,success:i,data:r,timestamp:new Date},u||"*")}}function g(i,r,u){if(!i)return!1;var e=c(),f=n.Collection.getItem(e,i,function(n,t){return n.track===t});return f?(f.process({timestamp:new Date,data:u,process:f.process,success:r,origin:null,track:i}),t.unlistenPackageMessage(i),!0):!1}function nt(t,i){if(!t)return n.Common.Reflection.emptyDisposable();i||(i=n.Common.Maths.randomString("AliHub.Elements.listenMessagePackage"));var r={track:i,process:t},f=c(),u=n.Collection.getItem(f,r,function(n,t){return n.track===t.track});if(!u){f.push(r);return}return u.process=r.process,r=u,{track:i,dispose:function(){v(r.track)}}}function v(t){n.Collection.remove(c(),[{track:t}],!0,function(n,t){return n.track===t.track})}function tt(t){var r=n.Collection.getItem(i.webcomponents,t,"name");return!!r&&!!r.control?r.control:undefined}function it(){return!!i.webcomponents&&i.webcomponents.length>0}function rt(t,r){var f,e,u;if(t&&!(t.indexOf("-")<1)){if(t=t.toString().toLowerCase(),i.webcomponents==null&&(i.webcomponents=[]),!r){delete i.webcomponents[t];return}if(f=n.Collection.getItem(i.webcomponents,t,"name"),!!f){f.control=r;return}for(i.webcomponents.push({name:t,control:r}),e=document.getElementsByTagName(t),u=0;u<e.length;u++)try{n.Common.fillControl(e[u],r,!0)}catch(o){}}}function ut(n,t,i){if(!n||!t||n.indexOf("-")<1||!Object.create||!document.registerElement)return null;try{var r=Object.create(HTMLElement.prototype),u;return r.createdCallback=function(){var n=this;n&&(u=new t(n),u.loadOptions(!0))},r.getControl=function(){return u},!i||i(r),document.registerElement(n,{prototype:r}),r}catch(f){return null}}function ft(t,i,r){if(t){t=r?n.Web.mergeLink(t,r):t.toString();var u=document.createElement("a");u.innerHTML="Temp";u.style.display="none";u.href=t;i&&(u.target=i);document.body.appendChild(u);u.click();setTimeout(function(){if(u)try{u.remove()}catch(n){u.outerHTML&&(u.outerHTML="")}},3e3)}}function s(n){var t=r(n),i;return t?(i=t.offsetTop,t.offsetParent!=null&&(i+=s(t.offsetParent)),i):null}function h(n){var t=r(n),i;return t?(i=t.offsetLeft,t.offsetParent!=null&&(i+=h(t.offsetParent)),i):null}function et(n){if(!n)return{invalid:!0,message:"element should not be null"};var t=h(n),i=s(n),r={x:t,y:i};return(t==null||i==null||isNaN(t)||isNaN(i))&&(r.invalid=!0),r}function ot(n,t){if(t||(t=event),!t)return{invalid:!0,message:"cannot get event"};var r=t.pageX||t.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),u=t.pageY||t.clientY+(document.documentElement.scrollTop||document.body.scrollTop),i=t.touches;return!!i&&!!i.length&&i.length>0&&!!i[0]?((isNaN(r)||r==null)&&(r=i[0].pageX),(isNaN(u)||u==null)&&(u=i[0].pageX)):(i=t.changedTouches,!!i&&!!i.length&&i.length>0&&!!i[0]&&((isNaN(r)||r==null)&&(r=i[0].pageX),(isNaN(u)||u==null)&&(u=i[0].pageX))),!n||(isNaN(r)||r==null||(r-=h(n)),isNaN(u)||u==null||(u-=s(n))),{x:r,y:u}}function r(n){for(var e,i,o,f,u,t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!n)return!t||t.length===0?null:(e=l(null,t),document.getElementById(e));if(typeof n=="function"&&(n=n()),!n)return null;if(!!n.jquery&&!!n.length&&n.length>0&&(n=n[0]),!!n.body||!!n.documentElement)return document;if(!!n.parent&&!!n.scroll)return window;if(i=null,typeof n=="string")i=n;else if(!n.getId||!n.getElement){if(!!n.tagName){if(!t||t.length===0)return n;i=n.id}}else{if(!t||t.length===0)return n.getElement();i=n.getId()}return i?(o=l(i,t),f=document.getElementById(o),!!f||!!t&&t.length>0||typeof n!="string")?f:!document.querySelector?typeof jQuery=="undefined"?null:jQuery?(u=jQuery(n),!!u&&u.length>0?u[0]:null):null:document.querySelector(n):null}function st(n,i){if(n=t.getById(n),i=t.getById(i),!n||!i)return!1;if(n===i)return!0;for(var r=n;r.parentNode;)if(r=r.parentNode,r===i)return!0;return!1}function ht(n){for(var r,u=[],i=1;i<arguments.length;i++)u[i-1]=arguments[i];return(n=t.getById(n),!n)?[]:(r=[],u.forEach(function(i){var o,c,h,f,e,u,s;if(i){if(typeof i=="string"){if(o=document.createElement("div"),o.innerHTML=i,o.childNodes)for(c=0;c<o.childNodes.length;c++)(h=o.childNodes[c],h&&h.tagName)&&(n.appendChild(h),r.push(h));o.innerHTML="";return}if(f=i.element||document.createElement(i.tagName||"div"),t.changeStyleRef(f,i.className),t.changeStyleRef(f,i.styleRef),i.style)for(u in i.style)u&&typeof u=="string"&&i.style[u]&&typeof i.style[u]=="string"&&(f.style[u]=i.style[u]);if(n.appendChild(f),r.push(f),i.attr)for(u in i.attr)u&&typeof u=="string"&&i.attr[u]&&typeof i.attr[u]=="string"&&f.setAttribute(u,i.attr[u]);if(i.events){e=i.events;typeof e=="function"&&(e=e(f));for(u in e)u&&typeof u=="string"&&e[u]&&typeof e[u]=="function"&&t.listen(f,u,e[u])}i.prepared&&i.prepared(f);i.innerHTML&&(f.innerHTML=i.innerHTML);i.children&&(s=i.children,typeof s=="function"&&(s=s(f)),s instanceof Array&&t.createChildren.apply(t,[f].concat(s)));i.ready&&i.ready(f)}}),r)}function ct(t){for(var i,u=[],r=1;r<arguments.length;r++)u[r-1]=arguments[r];return i=n.Collection.toArray(t,!0),u.forEach(function(t){var u=i,r;i=[];r=n.Collection.toStringArray(t,!0);u.forEach(function(n){for(var t,u=0;u<n.children.length;u++)(t=n.children[u],!t||!t.tagName||r.indexOf(t.tagName.toString().toLowerCase())<0)||i.push(t)})}),i}function lt(t,i,r,u){var f,a,o,h,e,c,s,l,v,y;if(u===void 0&&(u=!1),!t)return[];if(f=typeof t=="string"?document.getElementById(t):t,!f)return null;if(u&&(a=i,i=r,r=a),f.className&&typeof f.className=="string")return f.className=n.Common.Text.trim(n.Collection.addItem(f.className," ",i,r)),f.className.split(" ");if(!!f.classList&&!!f.classList.add&&!!f.classList.remove){for(o=n.Collection.toStringArray(i),!!o&&o.length>0&&(e=[],o.forEach(function(n){e.push.apply(e,n.replace("  "," ").replace("  "," ").split(" "))}),(v=f.classList).add.apply(v,e)),h=n.Collection.toStringArray(r),!!h&&h.length>0&&(e=[],o.forEach(function(n){e.push.apply(e,n.replace("  "," ").replace("  "," ").split(" "))}),(y=f.classList).remove.apply(y,e)),c=[],s=0;s<f.classList.length;s++)l=f.classList[s],!l||c.push(l);return c}return[]}function at(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return t.changeStyleRef(n,r)}function vt(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return t.changeStyleRef(n,null,r)}function yt(n,i,r,u){return u===void 0&&(u=!1),t.changeStyleRef(n,i,r,u)}function pt(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return t.changeStyleRef(n,r)}function wt(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return t.changeStyleRef(n,null,r)}function bt(n,t){if(t===void 0&&(t=!1),!n)return t?"":null;var i=document.createElement("div");return i.appendChild(document.createTextNode(n)),i.innerHTML}function l(n,t){var i=!n?"":typeof n=="string"?n:n.id;return(i||(i=""),!t)?i:(t.forEach(function(n){n&&(i!==""&&(i+="_"),i+=n)}),i)}function kt(n,t,i){var e,r,o,u,s;if(t===void 0&&(t=!1),i===void 0&&(i=!1),n=n||location.search,!n)return[];if(e=n.indexOf("?"),e>0&&(n=n.substring(e+1)),r=n.split("&"),o=[],r)for(u=0;u<r.length;u++){if(s=r[u],!s)return;var h=s.split("="),c=h[0],f=(h.length>1?h[1]:null)||(t?"":null);!f||i||(f=decodeURIComponent(f));o.push({key:c,value:f})}return o}function dt(n,t,i){var e,r,o,u,s;if(t===void 0&&(t=!1),i===void 0&&(i=!1),n=n||location.search,!n)return{};if(e=n.indexOf("?"),e>0&&(n=n.substring(e+1)),r=n.split("&"),o={},r)for(u=0;u<r.length;u++){if(s=r[u],!s)return;var h=s.split("="),c=h[0],f=(h.length>1?h[1]:null)||(t?"":null);!f||i||(f=decodeURIComponent(f));o[c]=f}return o}function gt(n,i){return i===void 0&&(i=!1),t.getStringQuery(location.search,n,i)}function ni(n,t,i){var r;if(i===void 0&&(i=!1),n=n||location.search,t==null)return null;try{if(typeof t=="string")return(r=n.match(new RegExp("[?&]"+t+"=([^&]+)","i")),r==null||r.length<1)?"":i?r[1]:decodeURIComponent(r[1]);if(typeof t=="number")return(r=n.match(new RegExp("[?&][^?&]+=[^?&]+","g")),r==null)?"":i?r[t].substring(1):decodeURIComponent(r[t].substring(1))}catch(u){}return null}function ti(t,i){return t?(i==null&&(i=""),typeof i=="function"&&(i=i()),i instanceof Date&&(i=n.Common.DateTime.toNumberString(i)),typeof i!="string"&&typeof i!="number"&&typeof i!="boolean"&&(i=""),encodeURIComponent(t)+"="+(i!=null?encodeURIComponent(i.toString()):"")):null}function ii(i){var u,r,e,f;if(!i||i.length<1)return"";if(u="",typeof i=="function"&&(i=i()),n.Collection.isArray(i))i.forEach(function(n){n&&n.key&&(u+="&"+t.queryField(n.key,n.value))});else for(r in i)r!=null&&(typeof r=="string"||typeof r=="number")&&(r=r.toString(),e=i[r],f=t.queryField(r,i[r]),f)&&(u+="&"+t.queryField(r,i[r]));return u.length>0?u.substring(1):""}function ri(n){return window.location.protocol+"//"+window.location.host+(n?":"+window.location.port:"")+window.location.pathname}function ui(n){var i,r,u;if(arguments.length>0){if(i=t.getById(n),!i)return;try{r=i.requestFullScreen||i.requestFullscreen||i.webkitRequestFullScreen||i.webkitRequestFullscreen||i.mozRequestFullScreen||i.msRequestFullScreen;r?r.call(i):typeof ActiveXObject!="undefined"&&(u=new ActiveXObject("WScript.Shell"),!u||u.SendKeys("{F11}"))}catch(f){}}return document.fullScreenElement||document.fullscreenElement||document.webkitFullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullScreenElement}function fi(){try{document.cancelFullScreen?document.cancelFullScreen():document.cancelFullscreen?document.cancelFullscreen():document.fullscreenElement?document.webkitCancelFullScreen():document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():!document.msCancelFullScreen||document.msCancelFullScreen()}catch(n){}}function f(i,r,u){return!i||!u||!r||r.toString()==""?n.Common.Reflection.emptyDisposable():(typeof i=="function"&&(i=i()),!!i.jquery&&!!i.length&&i.length>0&&(i=i[0]),typeof i=="string"&&(i=t.getById(i)),!i.get_element||(i=i.getElement()),r=r.toString(),i.addEventListener?i.addEventListener(r,u,!1):!i.attachEvent||i.attachEvent("on"+r,u),{eventType:r,handler:u,dispose:function(){i.removeEventListener?i.removeEventListener(r,u,!1):!i.detachEvent||i.detachEvent("on"+r,u)},process:function(n){u(n)}})}function ei(t,i){for(var e,o,r=[],u=2;u<arguments.length;u++)r[u-2]=arguments[u];return!r||r.length<1?n.Common.Reflection.emptyDisposable():(e=[],o=function(n){e.forEach(function(t){t(n)})},e.push.apply(e,[function(){a(t,i,o)}].concat(r)),f(t,i,o))}function oi(i,r){for(var f,e=[],u=2;u<arguments.length;u++)e[u-2]=arguments[u];return f=n.Common.deferred(),setTimeout(function(){var n=t.listenOnce.apply(t,[i,r].concat(e));n.useless?f.reject(n):f.resolve(n)},0),f.promise()}function si(n,t,i){return f(n,t,i)}function a(n,i,r){n&&r&&i&&i.toString()!=""&&(typeof n=="function"&&(n=n()),!!n.jquery&&!!n.length&&n.length>0&&(n=n[0]),typeof n=="string"&&(n=t.getById(n)),!n.get_element||(n=n.getElement()),i=i.toString(),n.removeEventListener?n.removeEventListener(i,r,!1):!n.detachEvent||n.detachEvent("on"+i,r))}function hi(n,t,i){a(n,t,i)}function ci(n,i){var u,r;if(n=t.getById(n),n){for(u=n.children||document.all,r=0;r<u.length;r++)i(u[r]);t.listen(n,"DOMNodeInserted",function(n){var t=n.target||n.srcElement;t&&t.tagName&&i(t)})}}function li(n){if(!n||typeof n!="string")return[];var i=document.implementation.createHTMLDocument("CSS Loader"),t=document.createElement("style");return t.textContent=n,i.body.appendChild(t),t.sheet.cssRules}function ai(i,r){if(!r)return n.Common.Reflection.emptyDisposable();var u=t.getById(i),f=!!r.minX&&typeof r.minX=="function"?r.minX():r.minX,e=!!r.minY&&typeof r.minY=="function"?r.minY():r.minY;(!f||f<0)&&(f=1);f=Math.abs(f);(!e||e<0)&&(e=1);e=Math.abs(e);var o=null,s=function(n){var t=!n.y||Math.abs(n.x)/Math.abs(n.y)>(f+.01)/(e+.01);t?n.x>f&&!!r.turnLeft?r.turnLeft(u,n.x):n.x<-f&&!!r.turnRight&&r.turnRight(u,-n.x):n.y>e&&!!r.turnUp?r.turnUp(u,n.y):n.y<-e&&!!r.turnDown&&r.turnDown(u,-n.y);!r.moveEnd||r.moveEnd(u,n)},h=t.listen(u,"touchstart",function(n){o={x:n.targetTouches[0].pageX,y:n.targetTouches[0].pageY};!r.moveStart||r.moveStart(u)}),c=!r.moving?null:t.listen(u,"touchmove",function(n){var t=n.touches?n.touches[0]:n,i;t&&(i={x:t.pageX-o.x,y:t.pageY-o.y},r.moving(u,i))}),l=t.listen(u,"touchend",function(n){if(o!=null){var t={x:n.changedTouches[0].pageX-o.x,y:n.changedTouches[0].pageY-o.y};o=null;s(t)}}),a=t.listen(u,"mousedown",function(){var n=t.getMousePosition(),i=t.listen(document.body,"mousemove",function(){var i=t.getMousePosition(),f={x:i.x-n.x,y:i.y-n.y};r.moving(u,f)}),f=t.listenOnce(document.body,"mouseup",function(){i.dispose();var r=t.getMousePosition(),u={x:r.x-n.x,y:r.y-n.y};s(u)})});return{dispose:function(){!h||h.dispose();!c||c.dispose();!l||l.dispose();!a||a.dispose()}}}function vi(t,i){if(!i||!i.process||i.count===0||i.span===0)return n.Common.Reflection.emptyDisposable();if(!i.start&&i.count==null)return f(t,"click",function(n){return i.process(n||event,0,i)});var r=0,u=null;return f(t,"click",function(t){var f=u!=null?n.Common.DateTime.getSpan(u,new Date):null,e;if(u=new Date,f==null||isNaN(f)||f>(!i.span?1e3:i.span)){r=1;return}r++;e=!i.start?0:i.start;r>=e&&(i.count==null||i.count>r-e)&&i.process(t||event,r-1,i)})}function yi(i,r,u){var e=t.getById(i),f;return!e||!u?n.Common.Reflection.emptyDisposable():r===null?t.listen(e,"DOMAttrModified",function(n){u(n)}):(f=n.Collection.toStringArray(r),!f||f.length<1)?n.Common.Reflection.emptyDisposable():t.listen(e,"DOMAttrModified",function(n){var t=n.attrName||n.propertyName;t&&f&&f.some(function(n){return n===t})&&u(n)})}function pi(n,i){if(i===void 0&&(i=!1),n||(n=window),typeof n=="function"&&(n=n()),typeof n=="string"&&(n=t.getById(n)),n&&n.getElement&&(n=n.getElement()),!n)return i?{invalid:!0,message:"element does not exist."}:null;if(!!n.body||!!n.documentElement){var r=!document.body?0:document.body.scrollWidth,u=!document.documentElement?0:document.documentElement.scrollWidth,f=!document.body?0:document.body.scrollHeight,e=!document.documentElement?0:document.documentElement.scrollHeight;return{x:r>u?r:u,y:f>e?f:e}}return n.parent?{x:document.compatMode=="CSS1Compat"?document.documentElement.clientWidth:document.body.clientWidth,y:document.compatMode=="CSS1Compat"?document.documentElement.clientHeight:document.body.clientHeight}:{x:n.offsetWidth,y:n.offsetHeight}}function wi(n,t){t&&t.process&&f(n,"keydown",function(n){(!t.ctrl||n.ctrlKey)&&(!t.alt||n.altKey)&&(!t.shift||n.shiftKey)&&(t.key==null||t.key==(typeof t.key=="string"?n.key:n.keyCode))&&t.process(n)})}function e(i,r,u){var f=n.Collection.toArray(i),o,s;if(f&&!(f.length<1)){if(r==null){f.forEach(function(n){n.style.height=""});return}if(typeof r=="number"){if(isNaN(r))return;o=!u?r:u(r);o!=null&&(s=o+"px",f.forEach(function(n){n.style.height=s}));return}if(!r.parent){e(f,r.offsetHeight,u);t.listen(r,"resize",function(){e(f,r.offsetHeight,u)});return}e(f,window.innerHeight?window.innerHeight:document.body.clientHeight,u);window.addEventListener?window.addEventListener("resize",function(){e(f,window.innerHeight?window.innerHeight:document.body.clientHeight,u)}):n.Common.PageController.addResizeEvent(function(){e(f,window.innerHeight?window.innerHeight:document.body.clientHeight,u)})}}function o(i,r,u){var f=n.Collection.toArray(i),e,s;if(f&&!(f.length<1)){if(r==null){f.forEach(function(n){n.style.width=""});return}if(typeof r=="number"){if(isNaN(r))return;e=!u?r:u(e);s=e+"px";f.forEach(function(n){n.style.width=s});return}if(!r.parent){o(f,r.offsetWidth,u);t.listen(r,"resize",function(){o(f,r.offsetWidth,u)});return}o(f,window.innerWidth?window.innerWidth:document.body.clientWidth,u);window.addEventListener?window.addEventListener("resize",function(){o(f,window.innerWidth?window.innerWidth:document.body.clientWidth,u)}):n.Common.PageController.addResizeEvent(function(){o(f,window.innerWidth?window.innerWidth:document.body.clientWidth,u)})}}function bi(){var n=document.documentElement,t=(window.pageXOffset||n.scrollLeft)-(n.clientLeft||0),i=(window.pageYOffset||n.scrollTop)-(n.clientTop||0);return{x:t,y:i}}function ki(i){if(i){var u=n.Common.Reflection.unwrapObject(i.isEnding)===!0,f=!1;t.listen(window,"scroll",function(){var h,v,y,o,c;try{var s=t.getScroll(),p=t.getSize(window),w=t.getSize(document);if(!s||!p||!w){u=!1;return}if(h=r(i.titleOwner),!!h){var l=r(i.titleBar),a=r(i.titleShortBar),e=!!l&&!!l.offsetHeight?l.offsetHeight:0;if(!a||!a.offsetHeight||(e-=a.offsetHeight),v=!i.hiddenStyleRef?"ali-container-collapse-m":i.hiddenStyleRef.toString(),!i.titleHeight||(y=n.Common.Reflection.unwrapObject(i.titleHeight),typeof y=="number"&&(e+=y)),e<=0&&(e=1),s.y>e&&!f?(t.changeStyleRef(h,v),f=!f):s.y<e&&!!f&&(t.changeStyleRef(h,[],v),f=!f),o=n.Common.Reflection.unwrapObject(i.restHeight),o&&typeof o=="number"||(o=1),s.y+p.y+o<w.y){u=!1;return}}if(u)return;if(u=!0,!i.scrollEnd){u=!1;return}if(c=i.scrollEnd(),!c||!c.then){u=!1;return}c.then(function(){u=!1},function(){u=!1})}catch(b){u=!1;throw b;}})}}function di(t,i){var u=r(t),e,f;return!u||!i?undefined:(e=n.Collection.toStringArray(i),f=null,e.some(function(n){return u.hasAttribute(n)?(f=u.getAttribute(n),!0):!1}),f)}function gi(t,i,u){var f=r(t),e;return!f||!i?undefined:(u==null&&f.removeAttribute(i),e=n.Common.Text.serialize(u),f.setAttribute(i,e),e)}function nr(i,r,u){var f,e,o;return(u===void 0&&(u=!1),!r)?undefined:(f=t.getAttr(i,u?[r,"data-"+r]:r),f==null)?undefined:(f=n.Common.Text.trim(f),f.indexOf("{{")===0&&f.length>4)?eval("("+f.substring(2,f.length-2)+")"):(e=f.indexOf(":"),o=f.indexOf("{"),e>0&&(o<0||e<o))?eval("({"+f+"})"):e<0&&o<0&&f.indexOf("=")<0&&f.indexOf("'")<0&&f.indexOf('"')<0&&f.indexOf("(")<0&&f.indexOf(")")<0&&f.indexOf(" ")>0?f.indexOf(";")>=0?f.split(";"):f:eval("("+f+")")}function tr(i,r,u,f,e){var o;return(f===void 0&&(f=!1),e===void 0&&(e=!1),!i||!r||!u)?n.Common.Reflection.emptyDisposable():(o=n.Collection.toArray(r),o.forEach(function(n){var r=t.parseAttr(i,n,e);f&&r===undefined||(u[n]=r)}),t.attrChanged(i,o,function(r){var s=r.attrName||r.propertyName,h=t.parseAttr(i,s);e&&s.indexOf("data-")===0&&!n.Collection.contains(o,s.substring(5))&&(s=s.substring(5));f&&h===undefined||(u[s]=h)}))}function ir(i){var l,a,s,e,h,c;if(!i||!i.render)return null;var y=document.body.scrollWidth,p=document.body.scrollHeight,r=document.createElement("div");r.id=n.Common.Maths.randomString("page_hidden_tips_panel_i");r.className="ali-popup-zone-block";l=t.getById("ali_hidden");l?l.appendChild(r):document.body.appendChild(r);var f=new n.Common.VisualControl(r),o=t.getById(i.target),v=i.orientation==null?u.Bottom:i.orientation;f.target=function(){return o};f.orientation=function(){return v};f.getTargetSize=function(){return t.getSize(i.target)};f.getTargetPosition=function(){return t.getPosition(i.target)};f.timeout=function(){return i.timeout};f.isMenu=function(){return i.isMenu};a=!1;f.avoidCloseMenuOnce=function(n){return arguments.length>0&&(a=n),a};f.close=function(){f.dispose()};s={width:0,height:0};e=!o?t.getMousePosition(o):t.getPosition(o);!o||(s.width=o.offsetWidth,s.height=o.offsetHeight);r.style.position=i.fixed?"fixed":"absolute";e.x<0&&(e.x=0);e.y<0&&(e.y=0);switch(v){case u.Hidden:r.style.position="hidden";break;case u.Top:r.style.bottom=e.y.toString()+"px";r.style.left=e.x.toString()+"px";break;case u.Right:r.style.top=e.y.toString()+"px";r.style.left=(e.x+s.width).toString()+"px";break;case u.Bottom:r.style.top=(e.y+s.height).toString()+"px";r.style.left=e.x.toString()+"px";break;case u.Left:r.style.top=e.y.toString()+"px";r.style.right=e.x.toString()+"px";break;case u.Cover:r.style.top=e.y.toString()+"px";r.style.left=e.x.toString()+"px"}return i.render(f),h=t.getPosition(r),h.y+r.offsetHeight>p&&(r.style.top!=null&&r.style.top.length>0&&(r.style.bottom==null||r.style.bottom.length<1)&&h.y>r.offsetHeight?(r.style.top="",r.style.bottom="0px"):r.style.bottom=e.y.toString()+"px"),h.x+r.offsetWidth>y&&(r.style.left!=null&&r.style.left.length>0&&(r.style.right==null||r.style.right.length<1)&&h.x>r.offsetWidth?(r.style.left="",r.style.right="0px"):r.style.right=e.x.toString()+"px"),!i.adjust||i.adjust(f),f.timeout!=null&&f.timeout()>0&&setTimeout(function(){f.close()},f.timeout()),i.isMenu&&(c={h:null,r:function(){t.listenOnceLater(document,"click",c.h)}},c.h=function(){if(!f.avoidCloseMenuOnce()){f.close();return}f.avoidCloseMenuOnce(!1);c.r()},c.r()),f}function rr(n){var t,r,i,u;if(!n)return window.location.href;if(typeof Blob=="undefined"||typeof URL=="undefined"||!Blob||!URL)return null;if(t="text/xml",i="",!n.outerHTML){if(typeof XMLSerializer=="undefined"||!XMLSerializer)return null;!n.classList||(t="image/svg+xml");r=new XMLSerializer;i=r.serializeToString(n)}else t="text/html",i=n.outerHTML;return u=new Blob([i],{type:t}),URL.createObjectURL(u)}function ur(i){var r;if(!i||!i.target||(r=t.getById(i.target),!r))return n.Common.Reflection.emptyDisposable();var f=new n.Collection.DisposableArray,u=r.value!=null?r.value:r.innerHTML,e=i.suggest?function(){var t=r.value!=null?r.value:r.innerHTML,n;t!=u&&(n=300,i.lazy==null||isNaN(i.lazy)||(n=i.lazy),setTimeout(function(){var n=r.value!=null?r.value:r.innerHTML;u!=n&&t==n&&(u=n,i.suggest(u))},n))}:function(){};return f.push(t.listen(r,"input",function(){e()})),f.push(t.listen(r,"paste",function(){e()})),f.push(t.listen(r,"cut",function(){e()})),f.push(t.listen(r,"blur",function(){var n=r.value!=null?r.value:r.innerHTML;u!=n&&i.suggest&&(u=n,i.suggest(u))})),f.push(t.listen(r,"keydown",function(n){if(r){if(n.keyCode===13){var t=r.value!=null?r.value:r.innerHTML;!i.suggest||i.ignoreSuggestForEnter?u=r.value!=null?r.value:r.innerHTML:i.suggest(t);!i.enter||i.enter(t);return}if(n.keyCode===27){!r.value||(r.value="");e();return}}})),!i.button||f.push(t.listen(t.getById(i.button),"click",function(){var n=r.value!=null?r.value:r.innerHTML;!i.suggest||i.ignoreSuggestForEnter?u=r.value!=null?r.value:r.innerHTML:i.suggest(n);!i.enter||i.enter(n)})),f}function fr(i){var r=t.getById(i.target),f=t.getById(i.expandButton),e=t.getById(i.collapseButton),u;return r?(u=new n.Collection.DisposableArray,i.isExpanded?t.changeStyleRef(r,[],"ali-container-collapse-s"):t.changeStyleRef(r,"ali-container-collapse-s"),u.push(t.listen(f,"click",function(){t.changeStyleRef(r,[],"ali-container-collapse-s")})),u.push(t.listen(e,"click",function(){t.changeStyleRef(r,"ali-container-collapse-s")})),u):n.Common.Reflection.emptyDisposable()}function er(i,r){for(var f,e=[],u=2;u<arguments.length;u++)e[u-2]=arguments[u];return i?(f=function(i){var u=t.getById.apply(t,[r].concat(e));!u||(u.innerHTML=n.Common.Text.toHTML(!i?"":i.toString()))},f(i()),i.subscribe(f)):{dispose:function(){},useless:!0}}function or(n,i,r){for(var f,e=[],u=3;u<arguments.length;u++)e[u-3]=arguments[u];return n?(f=function(n){var u=t.getById.apply(t,[r].concat(e));!u||(u[i]=!n?"":n.toString())},f(n()),n.subscribe(f)):{dispose:function(){},useless:!0}}var i={webcomponents:[],regMsgHs:null},u,y,p,w,b;t.hiddenForm=k;t.postMessagePackage=d;t.manualReceiveMessagePackage=g;t.listenMessagePackage=nt;t.unlistenPackageMessage=v;t.getControlRegisteredForTag=tt;t.hasControlRegisteredForTag=it;t.register=rt;t.registerControlAsWebComponent=ut;t.openPage=ft;t.getTop=s;t.getLeft=h;t.getPosition=et;t.getMousePosition=ot;t.getById=r;t.inElement=st;t.createChildren=ht;t.childNodes=ct;t.changeStyleRef=lt;t.addStyleRef=at;t.removeStyleRef=vt;t.changeStyleClass=yt;t.addStyleClass=pt;t.removeStyleClass=wt;t.sanitizeHTML=bt;t.mergeId=l;t.getQueryInfo=kt;t.getQueryObj=dt;t.getQuery=gt;t.getStringQuery=ni;t.queryField=ti;t.toQueryString=ii;t.getPageAddress=ri;t.fullScreen=ui;t.cancelFullScreen=fi;t.listen=f;t.listenOnce=ei;t.listenOnceLater=oi;t.addEvent=si;t.unlisten=a;t.removeEvent=hi;t.processAll=ci;t.parseCssRules=li;t.addGesture=ai;t.onClick=vi;t.attrChanged=yi;t.getSize=pi;t.shortcutKey=wi;t.adaptHeight=e;t.adaptWidth=o;t.getScroll=bi;t.listenScroll=ki;t.getAttr=di;t.setAttr=gi;t.parseAttr=nr;t.listenAttr=tr;t.popup=ir;t.url=rr;t.lazySearch=ur;t.collapse=fr;t.bindText=er;t.bindProp=or,function(n){n[n.Hidden=0]="Hidden";n[n.Top=1]="Top";n[n.Right=2]="Right";n[n.Bottom=3]="Bottom";n[n.Left=4]="Left";n[n.Cover=5]="Cover"}(u=t.PeripheralOrientations||(t.PeripheralOrientations={}));y=function(t){function i(i){var r=t.call(this,i)||this,e,o,u,f;return r.name=n.Common.listenedObj(),r.icon=n.Common.listenedObj(),r.clicked=new n.Collection.EventHandlers,r.model=n.Common.listenedObj(),r.enableNameHTML=!1,r.span=0,r.addStyleRef("ali-controls-button"),e=r.appendElement("span","icon","ali-x-section-icon"),o=r.appendElement("span","name","ali-x-section-name"),r.name.subscribe(function(t){o.innerHTML=r.enableNameHTML?(t||"").toString():n.Common.Text.toHTML(t,!0)}),r.icon.subscribe(function(t){if(e.innerHTML="",t){var i=n.Graph.imageElement(t);i&&e.appendChild(i)}}),u=null,f=0,r.listen("click",function(n){var t=new Date,e=u,i;try{u!=null&&u.getTime?(i=t.getTime()-u.getTime(),i>=0&&i<=r.span?f++:f=0):f=0}catch(o){f=0}u=t;r.clicked.raise({times:f,latest:e,current:t,span:r.span,event:n||event})}),r}return __extends(i,t),i.prototype.loadOptions=function(n){var i=t.prototype.loadOptions.call(this,n);return i?(!i.name||this.name(i.name),!i.icon||this.icon(i.icon),!i.model||this.name(i.model),i.span!=null&&(this.span=i.span),!i.action||typeof i.action!="function"||this.clicked.add(function(n){i.action(n)}),i):i},i}(n.Common.VisualControl);t.ButtonControl=y;p=function(t){function i(i){var r=t.call(this,i)||this;return r.name=n.Common.listenedObj(),r.selected=n.Common.listenedObj(!1),r.nameIsHTML=n.Common.listenedObj(!1),r.model=n.Common.listenedObj(),r.unselectOthers=n.Common.listenedObj(!1),r.disableSelectByUI=n.Common.listenedObj(!1),r.checkboxIcon=n.Common.listenedObj(),r.radioIcon=n.Common.listenedObj(),r.addStyleRef("ali-controls-checkbox","ali-x-state-selected-f"),r.appendElementByDef({idSuffix:"main",styleRef:"ali-container-main",children:[{idSuffix:"select",tagName:"span",styleRef:"ali-x-field-select ali-x-field-select-checkbox",children:[{element:n.Graph.imageElement(r.checkboxIcon())}]},{idSuffix:"name",tagName:"span",styleRef:"ali-x-field-name"}]}),r.name.subscribe(function(){r.refreshName()}),r.nameIsHTML.subscribe(function(){r.refreshName()}),r.selected.subscribe(function(n){(r.styleRef(n?"ali-x-state-selected-t":"ali-x-state-selected-f",n?"ali-x-state-selected-f":"ali-x-state-selected-t"),n&&r.unselectOthers())&&r.forEachControl(function(n){n!==r&&n.selected(!1)})}),r.listen("click",function(){r.disableSelectByUI()||r.unselectOthers()&&r.selected()||r.selected(!r.selected())},"main"),r.unselectOthers.subscribe(function(t){var i=r.getChildElement("main","select"),u;i&&(i.innerHTML="",u=n.Graph.imageElement(t?r.radioIcon():r.checkboxIcon()),i.appendChild(u),r.styleRef(t?"ali-x-field-select-radio":"ali-x-field-select-checkbox",t?"ali-x-field-select-checkbox":"ali-x-field-select-radio","main","select"))}),r.checkboxIcon.subscribe(function(t){var i=r.getChildElement("main","select"),u;i&&!r.unselectOthers()&&(i.innerHTML="",u=n.Graph.imageElement(t),i.appendChild(u))}),r.radioIcon.subscribe(function(t){var i=r.getChildElement("main","select"),u;i&&r.unselectOthers()&&(i.innerHTML="",u=n.Graph.imageElement(t),i.appendChild(u))}),r}return __extends(i,t),i.prototype.loadOptions=function(n){var i=t.prototype.loadOptions.call(this,n);return i.name&&this.name(i.name),i.model!=null&&this.model(i.model),i.select&&this.selected(i.select),i.selected&&this.selected.listen(i.selected),i.unselectOthers&&this.unselectOthers(!0),i.checkboxIcon&&this.checkboxIcon(i.checkboxIcon),i.radioIcon&&this.checkboxIcon(i.checkboxIcon),i},i.prototype.refreshName=function(){var i=this.getChildElement("main","name"),t;return i?(t=(this.nameIsHTML()?this.name():n.Common.Text.toHTML(this.name()))||"",i.innerHTML=t,t):null},i.prototype.forEachControl=function(t,i){var r=[],u;return this.selected()&&r.push(this),this.getGroup&&typeof this.getGroup=="function"&&(u=this.getGroup(),u&&u.forEach&&u.forEach(function(t){var i=n.Common.getControl(t);i&&i.selected&&typeof i.selected=="function"&&!n.Collection.contains(r,i)&&r.push(i)})),t&&r.forEach(t,i),r.length},i.prototype.getSelectedModels=function(){var t=[];return this.forEachControl(function(i){i.selected()&&!n.Collection.contains(t,i.model())&&t.push(i.model())}),t},i.prototype.getSelectedControls=function(){var t=[];return this.forEachControl(function(i){i.selected()&&!n.Collection.contains(t,i)&&t.push(i)}),t},i.prototype.setGroupControls=function(){for(var t,r,u=[],i=0;i<arguments.length;i++)u[i]=arguments[i];return t=[this],this.unselectOthers(!0),r=function(){return t},this.getGroup=r,u.forEach(function(i){var u=n.Collection.toArray(i);u.forEach(function(i){var u=n.Common.getControl(i);u&&u.selected&&typeof u.selected=="function"&&u.unselectOthers&&typeof u.unselectOthers=="function"&&!n.Collection.contains(t,u)&&(u.unselectOthers(!0),u.getGroup=r,t.push(u))})}),t.length},i}(n.Common.VisualControl);t.CheckboxControl=p;w=function(){function n(n){this.name="ali-hub-container-expand";this._col=n}return n.prototype.model=function(){return{info:this._col}},n.prototype.load=function(n){var r=this,i=!1;n.subscribeViewModel(function(){i||(r._col.forEach(function(i){var r=t.getById(n,i.targetIdPart),u=t.getById(n,i.expandIdPart),f=t.getById(n,i.collapseIdPart);t.collapse({target:r,expandButton:u,collapseButton:f,isExpanded:i.isExpanded})}),i=!0)})},n}();t.CollapseExtender=w;b=function(){function i(t){this._info=[];this.name="ali-nine-search";this.lazy=300;this.autoFocus=!0;this._info=n.Collection.toArray(t)}return i.prototype.load=function(n){var r=this,i;this._info&&(this._info.forEach(function(i){var f=n.getChildElement(!0,i.inputIdPart),e=!i.buttonIdPart?null:n.getChildElement(!0,i.buttonIdPart),u=r.lazy;i.lazy==null||isNaN(i.lazy)||(u=i.lazy);t.lazySearch({target:f,button:e,enter:i.enter,suggest:i.suggest,lazy:u,ignoreSuggestForEnter:i.ignoreSuggestForEnter})}),this.autoFocus&&this._info.length===1&&!!this._info[0].inputIdPart&&(i=n.getChildElement(!0,this._info[0].inputIdPart),!!i&&i.focus&&i.focus()))},i}();t.SearchExtender=b})(t=n.Elements||(n.Elements={}))}(AliHub||(AliHub={})),function(n){var t;(function(t){function u(t){var i,u,o,f,c,r,h,l,e,y;if(!t||(i=t,t.type||!t.subscribe||(i=t()),!i||!i.type))return null;u=n.Collection.toStringArray(i.styleRef,!0);switch(i.type.toString().toLowerCase()){case"url":if(o=i,f=document.createElement("img"),!o.url||(f.src=o.url),!o.name||(f.alt=o.name),f.className="ali-image-icon",!!i.styleRef)for(h in u)f.className+=" "+u[h];return f;case"string":if(c=i,r=document.createElement("span"),r.innerHTML=c.value,r.style.color=c.color,r.style.backgroundColor=c.bgColor,r.className="ali-image-icon",!!i.styleRef)for(h in u)r.className+=" "+u[h];return r;case"svg":if(l=i,!l.source)return null;try{var a=document.createElement("span"),s=l.source.toString(),v=s.indexOf("<svg ");return s===""||v<0?null:(s=s.substring(v),a.innerHTML=s,e=a.children[0],!i.styleRef||!e||!e.classList||!e.classList.add||(y=e.classList).add.apply(y,u),e)}catch(p){return null}default:return null}}function f(t){var h,s,u,c,f,i,r,l,a,v,y;if(!t)return[];for(h=[],s=0;s<t.length-1;s++){if(u=t[s],!u){h.push(null);continue}for(c=1;c<t.length;){if(f=t[s+c],!!f)break;c++}i={x:u.x,y:u.y,rate:50,side:n.Elements.PeripheralOrientations.Cover};r={x:f.x,y:f.y,rate:50,side:n.Elements.PeripheralOrientations.Cover};h.push({start:i,end:r});var e=((f.width||0)-(u.width||0))/2+r.x-i.x,o=((f.height||0)-(u.height||0))/2+r.y-i.y,p=Math.abs(e)>Math.abs(o);u.width!=null&&u.height!==null&&(p?(e>0?(i.side=n.Elements.PeripheralOrientations.Right,i.x+=u.width):i.side=n.Elements.PeripheralOrientations.Left,l=u.height/10,(o>l||o<-l)&&(i.rate=o>0?60:40),i.y+=u.height*i.rate/100):(o>0?(i.side=n.Elements.PeripheralOrientations.Bottom,i.y+=u.height):i.side=n.Elements.PeripheralOrientations.Top,a=u.width/10,(e>a||e<-a)&&(i.rate=e>0?60:40),i.x+=u.width*i.rate/100));f.width!=null&&f.height!==null&&(p?(e>0?r.side=n.Elements.PeripheralOrientations.Left:(r.side=n.Elements.PeripheralOrientations.Right,r.x+=f.width),v=f.height/10,(o>v||o<-v)&&(r.rate=o>0?40:60),r.y+=f.height*r.rate/100):(o>0?r.side=n.Elements.PeripheralOrientations.Top:(r.side=n.Elements.PeripheralOrientations.Bottom,r.y+=f.height),y=f.width/10,(e>y||e<-y)&&(r.rate=e>0?40:60),r.x+=f.width*r.rate/100))}return h}var i,r;t.imageElement=u;t.lines=f;i=function(){function n(){}return n.genProgressBarHTML=function(n,t){for(var u='<svg class="chart-progress-img" viewBox="0 0 104 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><title>Progress Bar<\/title><desc>Chart of progress bar.<\/desc><defs><linearGradient id="chart-progress-fill" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" class="chart-progress-fill-0" /><stop offset="100%" class="chart-progress-fill-100" /><\/linearGradient><\/defs><g id="ProgressBar" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><g id="chart-progress-rec" sketch:type="MSArtboardGroup" ><rect id="chart-progress-rec-b" stroke="url(#chart-progress-fill)" sketch:type="MSShapeGroup" x="0" y="0" width="104" height="20" rx="4" ry="4"><\/rect>',r=100/t,f=parseInt((n/r).toFixed()),i=0;i<f;i++)u+='<rect id="chart-progress-rec-f'+i.toString()+'" fill="url(#chart-progress-fill)" sketch:type="MSShapeGroup" x="'+(i*r+3).toString()+'" y="2" width="'+(r-2).toString()+'" height="16" rx="2" ry="2"><\/rect>';return u+"<\/g><\/g><\/svg>"},n.genIsoscelesRightTriangle=function(n){var t=(45+n)*Math.PI/180,i=Math.sin(Math.PI/4),r=Math.sin(t),u=Math.cos(t),e=100*r,o=100*(i-u),f=n+45;return'<svg version="1.1" id="graph-polygon-tri-ir" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" xml:space="preserve"><polygon points="15,15 15,85 85,15" fill="#CCC" stroke="#CCC" stroke-width="1" transform="rotate('+f.toString()+' 50, 50)"/><\/svg>'},n}();t.Chart=i;r=function(){function n(){}return n.radar=function(){},n.line=function(){},n.pie=function(){},n}();t.Extensions=r})(t=n.Graph||(n.Graph={}))}(AliHub||(AliHub={})),function(n){var t;(function(t){function f(n){if(!n)return null;try{var t=new window.SpeechSynthesisUtterance(n);return window.speechSynthesis.speak(t),n}catch(i){}return null}function e(){return!!window.AudioContext||!!window.webkitAudioContext?new(window.AudioContext||window.webkitAudioContext):null}function o(t,i,u){return n.Common.createControl(t,r,i,u)}function s(t,r,u){return n.Common.createControl(t,i,r,u)}var r=function(t){function i(i){var r=t.call(this,i)||this,u;return r._paths=[],r.name=n.Common.bindingObj(),r.album=n.Common.bindingObj(),r.artist=n.Common.bindingObj(),r.model=n.Common.bindingObj(),r.keypoints=n.Collection.bindingArray(),r.voiceLoaded=new n.Collection.EventHandlers,r.played=new n.Collection.EventHandlers,r.paused=function(){return r._audio.paused},r.autoplay=function(n){return typeof n!="undefined"&&n!==void 0&&(r._audio.autoplay=n),r._audio.autoplay},r.volume=function(n){return typeof n!="undefined"&&n!==void 0&&(r._audio.volume=n),r._audio.volume},r.playbackRate=function(n){return typeof n!="undefined"&&n!==void 0&&(r._audio.playbackRate=n),r._audio.playbackRate},r.muted=function(n){return typeof n!="undefined"&&n!==void 0&&(r._audio.muted=n),r._audio.muted},r.defaultPlaybackRate=function(n){return typeof n!="undefined"&&n!==void 0&&(r._audio.defaultPlaybackRate=n),r._audio.defaultPlaybackRate},r.canPlayType=function(n){return r._audio.canPlayType(n)},r.currentTime=function(n){return typeof n!="undefined"&&n!==void 0&&(r._audio.currentTime=n),r._audio.currentTime},r.addStyleRef("ali-controls-audio"),u=document.createElement("div"),u.id=r.getId()+"_v",u.style.display="none",r.appendElement(u),r._renew(),!window.AudioContext&&!window.webkitAudioContext||(r._audioCtx=new(window.AudioContext||window.webkitAudioContext)),r}return __extends(i,t),i.prototype.contain=function(n){return this._paths.some(function(t){return n===t.key})},i.prototype.client=function(){return this._initClient(),this._client},i.prototype.sound=function(n,t){return this.soundSet([{key:n,value:t}])},i.prototype.soundSet=function(n,t){var e=this,i,r,u,f;if(t===void 0&&(t=!1),arguments.length>0){this.keypoints(null);i=this._audio.autoplay;r=this._audio.preload;try{!!this._paths&&this._paths.length>0&&(this._audio.pause(),this._audio.currentTime=0)}catch(o){}try{this._audio.outerHTML=""}catch(o){}this._paths=[];this._renew();!n||n.forEach(function(n){var t=document.createElement("source");t.setAttribute("src",n.key);t.setAttribute("type",n.value);e._audio.appendChild(t);e._paths.push(n)});t&&!!this._audio.load&&this._audio.load();i!=null&&(this._audio.autoplay=i);r!=null&&(this._audio.preload=r);u=document.createElement("div");u.innerHTML=this._text;this._audio.appendChild(u)}return f=[],this._paths.forEach(function(n){f.push(n.key)}),f},i.prototype.unsupportedText=function(n){return arguments.length>0&&(this._text=n),this._text},i.prototype.loadOptions=function(n){var i=t.prototype.loadOptions.call(this,n);return i?(!i.unsupportedText||this.unsupportedText(i.unsupportedText.toString()),i.ignoreParts||this.set_template("initpart",null),this.set_template(i.templateType,i.template),i):null},i.prototype.set_template=function(t,i){if((t!=null||i!=null)&&n.Elements.getById(this.getId(),"v")){var r=this.getChildElement(!0,"v");if(this._bindingControl(),this._bindings.bindViewModel(this.model),this._bindings.info(this.client()),t==="part"||t==="initpart"){if(i=this.templatePart(!i?"":i),t==="initpart"&&!i)return;t=""}this._bindings.setTemplate(t,i);r.style.display="";this._audio.style.display="none"}},i.prototype.addExtender=function(n){this._bindingControl().addExtender(n)},i.prototype.removeExtender=function(n){this._bindingControl().removeExtender(n)},i.prototype.clearExtenders=function(){this._bindingControl().clearExtenders()},i.prototype.play=function(){this._paths&&this._audio&&this._audio.play()},i.prototype.pause=function(){this._paths&&this._audio&&this._paths.length!==0&&this._audio.pause()},i.prototype.copyBinding=function(n){n.info(this.client());n.bindViewModel(this.model)},i.prototype._initClient=function(){var t=this,i;this._client||(i={sourceNode:function(){return!t._audioCtx?null:t._audioCtx.createMediaElementSource(t._audio)},initialTime:function(){return t._audio.initialTime},readyState:function(){return t._audio.readyState},autobuffer:function(){return t._audio.autobuffer},loop:function(n){return typeof n!="undefined"&&n!==void 0&&(t._audio.loop=n),t._audio.loop},ended:function(){return t._audio.ended},buffered:function(){return t._audio.buffered},pause:function(){t.paused()||t.pause()},paused:function(){return t.paused()},play:function(){t.paused()&&t.play()},played:this.played,loaded:this.voiceLoaded,error:function(){return t._audio.error},seekable:function(){return t._audio.seekable},autoplay:function(n){return typeof n!="undefined"&&n!==void 0&&t.autoplay(n),t.autoplay()},preload:function(n){return typeof n!="undefined"&&n!==void 0&&(t._audio.preload=n),t._audio.preload},volume:function(n){return typeof n!="undefined"&&n!==void 0&&t.volume(n),t.volume()},playbackRate:function(n){return typeof n!="undefined"&&n!==void 0&&t.playbackRate(n),t.playbackRate()},duration:function(){return t._audio.duration},muted:function(n){return typeof n!="undefined"&&n!==void 0&&t.muted(n),t.muted()},defaultPlaybackRate:function(n){return typeof n!="undefined"&&n!==void 0&&t.defaultPlaybackRate(n),t.defaultPlaybackRate()},canPlayType:function(n){return t.canPlayType(n)},seeking:function(){return t._audio.seeking},currentTime:function(n){return typeof n!="undefined"&&n!==void 0&&t.currentTime(n),t.currentTime()},keypoints:this.keypoints,sound:function(n,r){return t.sound(n,r),i.changed.raise(t.soundSet()),t.soundSet()},soundSet:function(n){return typeof n!="undefined"&&n!==void 0&&(t.soundSet(n),i.changed.raise(t.soundSet())),t.soundSet()},clear:function(){t.soundSet(null)},contain:function(n){return t.contain(n)},changed:new n.Collection.EventHandlers,name:this.name,album:this.album,artist:this.artist,model:this.model},this._client||(this._client=i))},i.prototype._bindingControl=function(){var i=this,t;return!this._bindings?(t=this.getChildElement(!0,"v"),!t)?this._bindings:(this._bindings=new n.Common.BindingControl(t.id),this.propChanged.add(function(n){!n||i._bindings.prop(n.key,n.value)}),this._bindings):this._bindings},i.prototype._renew=function(){var t=this;this._audio=typeof Audio=="undefined"?document.createElement("audio"):new Audio;this._audio.id=this.getId()+"_a";n.Elements.listen(this._audio,"play",function(){t.played.raise(!0)});n.Elements.listen(this._audio,"pause",function(){t.played.raise(!1)});n.Elements.listen(this._audio,"load",function(){t.voiceLoaded.raise(t.soundSet())});this.appendElement(this._audio)},i}(n.Common.VisualControl),u,i;t.AudioControl=r;u=function(){function t(){this.name="ali-hub-player-audio";this.interval=300;this.autoRefresh=!0}return t.prototype.model=function(n){var t=this;return{refresh:function(i){return i===void 0&&(i=!0),t.refresh(n,i)}}},t.prototype.player=function(n){return n.info()},t.prototype.load=function(t){var s=this,r=this.player(t),e,u,f,i,o;r&&(e=t.getChildElement(!0,"c","cnt","actions","play"),u=t.getChildElement(!0,"c","cnt","actions","pause"),!u||(u.style.display="none"),f={},this.autoRefresh&&this.refresh(t),f.played=r.played.add(function(n){t.getElement()||!f.played||f.played.dispose();n?s.refresh(t):(!e||(e.style.display=""),!u||(u.style.display="none"))}),i=t.getChildElement(!0,"c","cnt","progress","bar"),!i||n.Elements.listen(i,"click",function(){if(i.offsetWidth){var r=n.Elements.getMousePosition(i);r&&r.x!=null&&(s.turnToPercents(t,r.x,i.offsetWidth),n.Elements.changeStyleRef(i,null,"ali-state-active-t"))}}),o=t.getChildElement(!0,"c","cnt","progress","bar","drag"),!o||n.Elements.addGesture(i,{moving:function(){var t=n.Elements.getMousePosition(i);(t.x<0?t.x=0:t.x>i.offsetWidth&&(t.x=i.offsetWidth),t.x&&!isNaN(t.x))&&(o.style.left=t.x.toString()+"px",n.Elements.changeStyleRef(i,"ali-state-active-t"))},moveEnd:function(){var t=r.duration(),u,f;if(!t||isNaN(t)){n.Elements.changeStyleRef(i,null,"ali-state-active-t");return}if(u=n.Elements.getMousePosition(i),f=u.x*1/i.offsetWidth*t,!u.x||isNaN(u.x)){n.Elements.changeStyleRef(i,null,"ali-state-active-t");return}f<0?u.x=0:f>t&&(f=t);r.play();r.currentTime(f);n.Elements.changeStyleRef(i,null,"ali-state-active-t")}}))},t.prototype.turnToPercents=function(n,t,i){var r,u;(i===void 0&&(i=100),t<0||i<0||t>i)||(r=this.player(n),r&&r.duration())&&(u=r.duration()*t/i,r.currentTime(u))},t.prototype.refresh=function(t,i){var p=this,r,a,v,o,f,h,e,c,l,y;if(i===void 0&&(i=!0),r=this.player(t),r&&t.parentElement()){if(a=t.getChildElement(!0,"c","cnt","actions","play"),v=t.getChildElement(!0,"c","cnt","actions","pause"),r.paused()){a.style.display="";v.style.display="none";return}a.style.display="none";v.style.display="";var w=t.getChildElement(!0,"c","cnt","progress","bar"),b=t.getChildElement(!0,"c","cnt","progress","bar","bg"),s=r.currentTime()!=null&&!isNaN(r.currentTime())&&r.currentTime()>0?r.currentTime():null,u=r.duration()!=null&&!isNaN(r.duration())&&r.duration()>0?r.duration():null;!u||!s||(o=r.currentTime()*100/r.duration(),o>100?o=100:o<0&&(o=0),f=o.toString(),h=f.indexOf("."),h===0?f="0"+f:h<f.length-4&&(f=f.substring(0,h+4)),b.style.width=f+"%");t.getChildElement(!0,"c","cnt","time","current").innerHTML=!s?"":n.Common.DateTime.toSpanString(s*1e3,!1);t.getChildElement(!0,"c","cnt","time","rest").innerHTML=!!u&&!!s?n.Common.DateTime.toSpanString((u-s)*1e3,!1):"";t.getChildElement(!0,"c","cnt","time","duration").innerHTML=!u?"":n.Common.DateTime.toSpanString(u*1e3,!1);e=t.getChildElement(!0,"c","cnt","progress","bar","kp");!r.keypoints||!u?(!e||(e.innerHTML=""),e.style.display="none"):(c=n.Elements.getSize(w),l=r.keypoints(),!l||!(l.length>0)||!c||!c.x||!e||(e.style.display="",y="",l.forEach(function(n,t){!n||!n.time||n.time<0||n.time>u||(y+='<span style="left: '+(n.time/u*c.x).toFixed(0)+'px; " class="ali-container-main"'+(!n.note?"":' title="'+n.note.toString()+'"')+">"+t.toString()+"<\/span>")}),e.innerHTML=y));i&&setTimeout(function(){p.refresh(t)},this.interval)}},t}();t.AudioExtender=u;i=function(t){function i(i){var r=t.call(this,i)||this;return r._mediaStream=null,r._currentCam=null,r._count=0,r.canSwitch=n.Common.bindingObj(!0),r.viewWidth=640,r.viewHeight=360,r.captured=new n.Collection.EventHandlers,r.filePrefix="WEBCAM",r.notSupportModel=n.Common.bindingObj(),r.isDesc=n.Common.bindingObj(!1),r.addStyleRef("ali-controls-camera"),r.innerHTML('<div id="__view_control_actions"><button id="__view_control_actions_switch" type="button" disabled="disabled">'+n.Res.builtIn().localString("switchCamera")+'<\/button><\/div><video id="__view_control_video" class="ali-container-main"><\/video><div id="__view_control_invalid" style="display: none;"><\/div><ul id="__view_control_captured" class="ali-container-main"><\/ul>'),r.listen("click",function(){r.capture()},"video"),r.listen("click",function(){r.nextWebCam()},"actions","switch"),r.canSwitch.subscribe(function(n){n!=null&&(r.getChildElement(!0,"actions","switch").disabled=n)}),r}return __extends(i,t),i.prototype.loadOptions=function(n){var i=t.prototype.loadOptions.call(this,n);return i?(!i.captured||this.captured.add(function(n){i.captured(n)}),i.isDesc!=null&&this.isDesc(i.isDesc),i.filePrefix!=null&&(this.filePrefix=i.filePrefix.toString()),i.viewWidth!=null&&(this.viewWidth=i.viewWidth),i.viewHeight!=null&&(this.viewHeight=i.viewHeight),!i.photoModelConvert||(this.photoModelConvert=i.photoModelConvert),i.ignoreParts||(this.setPhotoTemplate("initpart",null),this.setNotSupportTemplate("initpart",null)),this.setPhotoTemplate(i.photoTemplateType,i.photoTemplate),this.setNotSupportTemplate(i.notSupportTemplateType,i.notSupportTemplate),this.available()?i.lazyLoad||this.start():!i.failedLoad||i.failedLoad(),i):i},i.prototype.nextWebCam=function(){var i=this,t,r;this.canSwitch(!1);t=this.getChildElement(!0,"video");this._currentCam!==null?(this._currentCam++,this._currentCam>=this._webcamList.length&&(this._currentCam=0),typeof t.srcObject!="undefined"&&(t.srcObject=null),t.src=null,this._mediaStream&&(r=this._mediaStream.getVideoTracks(),r[0].stop(),this._mediaStream=null)):this._currentCam=0;navigator.mediaDevices.getUserMedia({video:{width:this.viewWidth,height:this.viewHeight,deviceId:{exact:this._webcamList[this._currentCam]}}}).then(function(r){i._mediaStream=r;t.srcObject=i._mediaStream;t.paused&&t.play();n.Elements.changeStyleRef(t,"ali-info-filled-t");i._webcamList.length>1&&i.canSwitch(!0)}).catch(function(n){i._getUserMediaError(n)})},i.prototype.capture=function(){var p=this,u,r,l,a,f,e,w,v,y,s,h;if(this._mediaStream){try{this._count++}catch(b){this._count=0}var c=this.getChildElement(!0,"video"),t=document.createElement("canvas"),o=this.getChildElement("captured"),i=document.createElement("li");i.id=this.getId()+"_captured_i"+this._count.toString();u=document.createElement("button");u.type="button";u.value=n.Res.builtIn().localString("download");u.innerHTML=n.Res.builtIn().localString("download");this.isDesc()&&o.firstElementChild?o.insertBefore(i,o.firstElementChild):o.appendChild(i);i.appendChild(t);i.appendChild(u);r=document.createElement("a");r.innerHTML=n.Res.builtIn().localString("download");r.style.display="none";l=new Date;a=(this.filePrefix||"")+n.Common.DateTime.toCustomizedString(l,"{{yyyy}}{{MM}}{{dd}}{{HH}}{{mm}}{{ss}}{{mmm}}");i.appendChild(r);f=c.videoWidth;e=c.videoHeight;(t.width!==f||t.height!==e)&&(t.width=f,t.height=e);w=t.getContext("2d");w.drawImage(c,0,0,f,e);v=function(){if(navigator.msSaveBlob){var n=t.msToBlob("image/jpeg");navigator.msSaveBlob(n,a+".jpg")}else r.href=t.toDataURL("image/jpeg"),r.download=a+".jpg",r.click()};n.Elements.listen(u,"click",v);y=function(){return{image:function(n){return{type:"url",url:t.toDataURL("image/jpeg"),styleRef:n}},captured:l,download:v,size:{x:f,y:e}}};!this._photoTempT&&!this._photoTempV||(s=document.createElement("div"),s.id=i.id+"_b",i.appendChild(s),h=new n.Common.BindingControl(s),h.setTemplate(this._photoTempT,this._photoTempV),h.viewModel(y()),h.convertor(function(n){return!p.photoModelConvert?null:p.photoModelConvert(n)}));this.captured.raise(y())}},i.prototype.start=function(){var t=this;this.available()&&navigator.mediaDevices.enumerateDevices().then(function(i){t._webcamList=[];for(var r=0;r<i.length;r++)i[r].kind==="videoinput"&&(t._webcamList[t._webcamList.length]=i[r].deviceId);t._webcamList.length>0?(t.nextWebCam(),t.canSwitch(t._webcamList.length>1)):n.Diagnostics.error("CoreLibrary","[0x02710501] Webcam not found.");n.Elements.listen(navigator.mediaDevices,"devicechange",function(){t.deviceChanged()})}).catch(function(n){t._getUserMediaError(n)})},i.prototype.available=function(){return navigator.getUserMedia},i.prototype.deviceChanged=function(){var t=this;n.Elements.unlisten(navigator.mediaDevices,"devicechange",function(){t.deviceChanged()});this._webcamList=[];this.start()},i.prototype.setPhotoTemplate=function(n,t){if(n!=null||t!=null){if(n==="part"||n==="initpart"){if(t=this.templatePart(!t?"":t),t||(t=this.templatePart(!t?"photo":t)),n==="initpart"&&!t)return;n=""}this._photoTempT=n;this._photoTempV=t}},i.prototype.setNotSupportTemplate=function(n,t){if(n!=null||t!=null){if(n==="part"||n==="initpart"){if(t=this.templatePart(!t?"":t),t||(t=this.templatePart(!t?"notsupport":t)),n==="initpart"&&!t)return;n=""}this._invalidTempT=n;this._invalidTempV=t}},i.prototype._getUserMediaError=function(t){t.name.indexOf("NotFoundError")>=0?n.Diagnostics.error("CoreLibrary","[0x02712301] Webcam not found."):n.Diagnostics.error("CoreLibrary","[0x02712302] The following error occurred: "+t.name+". Please check your webcam device(s) and try again.")},i}(n.Common.VisualControl);t.CameraControl=i;t.speak=f;t.audioContext=e;t.audioControl=o;t.cameraControl=s})(t=n.Media||(n.Media={}))}(AliHub||(AliHub={})),function(n){var t;(function(t){function r(n,t){t===void 0&&(t=!1);n?i.generatePage(typeof n=="string"?n:null):i.init(t)}var i=function(){function i(){}return i.loadOptions=function(n){i.appCenterUrl=n.appCenterUrl;i.bodyPanelId=n.bodyPanelId;i.headerPanelId=n.headerPanelId;i.coverPanelId=n.coverPanelId;i.hiddenPanelId=n.hiddenPanelId;i.messageUrl=n.messageUrl;i.feedbackUrl=n.feedbackUrl;i.signOutUrl=n.signOutUrl;i.menu=n.menu;i.path=n.path;i.isLastNodeInPath=n.isLastNodeInPath;i.homeInfo=n.homeInfo;i.searchIcon=n.searchIcon;i.searchTip=n.searchTip;i.searchProvider=n.searchProvider;i.searchTarget=n.searchTarget;i.optionsBar=n.optionsBar;i.minSize=n.minSize;i.maxSize=n.maxSize},i.getWindowSize=function(){return this._size},i.refreshLayout=function(){var r=null,e=["ali-size-xxxl","ali-size-xxl","ali-size-xl","ali-size-l","ali-size-m","ali-size-s","ali-size-xs","ali-size-xxs","ali-size-xxxs"],f=[],u,t,s,o,h;for(r=window.innerWidth>4e3?0:window.innerWidth>2400?1:window.innerWidth>1600?2:window.innerWidth>1300?3:window.innerWidth>900?4:window.innerWidth>640?5:window.innerWidth>480?6:window.innerWidth>320?7:8,!i.minSize||(u=n.Collection.indexOf(e,"ali-size-"+i.minSize),u<r&&(r=u,f.push("ali-size-cc-s"))),!i.maxSize||(u=n.Collection.indexOf(e,"ali-size-"+i.maxSize),u>r&&(r=u,f.push(""),f.push("ali-size-cc-l"))),f.push(e[r]),t=window.innerWidth>=100?(window.innerWidth/100).toString():"0",window.innerWidth>1e4&&(t="x"),t.indexOf(".")>0&&(t=t.substring(0,t.indexOf("."))),s=["ali-size-hxx","ali-size-cc-s","ali-size-cc-l"],o=0;o<=100;o++)s.push("ali-size-h"+o.toString()+"x");!document.body||(document.body.parentElement.className=n.Collection.addItem(document.body.parentElement.className," ",["ali-size-h"+t+"x"],s),document.body.parentElement.className=n.Collection.addItem(document.body.parentElement.className," ",f,e));h=n.Elements.getById(i.coverPanelId);!h||(h.style.height=window.innerHeight.toString()+"px")},i.init=function(r){var f,u;if((r===void 0&&(r=!1),i._hasInited!==!0)&&(i._hasInited=!0,i.refreshLayout(),n.Elements.listen(window,"resize",function(){i.refreshLayout()}),!r)){for(f=document.getElementsByTagName("*"),u=0;u<f.length;u++)try{t.fillControl(f[u],null,!0)}catch(e){}n.Elements.listen(document,"DOMNodeInserted",function(n){t.fillControl(n.target||n.srcElement,null,!0)})}},i.generatePage=function(t,r){var u;r===void 0&&(r=!1);n.Common.PageController.init(r);n.Elements.getById(i.headerPanelId)||(u=document.createElement("div"),u.id=i.headerPanelId,document.body.appendChild(u));n.Elements.getById(i.bodyPanelId)||(u=document.createElement("div"),u.id=i.bodyPanelId,t||(t=i.bodyPanelId+"_cnt"),u.innerHTML='<div class="ali-container-main" ><div id="'+t+'" class="ali-container-main" ><\/div><\/div>',document.body.appendChild(u));n.Elements.getById(i.coverPanelId)||(u=document.createElement("div"),u.id=i.coverPanelId,u.innerHTML='<div class="ali-container-main" ><\/div>',document.body.appendChild(u));n.Elements.getById(i.hiddenPanelId)||(u=document.createElement("div"),u.id=i.hiddenPanelId,u.innerHTML='<div class="ali-container-main" ><\/div>',document.body.appendChild(u))},i.addResizeEvent=function(n){(i._onresize||(i._onresize=[],window.addEventListener("resize",function(){i._onresize.forEach(function(n){n()})})),i._onresize.some(function(t){return t===n}))||i._onresize.push(n)},i.openApp=function(t){var u,r,f;t&&i.hiddenPanelId&&(u=n.Elements.getById(i.hiddenPanelId),u)&&(r=n.Elements.getById(u.id+"_starter"),r||(r=document.createElement("div"),u.appendChild(r),r.id=u.id+"_starter",r=n.Elements.getById(u.id+"_starter")),f=document.createElement("iframe"),f.src=t,r.appendChild(f),f.onload=function(){setTimeout(function(){f.outerHTML=""},1e4)})},i.loadScript=function(n){var t=document.createElement("script");t.src=n;document.getElementsByTagName("head")[0].appendChild(t)},i.showCustomizedCover=function(){var r=n.Elements.getById(t.PageController.coverPanelId);return r.style.display="block",r.className="ali-container-visible-t",i.refreshLayout(),r.innerHTML='<div id="'+t.PageController.coverPanelId+'_panel" ><\/div>',n.Elements.getById(t.PageController.coverPanelId+"_panel")},i.hideCustomizedCover=function(){var i=n.Elements.getById(t.PageController.coverPanelId);i.className="ali-container-visible-f";i.style.display="none"},i.renderHeader=function(r){var c=n.Elements.getById(i.headerPanelId),f,a,o,b,y,s,tt,k,p,w,d,v,g,h,nt,ut,it;if(c){f=document.createElement("div");f.className="ali-container-main";var l=f,e=c.getElementsByTagName("h1"),rt=!1,u=!i.homeInfo?{name:document.title}:i.homeInfo;!!e&&e.length>0&&!!e[0]?(rt=!0,a=null,a=e[0].title?e[0].title:e[0].innerText?e[0].innerText:e[0].innerHTML,a&&a!=""||(a=n.Res.builtIn().localString("page")),f.appendChild(e[0]),l=document.createElement("div"),l.className="ali-container-main",o=[{id:"root",name:u.name,url:u.url,avatar:u.avatar,note:u.note,onclick:u.onclick}],i.path?i.path.forEach(function(n){!n||o.push(n)}):o.push({id:"apps",name:n.Res.builtIn().localString("appCenter"),url:i.appCenterUrl}),i.isLastNodeInPath!==!0&&o.push({id:"current",name:a,url:"javascript:window.location.reload();"}),b=document.createElement("ul"),b.id=i.headerPanelId+"_nav",i.renderMenu(b,o,o[o.length-1].id,null,function(n,t){var i=document.createElement("div");return i.className="ali-container-main",t===o.length-2&&(i.className+=" ali-state-active-t"),i.innerHTML='<svg version="1.1" id="'+n.id+'_svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 40" enable-background="new 0 0 20 40" xml:space="preserve"><polygon points="0,0 20,20 0,40 20,40 20,0 20,0" /><polygon points="19,20 0,40 1,40 20,20 1,0 0,0"/><\/svg>',n.appendChild(i),!0}),l.appendChild(b)):(y=document.createElement("h1"),y.id=i.headerPanelId+"_title",f.appendChild(y),s=document.createElement("a"),!u.avatar||(tt=n.Graph.imageElement(u.avatar),s.appendChild(tt)),!u.name||(k=document.createElement("span"),k.innerHTML=u.name,k.title=u.name,s.appendChild(k)),!u.note||(s.title=u.note),s.href=u.url?u.url:"#",!u.onclick||(s.onclick=function(){return u.onclick()}),u.url||u.onclick||(s.onclick=function(){return!1}),y.appendChild(s),f.appendChild(y));c.innerHTML="";p=document.createElement("div");p.className="ali-container-main";p.appendChild(f);l!=f&&(w=document.createElement("div"),w.className="ali-container-main ali-container-nav",c.appendChild(w),w.appendChild(l),c.appendChild(w),p.className+=" ali-container-menu");c.appendChild(p);d=document.createElement("ul");d.id=i.headerPanelId+"_menu";i.renderMenu(d,i.menu,r);f.appendChild(d);v=document.createElement("ul");v.id=i.headerPanelId+"_user";g=document.createElement("li");g.id=v.id+"_sear";i._renderSearchBar(g);v.appendChild(g);h=n.Users.profile();nt=[];!h||(ut=t.Text.format(i.messageUrl,{user:h.id}),it=t.Text.format(i.signOutUrl,{user:h.id}),nt.push({id:"me",name:h.nickname,avatar:{type:"url",name:h.nickname,url:h.avatar},children:[{id:"melogout",name:n.Res.builtIn().localString("logout"),url:it}]}));n.Collection.pushRange(nt,i.optionsBar);i.renderMenu(v,nt);l.appendChild(v)}},i.changeBranch=function(t){var r=n.Elements.getById(i.headerPanelId+"_menu");r&&i.selectMenuItem(r,i.menu,t)},i.selectMenuItem=function(t,i,r){if(!t||!i)return null;i.forEach(function(i,u){var f=n.Elements.getById(t.id+"_i"+u.toString());f.tagName&&f.tagName.toString().toLowerCase()==="li"&&(!r||r!==i.id?n.Elements.changeStyleRef(f,[],["ali-state-active-t"]):n.Elements.changeStyleRef(f,["ali-state-active-t"],[]))})},i.renderMenu=function(t,r,u,f,e){if(!t||!r)return null;var o=[];return r.forEach(function(r,s){var l,h,a,c,y,p,v;(s>0&&!!e&&(l=document.createElement("li"),l.id=t.id+"_split"+s.toString(),l.className="ali-container-split",t.appendChild(l),e(l,s-1)||(l.style.display="none")),h=document.createElement("li"),o.push(h),h.id=t.id+"_i"+s.toString(),h.className="ali-container-menu",!u||u!==r.id||(h.className="ali-state-active-t"),a=document.createElement("div"),a.id=h.id+"_info",a.className="ali-container-main",c=document.createElement("a"),c.target=i.searchTarget,c.id=a.id+"_link",!r.name||(c.title=r.name.replace("<em>",'"').replace("<\/em>",'"')),!r.avatar||r.renderStyle===n.Collection.ButtonRenderStyles.text||(y=n.Graph.imageElement(r.avatar),!y||c.appendChild(y)),!r.name||r.renderStyle===n.Collection.ButtonRenderStyles.image||(p=document.createElement("span"),p.innerHTML=r.name,c.appendChild(p)),c.href="#",r.url?c.href=r.url:c.onclick=function(){return!1},!r.onclick||(c.onclick=function(){return r.onclick()}),a.appendChild(c),h.appendChild(a),t.appendChild(h),!f||f(r,h,s),r.children)&&(v=document.createElement("ul"),v.id=h.id+"_menu",h.appendChild(v),i.renderMenu(v,r.children))}),o},i._renderSearchBar=function(r){var e,h,u,f,o,s;r&&(n.Elements.changeStyleRef(r,["ali-container-search"]),e=document.createElement("div"),e.id=r.id+"_info",e.className="ali-container-main",h=n.Graph.imageElement(i.searchIcon),!h||e.appendChild(h),u=document.createElement("input"),u.type="search",u.placeholder=!!i.searchTip&&i.searchTip!==""?i.searchTip:n.Res.builtIn().localString("typeKeywords"),u.value="",u.autocomplete="off",u.spellcheck=!1,e.appendChild(u),r.appendChild(e),f=document.createElement("ul"),r.appendChild(f),o=function(n){var t,r,u;i._menuElements&&(i._menuSelIndex!=null&&(t=i._menuSelIndex,t!=null&&t>=0&&t<i._menuElements.length&&(r=i._menuElements[t],!r||(r.className=""))),(n<0||n>=i._menuElements.length)&&(n=0),u=i._menuElements[n],u)&&(u.className="ali-state-active-t",i._menuSelIndex=n)},s=function(n,r){var u,e;if(r===void 0&&(r=!1),!i.searchProvider){f.style.display="none";return}if((r||i._q!==n)&&(i._q=n,i._menuSelIndex=-1,u=i.searchProvider(n),u&&u.length!==0)){f.innerHTML="";f.style.display="block";var s="<em>"+n+"<\/em>",h=function(t,i){return!t?"":t.replace("{{q}}",i?s:n).replace("{q}",i?s:n)},c=[];return u.forEach(function(n){var i=t.Reflection.copy(n);i&&i.name&&(i.name=h(i.name,!0),!i.url||(i.url=h(i.url,!1)),c.push(i))}),e=i.renderMenu(f,c,null,function(n,t,i){t.onmouseenter=function(){o(i)}}),i._menuElements=e,i._menuItems=u,e}},u.onblur=function(){u.value&&u.value!==""&&u.value!==" "&&i.searchProvider||(f.style.display="none",i._q=null)},u.onkeydown=function(){var r=event.keyCode,e,h,c,l,t;if(!u.value||u.value===""||u.value===" "||!i.searchProvider){f.style.display="none";return}if(r===27){f.style.display="none";return}if(r===13){if(e=i._menuElements,!e)return;if(t=i._menuSelIndex,t==null&&(t=0),t<0||t>=e.length)return;if(h=e[t],!h)return;if(c=n.Elements.getById(h.id+"_info_link"),!c)return;c.click();return}(r===38||r===40)&&(l=u.value,s(l),t=i._menuSelIndex,i._menuElements)&&(r===40?(t==null&&(t=-1),t<i._menuElements.length-1&&o(t+1)):r===38&&(t==null&&(t=i._menuElements.length),t>0&&o(t-1)))},u.onkeypress=function(){if(!u.value||u.value===""||u.value===" "||!i.searchProvider){f.style.display="none";return}setTimeout(function(){var n=u.value;setTimeout(function(){n===u.value&&(s(n),o(0))},300)},200)},u.onpaste=function(){setTimeout(function(){var n=u.value;s(n);o(0)},200)})},i}();i._hasInited=!1;i.bodyPanelId="ali_body";i.headerPanelId="ali_head";i.coverPanelId="ali_cover";i.hiddenPanelId="ali_hidden";i.searchTarget="_self";t.PageController=i;t.initPage=r})(t=n.Common||(n.Common={}))}(AliHub||(AliHub={})),function(n){var t;(function(t){function h(n){return n?(n.strings.reg("ww",i.lp),n.strings.reg("en",i.lp),n):null}function c(n){return function(){var t={templates:function(n,t){return t===void 0&&(t=!1),typeof t!="undefined"&&t!==void 0?r(n,t):r(n)},iconfonts:function(n,t){return typeof t!="undefined"&&t!==void 0?s(n,t):s(n)},market:function(n){return typeof n!="undefined"&&n!==void 0?u(n):u()}};return!n||n(t),t}}function r(n,t){if((t===void 0&&(t=!1),!n)||(n=n.toString(),n===""))return undefined;var r=i.templ[n];return!r&&t&&(i.templ[n]=new e(n),typeof t=="function"&&t(i.templ[n])),i.templ[n]}function l(n,t,i){var u=r(n,!0);return u?(arguments.length>2&&u.settings(t,i),u.settings(t)):undefined}function a(n,t,i,u){var f=r(n,!0);return f?(arguments.length>3&&f.settingsProp(t,i,u),f.settingsProp(t,i)):undefined}function v(n,t,i){var u=r(n,!0);return arguments.length>2&&u.html(t,i),u.html(t)}function y(n,t,i){var u=r(n,!0);return arguments.length>2&&u.svg(t,i),u.svg(t)}function p(n,i,r){var u=t.svg(n,i);return u?{type:"svg",source:u,styleRef:r}:null}function w(i,r,u){var f=t.svgImage(i,r,u);return n.Graph.imageElement(f)}function s(n,t){arguments.length>1&&typeof t!="boolean"&&(i.icons[n]=t);var r=i.icons[n];return r||(r=new f(n),t!=null&&t===!0&&(i.icons[n]=r)),r}function b(n,t,i){var u=r(n,!0);return arguments.length>2?u.strings.field(t,i):u.strings.field(t)}function u(t){if(arguments.length>0&&!!t){if(typeof t=="string")i.mkt=t;else if(typeof t=="boolean")if(t==!0){var r=n.Common.Text.trim(n.Elements.getQuery("mkt"));r?i.mkt=r:document.documentElement.lang?i.mkt=document.documentElement.lang:navigator.language?i.mkt=navigator.language:navigator.userLanguage?i.mkt=navigator.userLanguage:navigator.browserLanguage?i.mkt=navigator.browserLanguage:!navigator.systemLanguage||(i.mkt=navigator.systemLanguage)}else i.mkt="ww";!i.mkt||(i.mkt=i.mkt.toString().toLowerCase())}else i.mkt==null&&u(!0);return i.mkt}function k(){return r("AliHub.Quark",function(t){n.Res.regLang(t)})}var i={templ:{},icons:{},locals:{},mkt:null,lp:{homepage:"Homepage",appCenter:"App center",page:"Page",pages:"Pages",first:"First",last:"Last",previous:"Previous",next:"Next",total:"Total",current:"Current",index:"Index",bindingError:"Cannot apply bindings",refresh:"refresh",reload:"reload",member:"Member",myMembers:"My members",recentDays:"Latest {0} days",planned:"Pending",processing:"Processing",completed:"Done",ladyName:"Ms. {0}",gentlemanName:"Mr. {0}",reminder:"Reminder",note:"Note",totalScore:"Total Score",cents:"{0} points",level:"Level",collapse:"Collapse",expand:"Expand",showAll:"Show all",followUp:"Follow up",noFollowUp:"None",memberTags:"Member tags",types:"Types",history:"History",trend:"Trend",distribution:"Distribution",newTasks:"{0} new tasks coming",bizTasks:"Tasks",summaryReports:"Reports",jobMgm:"Jobs Management",createTask:"Create task",seeMore:"See more",exit:"Exit",register:"Sign up",login:"Sign in",logout:"Sign out",search:"Search",filter:"Filter",typeKeywords:"Type keywords to search",requestHelp:"{0} is asking for help",cannotFind:"The {0} could not be found",newItem:"New",createItem:"Create",addItem:"Add",getItem:"Get",setItem:"Set",modifyItem:"Modify",updateItem:"Update",replaceItem:"Replace",overrideItem:"Override",fillItem:"Fill",removeItem:"Remove",deleteItem:"Delete",clearItem:"Clear",cleanUp:"Clean up",ok:"OK",save:"Save",cancel:"Cancel",turnBack:"Back",rollback:"Rollback",undo:"Undo",redo:"Redo",cut:"Cut",copy:"Copy",copySomething:"Copy {0}",paste:"Paste",clipboard:"Clip board",navigateTo:"Navigate to",settings:"Settings",options:"Options",profile:"Profile",draft:"Draft",open:"Open",close:"Close",turnOn:"Turn on",turnOff:"Turn off",layout:"Layout",add:"Add",insert:"Insert",edit:"Edit",remove:"Remove","delete":"Delete",clear:"Clear",title:"Title",content:"Content",text:"Text",richtext:"Richtext",properties:"Properties",wizard:"Wizard",slide:"Slide",photo:"Photo",image:"Image",images:"Images",audio:"Audio",video:"Vidio",movie:"Movie",movies:"Movies",document:"Document",documents:"Documents",link:"Link",links:"Links",hyperlink:"Hyperlink",website:"Website",sns:"Social network",favorate:"Favorate",game:"Game",games:"Games",file:"File",files:"Files",folder:"Folder",dir:"Directory",moveUp:"Move up",moveRight:"Move right",moveDown:"Move down",moveLeft:"Move left",module:"Module",component:"Component",chapter:"Chapter",section:"Section",update:"Update",upload:"Upload",download:"Download","switch":"Switch",switchCamera:"Switch camera",capturePhoto:"Capture",record:"Record",assign:"Assign",reassign:"Reassign",flag:"Flag",send:"Send",reply:"Reply",replyAll:"Reply all",forward:"Forward",cc:"Cc",bcc:"Bcc",phoneCall:"Call",contact:"Contact",contactMember:"Contact member",attach:"Attach",attachment:"Attachment",expired:"Expired",message:"Message",notification:"Notification",feedback:"Feedback",help:"Help",support:"Support",window:"Window",aries:"Aries",taurus:"Taurus",gemini:"Gemini",cancer:"Cancer",leo:"Leo",virgo:"Virgo",libra:"Libra",scorpio:"Scorpio",sagittarius:"Sagittarius",capricorn:"Capricorn",aquarius:"Aquarius",pisces:"Pisces",ophiuchus:"Ophiuchus",horoscope:"Horoscope",astrology:"Astrology",loading:"Loading",failToLoadData:"Failed to load data",surname:"Surname",givenname:"Given name",middleName:"Middle name",nickname:"nickname",city:"City",street:"Street",country:"Country",birthday:"Birthday",age:"Age",gender:"gender",male:"Male",female:"Female",other:"Other",fromSource:"From",toTarget:"To",millisecondsNum:"{0}ms",secondsNum:"{0}s",minutesNum:"{0}m",hoursNum:"{0}h",daysNum:"{0}d",weeksNum:"{0}w",timeLocaleSep:" ",today:"Today",tomorrowTime:"{0} tomorrow",tomorrow:"Tomorrow",secondsAgo:"Seconds ago",minuteAgo:"A minute ago",minutesTwoAgo:"2 minutes ago",minutesAgo:"{0}min ago",hourAgo:"An hour ago",hoursAgo:"{0}h ago",hoursTwoAgo:"2 hours ago",yesterdayTime:"{0} yesterday",yesterday:"Yesterday",daysTwoAgo:"2 days ago",daysAgo:"{0} days ago",lastWeekDay:"Last {0}",lastWeek:"Last week",future:"Future",date:"Date",day:"Day",week:"Week",weekday:"Weekday",weekend:"Weekend",week0c:"S",week1c:"M",week2c:"T",week3c:"W",week4c:"T",week5c:"F",week6c:"S",week0s:"Sun",week1s:"Mon",week2s:"Tue",week3s:"Wed",week4s:"Thu",week5s:"Fri",week6s:"Sat",week0f:"Sunday",week1f:"Monday",week2f:"Tueday",week3f:"Wednesday",week4f:"Thursday",week5f:"Friday",week6f:"Saturday",week0t:"{0} Sun",week1t:"{0} Mon",week2t:"{0} Tue",week3t:"{0} Wed",week4t:"{0} Thu",week5t:"{0} Fri",week6t:"{0} Sat",month:"Month",month0s:"Jan",month1s:"Feb",month2s:"Mar",month3s:"Apr",month4s:"May",month5s:"Jun",month6s:"Jul",month7s:"Aug",month8s:"Sep",month9s:"Oct",monthAs:"Nov",monthBs:"Dec",month0f:"January",month1f:"February",month2f:"March",month3f:"April",month4f:"May",month5f:"June",month6f:"July",month7f:"August",month8f:"September",month9f:"October",monthAf:"November",monthBf:"December",year:"Year",am:"AM",pm:"PM",empty:"Empty",commaSymbol:", ",colonSymbol:": ",ellipsisSymbol:"...",semicolonSymbol:"; ",enumCommaSymbol:", ",periodSymbol:". "}},f,e,o;t.regLang=h;f=function(){function n(n){this._icon={};this._subject=n}return n.prototype.subject=function(){return this._subject},n.prototype.item=function(n,t){return!n||n.toString()==""?null:(n=n.toString(),arguments.length>1&&(this._icon[n]=t),this._icon[n])},n.prototype.line=function(n,t){if(t===void 0&&(t=null),!n||n.toString()=="")return null;n=n.toString();var i=this.item(n);return!!i&&!!i.line?i.line:t},n.prototype.block=function(n,t){if(t===void 0&&(t=null),!n||n.toString()=="")return null;n=n.toString();var i=this.item(n);return!!i&&!!i.block?i.block:t},n}();t.IconFontCollection=f;e=function(){function t(n){this._html={};this._settings={};this._svg={};this.data={};this.strings=new o;this._subject=n}return t.prototype.subject=function(){return this._subject},t.prototype.settings=function(n,t){return n?(arguments.length>1&&(this._settings[n]=t),this._settings[n]):undefined},t.prototype.settingsProp=function(n,t,i){if(!n||!t)return undefined;var r=this._settings[n];return arguments.length>2&&(r==null&&(r={},this._settings[n]=r),r[t]=i),r!=null?r[t]:undefined},t.prototype.html=function(t,i){return!t||t.toString()==""?null:(t=t.toString(),arguments.length>1&&(this._html[t]=i,n.Diagnostics.debugInfo("Add HTML template "+t+" for "+this.subject()+".")),this._html[t])},t.prototype.svg=function(t,i){return!t||t.toString()==""?null:(t=t.toString(),arguments.length>1&&(this._svg[t]=i,n.Diagnostics.debugInfo("Add SVG template "+t+" for "+this.subject()+".")),this._svg[t])},t.prototype.svgImage=function(n,t){var i=this.svg(n);return i?{type:"svg",source:i,styleRef:t}:null},t.prototype.svgElement=function(t){var i=this.svgImage(t);return n.Graph.imageElement(i)},t.prototype.localString=function(n,t){return arguments.length>1?this.strings.field(n,t):this.strings.field(n)},t.prototype.localStringInHTML=function(n,t){return arguments.length>1?this.strings.fieldInHTML(n,t):this.strings.fieldInHTML(n)},t}();t.Templates=e;o=function(){function t(){this._strings={ww:{}};this.defaultLang=null}return t.prototype.reg=function(n,t,i){var r,f,u;if(i===void 0&&(i=!1),n&&n!="")if(r=n.toString().toLowerCase(),!i&&t&&this._strings[r]){f=this._strings[r];for(u in t)f[u]=t[u]}else this._strings[r]=t},t.prototype.specificField=function(n,t,i){if(arguments.length>2){var r=this._lang(n,!0);r[t]=i}return this._lang(n)[t]},t.prototype.localField=function(n,t){return arguments.length>1?this.specificField(u(),n,t):this.specificField(u(),n)},t.prototype.globalField=function(n,t){return arguments.length>1?this.specificField("ww",n,t):this.specificField("ww",n)},t.prototype.copyFields=function(n,t){var u=this,r,i;if(n||(n={}),t==null){r=this._lang();for(i in r)i&&typeof i=="string"&&(n[i]=r[i]);return n}return t.forEach(function(t){n[t]=u.localField(t)}),n},t.prototype.copyFieldToElement=function(t,i){if(!t)return null;var r=this.field(t);return i?(r=r?n.Common.Text.toHTML(r):"",n.Collection.toArray(i).forEach(function(t){var i=n.Elements.getById(t);i&&(i.innerHTML=r)}),r):r},t.prototype.copyFieldToInputElement=function(t,i){if(!t)return null;var r=this.field(t);return i?(r||(r=""),n.Collection.toArray(i).forEach(function(t){var i=n.Elements.getById(t);!i||(i.value=r)}),r):r},t.prototype.field=function(n,t){var r=!t||t==""?u():t,i;if(r&&r!=""||(r="ww"),i=this.specificField(r,n),!!i||typeof i!="undefined")return i;while(r.lastIndexOf("-")>1)if(r=r.substring(0,r.lastIndexOf("-")),i=this.specificField(r,n),!!i||typeof i!="undefined")return i;return(i=this.globalField(n),!!i||typeof i!="undefined"||!this.defaultLang)?i:this.specificField(this.defaultLang,n)},t.prototype.fieldInHTML=function(t,i){return n.Common.Text.toHTML(arguments.length>1?this.field(t,i):this.field(t),!0)},t.prototype.toJSON=function(){return n.Common.Text.serialize(this.copyFields({type:"LocalStrings"}))},t.prototype._lang=function(n,t){return(n==null&&(n=u()),!n||n=="")?{}:(n=n.toString().toLowerCase(),!this._strings[n])?t==!0?(this._strings[n]={},this._strings[n]):{}:this._strings[n]},t}();t.Strings=o;t.factory=c;t.templates=r;t.settings=l;t.settingsProp=a;t.html=v;t.svg=y;t.svgImage=p;t.svgElement=w;t.iconfonts=s;t.strings=b;t.market=u;t.builtIn=k})(t=n.Res||(n.Res={}))}(AliHub||(AliHub={})),function(n){var t;(function(t){function u(){return!!i.me.profile}function f(n){return arguments.length>0&&(n&&n.profile?(i.me.profile=n.profile,i.me.permission=!n.permission?{}:n.permission,i.me.contact=!n.contact?{}:n.contact):(i.me.profile=null,i.me.permission=null,i.me.contact=null)),i.me}function e(n){return arguments.length>0&&(n?(i.me.profile=n,i.me.profile.id!=null&&typeof i.me.profile.id=="number"&&(i.me.profile.id=i.me.profile.id.toString())):i.me.profile=null),i.me.profile}function o(n){var i=t.profile();return n&&i&&i.id&&(typeof n=="string"?n===i.id:n.id===i.id)}function s(n){return arguments.length>0&&(i.me.permission=n),i.me.permission}function h(n,t){if(t===void 0&&(t=!1),!t&&!i.me.profile||!i.me.permission)return!1;var r=i.me.permission[n];return r===!0||typeof r=="number"&&r===!0}function c(n,t){i.me.permission||(i.me.permission={});i.me.permission[n]=t}function l(n,t){return arguments.length>1&&(t==null?delete i.session[n]:i.session[n]=t),i.session[n]}function a(n,t){var u,r;t===void 0&&(t=!1);u=[];for(r in n)r&&typeof r=="string"&&(i.session[r]&&t||(i.session[r]=n[r],u.push(r)));return u}var r,i;t.logined=u;t.principle=f;t.profile=e;t.isMe=o;t.permissionSet=s;t.hasPermission=h;t.configPermission=c;t.session=l;t.fillSession=a;r=function(i){function r(n){var t=i.call(this,n)||this;return t.addStyleRef("ali-part-user-profile-card"),t.refresh(),t}return __extends(r,i),r.prototype.refresh=function(){var r,i;(this.innerHTML(""),r=t.principle(),r&&r.profile)&&(i=r.profile,this.appendElementByDef({styleRef:"ali-container-main",children:[{tagName:"img",styleRef:"ali-part-user-card-avatar",attr:{src:i.avatar,alt:i.nickname}},{tagName:"span",attr:{title:i.nickname,innerHTML:n.Common.Text.toHTML(i.nickname)}}]}))},r}(n.Common.VisualControl);t.ProfileCard=r;i=function(){function n(){}return n}();i.me={profile:null,permission:null,contact:null};i.session={};try{window._principleInfo&&t.principle(window._principleInfo);window._sessionInfo&&t.fillSession(window._sessionInfo)}catch(v){}})(t=n.Users||(n.Users={}))}(AliHub||(AliHub={})),function(n){var t;(function(t){var i=function(){function i(){}return i.copy=function(n){var r,t,u;if(n){r=!1;try{t=document.createElement("p");t.innerHTML=i.toHTML(n);document.body.appendChild(t);window.getSelection().removeAllRanges();u=document.createRange();u.selectNode(t);window.getSelection().addRange(u);r=document.execCommand("copy");try{t.remove()}catch(f){!t.outerHTML||(t.outerHTML="")}if(r)return!0}catch(f){}return window.clipboardData&&window.clipboardData.setData&&(r=window.clipboardData.setData("Text",n),r),!0}},i.format=function(r,u,f,e,o){var s,v,h,y,p,l,w,a,b,c;if(f===void 0&&(f=!1),e===void 0&&(e=null),s=r,!s||!u)return s;if(v=new Date,h=function(n,r){for(r==null&&(r=""),typeof r!="function"||!r.subscribe||(r=r()),r instanceof Date&&(r=t.DateTime.toNumberString(r)),typeof r!="string"&&typeof r!="number"&&typeof r!="boolean"&&(r=i.serialize(r)||""),r=r.toString(),f&&(r=encodeURIComponent(r));s.indexOf("{{"+n+"}}")>=0;)s=s.replace("{{"+n+"}}",r);while(s.indexOf("{"+n+"}")>=0)s=s.replace("{"+n+"}",r);return s},typeof u!="function"||!u.subscribe||(u=u()),!o&&s.indexOf("{*}")>=0&&(y=i.serialize(u)),!o&&s.indexOf("{*|url}")>=0&&(p=n.Web.buildParaString(u)),e){for(a in u)a!=null&&(typeof a=="string"||typeof a=="number")&&(b=(o?o.toString()+".":"")+a.toString(),c=u[a],s=h(b,c),c&&typeof c!="string"&&typeof c!="number"&&typeof c!="boolean"&&(s=i.format(s,c,f,[],b)));typeof e=="function"&&(e=e());e.forEach&&e.forEach(function(n){s=h(n,"")});["id","name","created","key","i","index","q","no","num","subject","title","keyword","guid","uuid","query","mkt","lang","nick","nickname","value","code","type"].forEach(function(n){n=(!o?"":o.toString()+".")+n;s=h(n,"")});s=h("timestamp",v);s=h("now",v);y&&(s=h("*",y));p&&(s=h("*|url",p))}else l=[],i.inScope(s,"{","}","\\").forEach(function(i){if(i&&!n.Collection.contains(l,i,"key")){var r=(o?i.replace(o+".",""):i).split(".");l.push({key:i,path:r,value:t.Reflection.getProperty.apply(t.Reflection,[u].concat(r))})}}),w=function(t,i){var r=n.Collection.getItem(l,t,"key");r?r.value==null&&(r.value=i):l.push({key:t,value:i})},w("timestamp",v),w("now",v),y&&w("*",y),p&&(s=h("*|url",p)),l.forEach(function(n){s=h(n.key,n.value)});return s},i.trim=function(n){return n?n.toString().replace(/(^\s*)|(\s*$)/g,""):n},i.leftTrim=function(n){return n?n.toString().replace(/(^\s*)/g,""):n},i.rightTrim=function(n){return n?n.toString().replace(/(\s*$)/g,""):n},i.parseHTML=function(t,i){var r,u;return(i===void 0&&(i=!1),t==null)?i?"":null:(r=document.createElement("div"),r.innerHTML=t.toString(),u=r.innerText||r.textContent,!u)?"":n.Common.Text.trim(u.toString())},i.toHTML=function(n,t){return(t===void 0&&(t=!1),!n)?t?"":null:n.toString().replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},i.serialize=function(n,t){var u,r,f;if(t===void 0&&(t=!1),n==null)return t?"":"null";if(typeof JSON!="undefined"&&(!t||t.toString().toLowerCase()==="full")&&JSON&&JSON.stringify)return JSON.stringify(n);if(u="full",u=t?t===!0?"string":t.toString().toLowerCase():"full",u||(u="full"),n.toJSON&&typeof n.toJSON=="function"&&(n=n.toJSON(),typeof n=="string"))return n;switch(typeof n){case"string":return u==="simple"||u==="string"?n:'"'+n.replace(/\"/g,'\\"')+'"';case"number":return n.toString();case"boolean":return n?"true":"false"}if(n instanceof Date)return n.getTime().toString();if(r="",n instanceof Array)return n.forEach(function(n){r+=", "+i.serialize(n)}),r=("["+r+"]").replace("[, ","["),u==="simple"&&(r=r.substring(1,r.length-1)),r;if(typeof JSON!="undefined"&&JSON&&JSON.stringify)return JSON.stringify(n);for(f in n){if(!f||typeof f!="string")return;r+=', "'+f+'": '+i.serialize(n[f])}return("{"+r+"}").replace("{, ","{")},i.indexOf=function(t,i,r,u){r===void 0&&(r=!1);u===void 0&&(u=!1);var f={start:-1,end:-1,q:null};return t==null||i==null?f:(t=t.toString(),n.Collection.toArray(i,!0,function(n){if(n!=null&&(typeof n=="function"&&(n=n()),n!=null))switch(typeof n){case"number":if(isNaN(n))return;if(n<0&&(n=t.length-n),u){if(r?n>=f.start&&f.start>-1:n<=f.start)return}else if(r?n<=f.start:n>=f.start&&f.start>-1)return;if(n>t.length)return;f.start=n;f.end=n;f.q=null;return;case"string":if(n.length<1)return;var i=null;if(u){if(i=t.lastIndexOf(n),r?i>=f.start&&f.start>-1:i<=f.start)return}else if(i=t.indexOf(n),r?i<=f.start:i>=f.start&&f.start>-1)return;if(i>t.length)return;f.start=i;f.end=i+n.length-1;f.q=n;return;default:return}}),f)},i.inScope=function(n,t,i,r){var o,f,u,s,e;if(!n)return[];for(o=[],f=0;;){if(u=n.indexOf(t,f),u<0)break;if(s=!(r&&n.indexOf(r+t,f)===u-r.length),u++,e=n.indexOf(i,u),e<0)break;f=e+1;s&&o.push(n.substring(u,e))}return o},i.isString=function(n){return n!=null&&typeof n=="string"},i.isNotEmptyString=function(n){return!!n&&typeof n=="string"},i.isEmptyOrWhiteSpace=function(n){var t=i.isNotEmptyString(n);return t?!!i.trim(n):!1},i.dataUrlToBlob=function(n){var u=";base64,",t;if(n.indexOf(u)==-1){var i=n.split(","),f=i[0].split(":")[1],r=decodeURIComponent(i[1]);return new Blob([r],{type:f})}var i=n.split(u),f=i[0].split(":")[1],r=window.atob(i[1]),e=r.length,o=new Uint8Array(e);for(t=0;t<e;++t)o[t]=r.charCodeAt(t);return new Blob([o],{type:f})},i.base64encode=function(n){for(var r,f,e,o=n.length,u=0,t="";u<o;){if(r=n.charCodeAt(u++)&255,u==o){t+=i._base64EncodeChars.charAt(r>>2);t+=i._base64EncodeChars.charAt((r&3)<<4);t+="==";break}if(f=n.charCodeAt(u++),u==o){t+=i._base64EncodeChars.charAt(r>>2);t+=i._base64EncodeChars.charAt((r&3)<<4|(f&240)>>4);t+=i._base64EncodeChars.charAt((f&15)<<2);t+="=";break}e=n.charCodeAt(u++);t+=i._base64EncodeChars.charAt(r>>2);t+=i._base64EncodeChars.charAt((r&3)<<4|(f&240)>>4);t+=i._base64EncodeChars.charAt((f&15)<<2|(e&192)>>6);t+=i._base64EncodeChars.charAt(e&63)}return t},i.base64decode=function(n){for(var s,e,r,u,o=n.length,t=0,f="";t<o;){do s=i._base64DecodeChars[n.charCodeAt(t++)&255];while(t<o&&s==-1);if(s==-1)break;do e=i._base64DecodeChars[n.charCodeAt(t++)&255];while(t<o&&e==-1);if(e==-1)break;f+=String.fromCharCode(s<<2|(e&48)>>4);do{if(r=n.charCodeAt(t++)&255,r==61)return f;r=i._base64DecodeChars[r]}while(t<o&&r==-1);if(r==-1)break;f+=String.fromCharCode((e&15)<<4|(r&60)>>2);do{if(u=n.charCodeAt(t++)&255,u==61)return f;u=i._base64DecodeChars[u]}while(t<o&&u==-1);if(u==-1)break;f+=String.fromCharCode((r&3)<<6|u)}return f},i.utf16to8=function(n){for(var t,i="",u=n.length,r=0;r<u;r++)t=n.charCodeAt(r),t>=1&&t<=127?i+=n.charAt(r):t>2047?(i+=String.fromCharCode(224|t>>12&15),i+=String.fromCharCode(128|t>>6&63),i+=String.fromCharCode(128|t>>0&63)):(i+=String.fromCharCode(192|t>>6&31),i+=String.fromCharCode(128|t>>0&63));return i},i.utf8to16=function(n){for(var i,r,f,u="",e=n.length,t=0;t<e;){i=n.charCodeAt(t++);switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=n.charAt(t-1);break;case 12:case 13:r=n.charCodeAt(t++);u+=String.fromCharCode((i&31)<<6|r&63);break;case 14:r=n.charCodeAt(t++);f=n.charCodeAt(t++);u+=String.fromCharCode((i&15)<<12|(r&63)<<6|(f&63)<<0)}}return u},i}();i._base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";i._base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];t.Text=i})(t=n.Common||(n.Common={}))}(AliHub||(AliHub={})),function(n){var t;(function(t){function p(n){if(!n||n.length<10)return null;var i="&",t=n.indexOf("&callback=?");return(t<0&&(t=n.indexOf("?callback=?"),i="?"),t<0)?null:t+11<n.length&&n.indexOf("&",t+1)<0&&n.indexOf("#",t+1)<0?null:i+"callaback=?"}function f(t,i,r){var u,e,f;return t?(typeof t=="string"?(u=n.Res.settingsProp(t,"urls",i),u||(u={},n.Res.settingsProp(t,"urls",i,u))):(t.tagName||t.getElement)&&(e=t.getElement&&typeof t.getElement=="function"?t.getElement():t,e&&e.tagName&&(f=n.Elements.parseAttr(t,"urls",!0),u=f&&f[i]&&typeof f[i]=="string"?u={template:f[i]}:null)),arguments.length>2&&(r==null?u=null:typeof r=="string"?u.template=r:u=r,t&&typeof t=="string"&&n.Res.settingsProp(t,"urls",i,u)),u.canBeEmpty==null&&(u.canBeEmpty=!0),new s(u)):null}function w(n){n&&n.forEach(function(n){n&&n.subject&&n.key&&f(n.subject,n.key,n.info)})}function b(n,t){var u,i,r;if(t){u=[];for(i in t)i&&typeof i=="string"&&(r=t[i],r&&(typeof r=="string"||r.template))&&(f(n,i,r),u.push(i));return u}}function k(n,t,i){var u,f,r;if(i===void 0&&(i=!1),u=(n||"").toString(),t){f=i||u.indexOf("?")>=0?"&":"?";for(r in t)r&&typeof r=="string"&&(u+=f+encodeURIComponent(r)+"="+encodeURIComponent((t[r]||"").toString()),f="&")}return u}function o(t,i){if(!i)return t&&typeof t=="string"?{template:t}:null;if(t&&typeof t=="string"&&typeof i=="string")return f(t,i).info;if(t&&typeof t!="string"&&typeof i=="string"){var r=null;return t.urls?(r=t.urls,r&&typeof r=="function"&&(r=r.call(t))):(t.tagName&&t.getAttribute||t.getId&&!!t.getElement)&&(r=n.Elements.parseAttr(t,"urls",!0),r===undefined&&(r=n.Elements.parseAttr(t,"config-urls",!0))),r&&r[i]?typeof r[i]=="string"?{template:r[i]}:r[i]:null}return t?null:typeof i!="string"?i.info:{template:i}}function d(t,r,u){var f=o(t,r),e;return f?f.mock?f.mock(u,f,null):(e=n.Common.Text.format(f.template,u,!0,f.preBag),i.getInfo(e,null,f.canBeEmpty,f.convertor)):n.Common.rejectDeferred(null,"web resolver does not exist")}function g(t,r,u){var f=o(t,r),e;return f?f.mock?f.mock(u,f,null):(e=n.Common.Text.format(f.template,u,!0,f.preBag),i.getEmpty(e,null)):n.Common.rejectDeferred(null,"web resolver does not exist")}function nt(t,r,u,f){var e=o(t,r),s;return e?e.mock?e.mock(u,e,f):(s=n.Common.Text.format(e.template,u,!0,e.preBag),i.postInfo(s,null,f,e.canBeEmpty,e.convertor)):n.Common.rejectDeferred(null,"web resolver does not exist")}function tt(t,r,u,f){var e=o(t,r),s;return e?e.mock?e.mock(u,e,f):(s=n.Common.Text.format(e.template,u,!0,e.preBag),i.postEmpty(s,null,f)):n.Common.rejectDeferred(null,"web resolver does not exist")}function it(t,i){var f,e,r,u;if(i===void 0&&(i=!1),!t)return"";f="";e=0;for(r in t)r&&(typeof r=="string"||typeof r=="number")&&((r=r.toString(),u=t[r],u==null&&(u=""),i&&typeof u!="string"&&typeof u!="number")||(u=n.Common.Text.serialize(u,"string"),e>0&&(f+="&"),f+=encodeURIComponent(r)+"="+encodeURIComponent(u),e++));return f}var h=function(){function i(){}return i.instance=function(n){return arguments.length>0&&(i._instance=n),i._instance||(i._instance=new i),i._instance},i.postInfo=function(n,t,r,u,f){return u===void 0&&(u=!0),f===void 0&&(f=null),i.instance()?i.instance().postInfo(n,t,r,u,f):null},i.postEmpty=function(n,t,r){return i.instance()?i.instance().postEmpty(n,t,r):null},i.getInfo=function(n,t,r,u){return r===void 0&&(r=!0),u===void 0&&(u=null),i.instance()?i.instance().getInfo(n,t,r,u):null},i.getEmpty=function(n,t){return i.instance()?i.instance().getEmpty(n,t):null},i.getString=function(n,t,r){return r===void 0&&(r=!0),i.instance()?i.instance().getString(n,t,r):null},i.prototype.postInfo=function(i,r,u,f,e,o){var s,h,l,c;if(f===void 0&&(f=!0),e===void 0&&(e=null),s=n.Common.deferred(),!s)return null;if(h=n.Common.Text.format(i,r,!0),!h)return n.Common.rejectDeferred(s,"empty path",h),s.promise();if(l=t.callbackQuery(h),l&&(h.indexOf("&callbacktype=message")>0||h.indexOf("?callbacktype=message")>0))c=n.Elements.hiddenForm(h),c.addSet(u),c.submit().then(function(n){s.resolve(n.result);c.dispose()},function(n){s.reject(n);c.dispose()});else if(h.indexOf("&enablecors=true")>0||h.indexOf("?enablecors=true")>0)return this._jQueryAjax(s,h,"POST",u,!0,f,null,null)||this._fetchResp(s,h,"POST",u,!0,f,e,o)?s.promise():(n.Common.rejectDeferred(s,"cannot send cors request",h),s.promise());if(typeof jQuery!="undefined"&&jQuery&&jQuery.post)return jQuery.post(h,u,function(t){if(!f&&t==null)return n.Common.rejectDeferred(s,"empty response",h),s.promise();if(e&&!e(t))return n.Common.rejectDeferred(s,"failed to validate",h),s.promise();s.resolve(o?o(t):t)},"json").fail(function(t){n.Common.rejectDeferred(s,"network error",t)}),s.promise();if(h.indexOf("&callback=")>0||h.indexOf("?callback=")>=0)n.Common.rejectDeferred(s,"jsonp is not implemented",h);else{if(this._fetchResp(s,h,"POST",u,!1,f,e,o))return s.promise();n.Common.rejectDeferred(s,"fetch api is not supported",h)}return s.promise()},i.prototype.postEmpty=function(i,r,u){var e=n.Common.deferred(),f,s,o;if(!e)return null;if(f=n.Common.Text.format(i,r,!0),!f)return n.Common.rejectDeferred(e,"empty path",f),e.promise();if(s=t.callbackQuery(f),s&&(f.indexOf("&callbacktype=message")>0||f.indexOf("?callbacktype=message")>0))o=n.Elements.hiddenForm(f),o.addSet(u),o.submit(!0),setTimeout(function(){o.dispose()},3e4);else if(f.indexOf("&enablecors=true")>0||f.indexOf("?enablecors=true")>0)return this._jQueryAjax(e,f,"POST",u,!0,"avoid",null,null)||this._fetchResp(e,f,"POST",u,!0,"avoid",null,null)?e.promise():(n.Common.rejectDeferred(e,"cannot send cors request",f),e.promise());if(typeof jQuery!="undefined"&&jQuery&&jQuery.post)return jQuery.post(f,u,function(){e.resolve(!0)},"json").fail(function(t){n.Common.rejectDeferred(e,"network error",t)}),e.promise();if(f.indexOf("&callback=")>0||f.indexOf("?callback=")>=0)n.Common.rejectDeferred(e,"jsonp is not implemented",f);else{if(f.indexOf("callback=")<0&&this._fetchResp(e,f,"POST",u,!1,"avoid",null,null))return e.promise();n.Common.rejectDeferred(e,"fetch api is not supported",f)}return e.promise()},i.prototype.getInfo=function(t,i,r,u,f){r===void 0&&(r=!0);u===void 0&&(u=null);var e=n.Common.deferred(),o=n.Common.Text.format(t,i,!0);if(!o)return n.Common.rejectDeferred(e,"empty path",o),e.promise();if(o.indexOf("&enablecors=true")>0||o.indexOf("?enablecors=true")>0)return this._jQueryAjax(e,o,"GET",null,!0,r,u,f)||this._fetchResp(e,o,"GET",null,!0,r,u,f)?e.promise():(n.Common.rejectDeferred(e,"cannot send cors request",o),e.promise());if(typeof jQuery!="undefined"&&jQuery&&jQuery.getJSON)return jQuery.getJSON(o,function(t){if(!r&&t==null)return n.Common.rejectDeferred(e,"empty response",o),e.promise();if(u&&!u(t))return n.Common.rejectDeferred(e,"failed to validate",o),e.promise();e.resolve(f?f(t):t)}).fail(function(t){n.Common.rejectDeferred(e,"network error",t)}),e.promise();if(o.indexOf("&callback=")>0||o.indexOf("?callback=")>=0)n.Common.rejectDeferred(e,"jsonp is not implemented",o);else{if(this._fetchResp(e,o,"GET",null,!1,r,u,f))return e.promise();n.Common.rejectDeferred(e,"fetch api is not supported",o)}return e.promise()},i.prototype.getEmpty=function(t,i){var r=n.Common.deferred(),u=n.Common.Text.format(t,i,!0);if(!u)return n.Common.rejectDeferred(r,"empty path",u),r.promise();if(u.indexOf("&enablecors=true")>0||u.indexOf("?enablecors=true")>0)return this._jQueryAjax(r,u,"GET",null,!0,"avoid",null,null)||this._fetchResp(r,u,"GET",null,!0,"avoid",null,null)?r.promise():(n.Common.rejectDeferred(r,"cannot send cors request",u),r.promise());if(typeof jQuery!="undefined"&&jQuery&&jQuery.get)return jQuery.get(u,function(){r.resolve(!0)}).fail(function(t){n.Common.rejectDeferred(r,"network error",t)}),r.promise();if(u.indexOf("&callback=")>0||u.indexOf("?callback=")>=0)n.Common.rejectDeferred(r,"jsonp is not implemented",u);else{if(this._fetchResp(r,u,"GET",null,!1,"avoid",null,null))return r.promise();n.Common.rejectDeferred(r,"fetch api is not supported",u)}return r.promise()},i.prototype.getString=function(t,i,r){var u,f;if(r===void 0&&(r=!0),u=n.Common.deferred(),!u)return null;if(f=n.Common.Text.format(t,i,!0),!f)return n.Common.rejectDeferred(u,"empty path",f),u.promise();if(f.indexOf("&enablecors=true")>0||f.indexOf("?enablecors=true")>0)return this._jQueryAjax(u,f,"GET",null,!0,r,null,null)||this._fetchResp(u,f,"GET",null,!0,r,null,null)?u.promise():(n.Common.rejectDeferred(u,"cannot send cors request",f),u.promise());if(typeof jQuery!="undefined"&&jQuery&&jQuery.get)return jQuery.get(f,function(n){r||n!=null||u.reject();u.resolve(n)}).fail(function(t){n.Common.rejectDeferred(u,"network error",t)}),u.promise();if(f.indexOf("&callback=")>0||f.indexOf("?callback=")>=0)n.Common.rejectDeferred(u,"jsonp is not implemented",f);else{if(this._fetchResp(u,f,"GET",null,!1,r,null,null))return u.promise();n.Common.rejectDeferred(u,"fetch api is not supported",f)}return u.promise()},i.prototype._jQueryAjax=function(t,i,r,u,f,e,o,s){if((o===void 0&&(o=null),typeof jQuery=="undefined")||!jQuery||!jQuery.ajax)return!1;var h={type:r,url:i,data:u,dataType:"json",success:function(n){e==="avoid"?t.resolve(!0):(e||n!=null||t.reject(),o&&!o(n)&&t.reject(),t.resolve(s?s(n):n))}};f&&(h.crossDomain=!0,h.xhrFields={withCredentials:!0});try{return jQuery.ajax(h).fail(function(i){n.Common.rejectDeferred(t,"network error",i)}),!0}catch(c){return!1}},i.prototype._fetchResp=function(r,u,f,e,o,s,h,c){if(h===void 0&&(h=null),typeof i.fetch!="function")return!1;var l={method:f};if(o&&(l.mode="cors"),e){try{(typeof e.append=="function"||e instanceof ArrayBuffer||e instanceof Blob||e instanceof File)&&(e.needSerialize||(l.body=e))}catch(a){}l.body||(l.body=t.buildParaString(e))}try{return i.fetch(u,l).then(function(t){if(!t.ok){n.Common.rejectDeferred(r,"response status error");return}s==="avoid"?r.resolve(!0):t.text().then(function(t){if(!s&&t==null){n.Common.rejectDeferred(r,"empty response",u);return}if(h&&!h(t)){n.Common.rejectDeferred(r,"failed to validate",u);return}r.resolve(c?c(t):t)},function(t){n.Common.rejectDeferred(r,"parse error",t)})},function(t){n.Common.rejectDeferred(r,"fetch error",t)}),!0}catch(a){return!1}},i}(),i,c,r,l,s,a,v,y,u,e;h.fetch=window.fetch;t.RestJob=h;i=function(){function i(){}return i.instance=function(n){return arguments.length>0&&(i._instance=n),i._instance||(i._instance=new i),i._instance},i.postInfo=function(n,t,r,u,f){return u===void 0&&(u=!0),typeof r=="function"&&(r=r()),i.instance()?i.instance().postInfo(n,t,r,u,f):null},i.postEmpty=function(n,t,r){return typeof r=="function"&&(r=r()),i.instance()?i.instance().postEmpty(n,t,r):null},i.getInfo=function(n,t,r,u){return r===void 0&&(r=!0),i.instance()?i.instance().getInfo(n,t,r,u):null},i.getEmpty=function(n,t){return i.instance()?i.instance().getEmpty(n,t):null},i.staticInfo=function(n){return i.instance()?i.instance().staticInfo(n):null},i.staticEmpty=function(){return i.instance()?i.instance().staticEmpty():null},i.upgradePackage=function(t,i){var f={},r,u,e;try{f=n.Common.Reflection.copy(t)}catch(o){}return(r=t,i=n.Common.DateTime.parse(i),r==null||typeof r=="string"||typeof r=="number"||typeof r=="boolean"||r instanceof Array)?{data:r,result:r,success:!0,timestamp:new Date,message:null,sent:i,received:new Date,info:f}:r.success!=null?(r.data==null&&(r.data=r.content||r.result||r.resultData),r.message==null&&r.errorMsg!=null&&(r.message=r.errorMsg||r.errMsg||r.exMsg),r.sent=i,r.received=new Date,r.result=r.data,r.info=f,r):(u=r,u.isSuccess==null&&t.result!=null)?{data:r.data,success:r.result==="true"||r.result===!0,timestamp:r.timestamp!=null?r.timestamp:new Date,message:u.errMsg!=null?u.errMsg:r.message,sent:i,received:new Date,info:f}:u.isSuccess==null&&t.status!=null?{data:r.data||r.result||r.resultData,result:r.data||r.result||r.resultData,success:r.status===1||r.status===!0||r.status==="ok"||r.status==="Ok"||r.status==="OK",timestamp:r.timestamp!=null?r.timestamp:new Date,message:u.errMsg!=null?u.errMsg:r.message,sent:i,received:new Date,info:f}:u.isSuccess==null?{data:u,result:u,success:!0,timestamp:new Date,message:null,sent:i,received:new Date,info:f}:(e={data:null,message:u.errMsg,success:u.isSuccess,timestamp:new Date,sent:i,received:new Date,info:f},u.data&&(e.data=u.data.result,u.data.timestamp!=null&&(e.timestamp=u.data.timestamp)),e.result=e.data,e)},i.prototype.postInfo=function(r,u,f,e,o){var h,a,v,c,y;if(e===void 0&&(e=!0),h=n.Common.deferred(),!h)return null;var p=new Date,l={},s=r?r.toString().toLowerCase():null;if(f==null)l=null;else if(typeof f=="string"||typeof f=="number"||typeof f=="boolean")l=f;else if(s&&(s.indexOf("&requestencode=form")>0||s.indexOf("?requestencode=form")>0))l=f;else{a=null;v="full";s&&(s.indexOf("&requestencode=base64")>0||s.indexOf("?requestencode=base64")>0?a=n.Common.Text.base64encode:(s.indexOf("&requestencode=uri")>0||s.indexOf("?requestencode=uri")>0)&&(a=encodeURIComponent),s.indexOf("&requestfield=simple")>0||s.indexOf("?requestfield=simple")>0?v="simple":(s.indexOf("&requestfield=string")>0||s.indexOf("?requestfield=string")>0)&&(v="string"));for(c in f)c!=null&&(typeof c=="string"||typeof c=="number")&&(y=n.Common.Text.serialize(f[c],v),a&&(y=a(y)),l[c]=y)}return t.RestJob.postInfo(r,u,l,e).then(function(t){if(t=i.upgradePackage(t,p),t.timestamp=n.Common.DateTime.parse(t.timestamp),!t.success){n.Common.rejectDeferred(h,"failed result",t);return}if(!e&&t.data==null){n.Common.rejectDeferred(h,"empty result",t);return}o&&(t.data=o(t.data));h.resolve(t)},function(n){h.reject(n)}),h.promise()},i.prototype.postEmpty=function(r,u,f){var s=n.Common.deferred(),c,o,l;if(!s)return null;var a=new Date,h={},e=r?r.toString().toLowerCase():null;if(f==null)h=null;else if(typeof f=="string"||typeof f=="number"||typeof f=="boolean")h=f;else if(e&&(e.indexOf("&requestencode=form")>0||e.indexOf("?requestencode=form")>0))h=f;else{c=null;r&&(e.indexOf("&requestencode=base64")>0||e.indexOf("?requestencode=base64")>0?c=n.Common.Text.base64encode:(e.indexOf("&requestencode=uri")>0||e.indexOf("?requestencode=uri")>0)&&(c=encodeURIComponent));for(o in f)o!=null&&(typeof o=="string"||typeof o=="number")&&(l=n.Common.Text.serialize(f[o]),c&&(l=c(l)),h[o]=l)}return t.RestJob.postInfo(r,u,h,!0).then(function(t){t=i.upgradePackage(t,a);t.timestamp=n.Common.DateTime.parse(t.timestamp);t.success?s.resolve({success:!0,timestamp:n.Common.DateTime.parse(t.timestamp)}):n.Common.rejectDeferred(s,"failed result",t)},function(n){s.reject(n)}),s.promise()},i.prototype.getInfo=function(r,u,f,e){var o,s;return(f===void 0&&(f=!0),o=n.Common.deferred(),!o)?null:(s=new Date,t.RestJob.getInfo(r,u,f).then(function(t){if(t=i.upgradePackage(t,s),t.timestamp=n.Common.DateTime.parse(t.timestamp),!t.success){n.Common.rejectDeferred(o,"failed result",t);return}if(!f&&t.data==null){n.Common.rejectDeferred(o,"empty result",t);return}e&&(t.data=e(t.data));o.resolve(t)},function(n){o.reject(n)}),o.promise())},i.prototype.getEmpty=function(r,u){var f=n.Common.deferred(),e;return f?(e=new Date,t.RestJob.getInfo(r,u,!0).then(function(t){t=i.upgradePackage(t,e);t.timestamp=n.Common.DateTime.parse(t.timestamp);t.success?f.resolve({success:!0,timestamp:n.Common.DateTime.parse(t.timestamp)}):n.Common.rejectDeferred(f,"failed result",t)},function(n){f.reject(n)}),f.promise()):null},i.prototype.staticInfo=function(t){var i=n.Common.deferred(),r;return i?(r=new Date,i.resolve({success:!0,data:t,result:t,timestamp:new Date,sent:r,received:new Date}),i.promise()):null},i.prototype.staticEmpty=function(){var t=n.Common.deferred(),i;return t?(i=new Date,t.resolve({success:!0,timestamp:new Date,sent:i,received:new Date}),t.promise()):null},i}();t.DataPackageJob=i;c=function(){function n(){}return n.prototype.data=function(n){return arguments.length>0&&(this._data=n),this._data},n.prototype.resolve=function(){return i.staticInfo(this._data)},n}();t.StaticDataPackageResolver=c;r=function(){function n(n,t,i){this.info=n||{template:null};t&&i&&f(t,i,this.info)}return n.prototype.pathTemplate=function(n){return arguments.length>0&&(this.info.template=n),this.info.template},n}();t.BaseDataPackageResolver=r;l=function(t){function r(n,i,r){return t.call(this,n,i,r)||this}return __extends(r,t),r.prototype.resolve=function(t){var r,u;return(t===void 0&&(t=null),r=this.info,r.mock)?r.mock(t,r,null):(u=n.Common.Text.format(r.template,null,!0,r.preBag),i.getInfo(u,t,r.canBeEmpty,r.convertor))},r}(r);t.DataPackageResolver=l;s=function(t){function r(n,i,r){return t.call(this,n,i,r)||this}return __extends(r,t),r.prototype.resolve=function(t){var r=this.info,u;return r.mock?r.mock(t,r,null):(u=n.Common.Text.format(r.template,t,!0,r.preBag),i.getInfo(u,r,r.canBeEmpty,r.convertor))},r}(r);t.RequestDataPackageResolver=s;a=function(t){function r(n,i,r){return t.call(this,n,i,r)||this}return __extends(r,t),r.prototype.resolve=function(t,r){var u,f;return(r||(r={}),r.id=t,u=this.info,u.mock)?u.mock(r,u,null):(f=n.Common.Text.format(u.template,r,!0,u.preBag),i.getInfo(f,u,u.canBeEmpty,u.convertor))},r}(r);t.IdentifiedDataPackageResolver=a;v=function(t){function r(n,i,r){return t.call(this,n,i,r)||this}return __extends(r,t),r.prototype.resolve=function(t,r){var u,f;return(r||(r={}),r.name=t,u=this.info,u.mock)?u.mock(r,u,null):(f=n.Common.Text.format(u.template,r,!0,u.preBag),i.getInfo(f,u,u.canBeEmpty,u.convertor))},r}(r);t.NamedDataPackageResolver=v;y=function(t){function r(n,i,r){return t.call(this,n,i,r)||this}return __extends(r,t),r.prototype.resolve=function(t,r){var u=this.info,f;return u.mock?u.mock(t,u,r):(f=n.Common.Text.format(u.template,t,!0,u.preBag),i.postInfo(f,u,r,u.canBeEmpty,u.convertor))},r}(r);t.PostDataPackageResolver=y;u=function(){function n(){}return n.prototype.ping=function(n){return i.postInfo(this.pathTemplate,null,n)},n.enable=function(){n._check();n._enabled=!0},n.addHandler=function(n,i){t.NotificationCache.instance.addHandler(n,i)},n._check=function(){var i={init:!1,ignore:n._ignore};n._ignore=null;n.instance.ping(i).then(function(i){var u,f,e,r;i&&i.result&&(u=i.result,u.notification)&&(f=[],e=t.NotificationCache.instance.pushRange(u.notification),e.forEach(function(n){n&&f.push({key:n.id,value:n.timestamp})}),n._ignore=f,r=n.interval,r!=null&&typeof r=="number")&&setTimeout(function(){n._check()},r)},function(){var t=n.interval;t!=null&&typeof t=="number"&&setTimeout(function(){n._check()},t)})},n}();u._enabled=!1;u.interval=5e3;u.instance=new u;t.Heartbeat=u;e=function(){function t(){this._h={};this._list=[]}return t.prototype.push=function(t){if(!t||!t.id||t.id===""||t.timestamp==null||!t.type)return!1;t.timestamp=n.Common.DateTime.parse(t.timestamp);var i=-1,r=null;if(this._list.some(function(n,u){return n.id!==t.id?!1:(n.timestamp<=t.timestamp&&(i=u),r=n,!0)})){if(i<0)return!1;this._list[i]=t}else this._list.push(t),i=this._list.length;return this._raiseHandler(t,r),!0},t.prototype.pushRange=function(n){var i=this,t;return n?(t=[],n.forEach(function(n){if(!i.push(n))return!1;t.push(n)}),t):[]},t.prototype.addHandler=function(n,t){n&&n!==""&&t&&(this._h[n]=t)},t.prototype._raiseHandler=function(n,t){if(n){var i=this._h[n.type];i&&i(n,t)}},t}();e.instance=new e;t.NotificationCache=e;t.callbackQuery=p;t.resolver=f;t.createResolvers=w;t.setUrlTemplates=b;t.mergeLink=k;t.resolve=d;t.resolveEmpty=g;t.resolveByPost=nt;t.resolveEmptyByPost=tt;t.buildParaString=it})(t=n.Web||(n.Web={}))}(AliHub||(AliHub={})),function(n){var t;(function(t){function l(t){t||(t={});!t.ko||t.ko===!0?t.ko!==!0||window.ko||(window.ko=t.ko):i=t.ko;n.Common.bindingFactory(r.instance(),t.override);s();n.Common.setTemplateEngine("angularjs",o);n.Common.setTemplateEngine("vuejs",h);typeof JSTracker!="undefined"&&(t.override||n.Diagnostics.tracker()===n.Diagnostics.emptyTracker())&&n.Diagnostics.tracker(c());typeof goldlog!="undefined"&&(t.override||n.Diagnostics.pageAnalyticsClient().basic===!0)&&n.Diagnostics.pageAnalyticsClient(u.instance());var l=n.Common.ControlManager.initializers();f.setup(t.override);e();n.Common.PageController.init();n.Diagnostics.debugInfo("Quark bindings has initialized.")}function e(){try{typeof jQuery!="undefined"&&jQuery&&jQuery.fn&&(jQuery.fn.getControls=function(){var t=[];return this.each&&this.each(function(){var i=n.Common.getControl(this);i&&t.push(i)}),t})}catch(t){}}function a(n){return arguments.length>0&&(i=n),i}function v(t,i){var u,r,f;return(i===void 0&&(i=!1),!t)?null:!!t.getId&&!!t.getElement&&!!t.loadOptions&&t instanceof n.Common.VisualControl?t:(u=t.controlType,u||(u=n.Common.VisualControl),!i&&!!t.getControl&&typeof t.getControl=="function")?t.getControl():(r=new u(t),f=r.getId(),!!f&&!n.Elements.getById(f))?null:(!t.options||r.loadOptions(t.options),t.getControl=function(){return r},r)}function o(n){n&&n.attr("ng-controller","AliHubControlController")}function s(t){if(!t||!t.module){if(typeof angular=="undefined")return null;t=angular}if(!t||!t.module)return null;try{var i=t.module("quark",[]);return i.controller("AliHubControlController",["$scope","$element",function(t,i){var r=n.Common.currentControl(i),u=n.Common.listenBindingControl(r,t,function(n){t.$apply(n)},!0);t.control=r;t.dispose=u}]),i.filter("AliHubText",function(){return function(t,i){return!i||!t?t:!!n.Common.Text[i]&&typeof n.Common.Text[i]=="function"?n.Common.Text[i](t):t}}),i}catch(r){return null}}function y(t,i,r,u,f,e){var o=n.Web.resolve(null,t.urls[i],r),s=!!u&&!!u.call?function(n){t.$apply(function(){return u.call(e||t,n)})}:null,h=!!f&&!!f.call?function(n){t.$apply(function(){return f.call(e||t,n)})}:null;return o.then(s,h),o}function p(t,i,r,u,f,e,o){var s=n.Web.resolveByPost(null,t.urls[i],r,u),h=!!f&&!!f.call?function(n){t.$apply(function(){return f.call(o||t,n)})}:null,c=!!e&&!!e.call?function(n){t.$apply(function(){return e.call(o||t,n)})}:null;return s.then(h,c),s}function h(t){if(typeof Vue!="undefined"&&t&&Vue)try{var i={control:t},r=n.Common.listenBindingControl(t,i),u=new Vue({el:"#"+t.getId(),data:i,destroyed:function(){r.dispose()}});t.prop("vuejs",u)}catch(f){}}function c(){var t=new n.Diagnostics.Tracker,i=t.logger();return t.logger=function(){return typeof JSTracker=="undefined"?i:JSTracker||i},t.config=function(n,t){if(typeof JSTracker!="undefined"&&JSTracker&&JSTracker.config)try{JSTracker.config(n,t)}catch(i){}},t}var i=typeof ko!="undefined"?ko:null,r,u,f;t.setup=l;t.jQueryControlsSetup=e;t.bindingProvider=a;r=function(){function t(){this.provider=i}return t.instance=function(){if(!t._instance){var r=new t,i=r.provider;if(!i)return null;t._instance=r;n.Common.setTemplateEngine("knockout",r.applyBindings);n.Common.setTemplateEngine("ko",r.applyBindings);i.bindingHandlers.image={update:function(t,r){var u,f;(t.innerHTML="",u=i.unwrap(r()),u)&&(f=n.Graph.imageElement(u),f)&&t.appendChild(f)}};i.bindingHandlers.control={update:function(t,r,u){var e=i.unwrap(r()),f;e&&(f=u.get("controlOptions"),!f||i.unwrap(f),n.Common.fillControl(t,e,!f?null:f))}};i.bindingHandlers.datetime={update:function(t,r,u){var e=i.unwrap(r()),f;e&&(f=u.get("datetimeFormat"),!f||i.unwrap(f),t.innerHTML=n.Common.DateTime.toCustomizedString(e,f))}};i.bindingHandlers.file={init:function(t,i,r){if(typeof FileReader!="undefined"){var u=new FileReader;n.Elements.listen(t,"change",function(){var n,f;if(t.files&&!(t.files.length<1)&&t.files[0]){n=t.files[0];u.readyState===1&&u.abort();f=r.get("fileDataType")||"dataUrl";u.onload=function(){i()({name:n.name,fileType:n.type,modified:n.lastModifiedDate,size:n.size,dataType:f.toString(),data:u.result})};switch(f.toString().toLowerCase()){case"text":u.readAsText(n);break;case"array":case"arraybuffer":u.readAsArrayBuffer(n);break;case"binary":case"binarystring":u.readAsBinaryString(n);break;case"dataurl":u.readAsDataURL(n);break;default:i()(n)}}})}}}}return this._instance},t.prototype.alive=function(){return!!this.provider},t.prototype.create=function(n){return this.provider?arguments.length>0?this.provider.observable(n):this.provider.observable():null},t.prototype.createArray=function(n){return this.provider?arguments.length>0?this.provider.observableArray(n):this.provider.observableArray():null},t.prototype.createComputed=function(n,t){return!this.provider?null:this.provider.computed(n,t)},t.prototype.isObservable=function(n){return!this.provider?null:this.provider.isObservable(n)},t.prototype.isComputed=function(n){return!this.provider?null:this.provider.isComputed(n)},t.prototype.toJson=function(n){return!this.provider?null:this.provider.toJSON(n)},t.prototype.applyBindings=function(t){var i,r,u;this.provider&&(i=n.Common.bindingObj(t.viewModel()),t.viewModelChanged.add(function(n){i(n.value)}),r=n.Common.bindingObj(t.converted()),t.convertedChanged.add(function(n){r(n.value)}),u=n.Common.bindingObj(t.info()),t.infoChanged.add(function(n){u(n.value)}),this.provider.applyBindings({id:t.getId(),model:i,info:u,converted:r,res:n.Res.factory(),templates:n.Res.templates,control:this,hub:function(t){return!t?n:n[t.toString()]},extenders:function(n,i){return i===void 0&&(i=!1),t.procExtender(n,i)}},t.getElement()))},t.prototype.unwrap=function(t){return!this.provider?n.Common.Reflection.unwrapObject(t):this.provider.unwrap(t)},t}();t.KnockoutBindingFactory=r;t.bindFlipper=v;t.bindAngularJs=o;t.registerAngularJsModule=s;t.angularScopeGet=y;t.angularScopePost=p;t.bindVueJs=h;t.taobaoJsTracker=c;u=function(){function t(){this.mapping=new n.Collection.Mapping;this.ignoreCustomizedParameter=!1}return t.instance=function(){return t._instance||(t._instance=new t),this._instance},t.prototype.record=function(t,i){var r=this.mapping.get(t);goldlog&&r&&r.length&&!(r.length<4)&&goldlog.record(r[0],r[1],!i||this.ignoreCustomizedParameter?r[2]:n.Elements.toQueryString(i),r[3])},t.prototype.recordDirectly=function(n,i,r,u){t.request(n,i,r,u)},t.prototype.alive=function(){return typeof goldlog=="undefined"?!1:!!goldlog&&!!goldlog.record},t.prototype.map=function(n){this.mapping.map(n)},t.prototype.push=function(n,t){this.push(n,t)},t.prototype.remove=function(n){this.remove(n)},t.prototype.clear=function(){this.mapping.clear()},t.request=function(t,i,r,u){if(typeof goldlog!="undefined"&&!!goldlog&&!!goldlog.record){goldlog.record(t,i,r,u);return}var f=new Image,e=n.Common.Maths.randomString("hidden_image"),o=(new Date).getTime(),s="//wgo.mmstat.com/"+t.toString()+"."+i.toString()+"."+r.toString()+"."+u.toString()+"?cache="+o.toString()+"&gmkey=&gokey=&logtype=2";window[e]=f;setTimeout(function(){f.onload=f.onerror=function(){setTimeout(function(){delete window[e]},400)};f.src=s},20)},t}();t.GoldlogTracker=u;f=function(){function t(){}return t.setup=function(i){(i===void 0&&(i=!1),typeof Highcharts!="undefined")&&((i||!n.Graph.Extensions.radar)&&(n.Graph.Extensions.radar=t.radar),(i||!n.Graph.Extensions.line)&&(n.Graph.Extensions.line=t.line))},t.radar=function(n,t,i){var r=function(){for(var u=[],f=[],r=0;r<i.length;r++)u.push(i[r].key),f.push(i[r].value);!jQuery("#"+n.id).highcharts||jQuery("#"+n.id).highcharts({title:{text:!t?"":t,x:-80},chart:{polar:!0,type:"line"},pane:{size:"80%"},legend:{enabled:!1},xAxis:{categories:u,tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:100},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}"><b>{point.y:,.0f}<\/b>'},series:[{name:"Values",data:f,pointPlacement:"on"}]})};jQuery(r)},t.line=function(n,t,i,r){var u=function(){for(var o,f=[],e=[],s=[],u=0;u<i.length;u++)f.push(i[u].key),e.push(i[u].value),s.push(u);!r||r.highlight==null||(o=[{from:r.highlight-.4,to:r.highlight+.4,color:"rgba(0, 0, 0, 0.2)"}]);!jQuery("#"+n.id).highcharts||jQuery("#"+n.id).highcharts({chart:{type:"areaspline"},title:{text:!t?"":t},legend:{enabled:!1},plotOptions:{series:{marker:{enabled:!1},fillColor:Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")}},xAxis:{categories:f,labels:{formatter:function(){return""}},plotBands:o},yAxis:{min:!!r&&r.min!=null?r.min:null,max:!!r&&r.max!=null?r.max:null},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}"><b>{point.y:,.0f}<\/b>'},series:[{name:"Values",data:e}]})};jQuery(u)},t.pie=function(n,t,i,r){var u=function(){var u=[];i.forEach(function(n){u.push({name:n.key,y:n.value})});!jQuery("#"+n.id).highcharts||jQuery("#"+n.id).highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:!t?"":t},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%<\/b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}<\/b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},series:[{name:"Brands",colorByPoint:!0,innerSize:!!r&&!!r.innerSize?r.innerSize:null,data:u}]})};jQuery(u)},t}();t.HighChartsFactory=f})(t=n.Bindings||(n.Bindings={}))}(AliHub||(AliHub={})),function(n){var t;(function(n){var i=function(){function n(){this.lang="zh-Hans";this.strings={homepage:"主页",appCenter:"应用中心",page:"页面",pages:"页面",first:"第一",last:"最后",previous:"前面",next:"后面",total:"总数",current:"当前",index:"索引",bindingError:"无法绑定",refresh:"刷新",reload:"重载",member:"会员",myMembers:"我的会员",recentDays:"近{0}天",planned:"未处理",processing:"处理中",completed:"已完成",ladyName:"{0}女士",gentlemanName:"{0}先生",reminder:"提醒",note:"便签",totalScore:"综合评分",cents:"{0}分",level:"等级",collapse:"收起",expand:"展开",showAll:"显示全部",followUp:"跟进",noFollowUp:"暂未跟进",memberTags:"会员印象",types:"类别",history:"历史",trend:"趋势",distribution:"分布",newTasks:"{0}条新任务",bizTasks:"工作任务",summaryReports:"统计报表",jobMgm:"工作管理",createTask:"新建任务",seeMore:"查看更多",exit:"退出",register:"注册",login:"登录",logout:"注销",search:"搜索",filter:"过滤",typeKeywords:"输入搜索关键词",requestHelp:"{0} 正在请求帮助中",cannotFind:"该{0}并不存在",newItem:"新建",createItem:"创建",addItem:"添加",getItem:"获取",setItem:"设置",modifyItem:"修改",updateItem:"更新",replaceItem:"替换",overrideItem:"覆盖",fillItem:"填充",removeItem:"移除",deleteItem:"删除",clearItem:"清空",cleanUp:"清理",ok:"确定",save:"保存",cancel:"取消",turnBack:"返回",rollback:"回滚",undo:"撤销",redo:"重复",cut:"剪切",copy:"复制",copySomething:"复制{0}",paste:"粘贴",clipboard:"剪切板",navigateTo:"导航至",settings:"设置",options:"选项",profile:"档案",draft:"草稿",open:"打开",close:"关闭",turnOn:"开启",turnOff:"关闭",layout:"布局",add:"添加",insert:"插入",edit:"编辑",remove:"移除","delete":"删除",clear:"清空",title:"标题",content:"内容",text:"文本",richtext:"富文本",properties:"属性",wizard:"向导",slide:"幻灯片",photo:"照片",image:"图片",images:"图片",audio:"音频",video:"视频",movie:"电影",movies:"电影",document:"文档",documents:"文档",link:"链接",links:"链接",hyperlink:"超链接",website:"网站",sns:"社交网络",favorate:"收藏",game:"游戏",games:"游戏",file:"文件",files:"文件",folder:"文件夹",dir:"目录",moveUp:"上移",moveRight:"右移",moveDown:"下移",moveLeft:"左移",module:"模块",component:"组件",chapter:"章",section:"节",update:"更新",upload:"上传",download:"下载","switch":"切换",switchCamera:"切换摄像头",capturePhoto:"拍照",record:"录制",assign:"委派",reassign:"转交",flag:"标记",send:"发送",reply:"回复",replyAll:"全部回复",forward:"转发",cc:"抄送",bcc:"秘密抄送",phoneCall:"拨打",contact:"联系",contactMember:"联系会员",attach:"附加",attachment:"附件",expired:"已超时",message:"消息",notification:"通知",feedback:"反馈",help:"帮助",support:"支持",window:"窗口",aries:"白羊座",taurus:"金牛座",gemini:"双子座",cancer:"巨蟹座",leo:"狮子座",virgo:"室女座",libra:"天秤座",scorpio:"天蝎座",sagittarius:"射手座",capricorn:"摩羯座",aquarius:"水瓶座",pisces:"双鱼座",ophiuchus:"蛇夫座",horoscope:"星座",astrology:"占星",loading:"加载中",failToLoadData:"数据加载失败",surname:"姓氏",givenname:"名字",middleName:"中间名",nickname:"昵称",city:"城市",street:"接到",country:"国家",birthday:"生日",age:"年龄",gender:"性别",male:"男",female:"女",other:"其它",fromSource:"从",toTarget:"至",millisecondsNum:"{0}微秒",secondsNum:"{0}秒",minutesNum:"{0}分",hoursNum:"{0}小时",daysNum:"{0}天",weeksNum:"{0}周",timeLocaleSep:"",today:"今天",tomorrowTime:"明天 {0}",tomorrow:"明天",secondsAgo:"数秒之前",minuteAgo:"一分钟前",minutesTwoAgo:"两分钟前",minutesAgo:"{0}分钟前",hourAgo:"一个小时前",hoursTwoAgo:"两个小时前",hoursAgo:"{0}个小时前",yesterdayTime:"昨天 {0}",yesterday:"昨天",daysTwoAgo:"前天",daysAgo:"{0}天前",lastWeekDay:"上{0}",lastWeek:"上周",future:"未来",date:"日期",day:"天",week:"星期",weekday:"工作日",weekend:"周末",week0c:"日",week1c:"一",week2c:"二",week3c:"三",week4c:"四",week5c:"五",week6c:"六",week0s:"周日",week1s:"周一",week2s:"周二",week3s:"周三",week4s:"周四",week5s:"周五",week6s:"周六",week0f:"星期天",week1f:"星期一",week2f:"星期二",week3f:"星期三",week4f:"星期四",week5f:"星期五",week6f:"星期六",week0t:"周日 {0}",week1t:"周一 {0}",week2t:"周二 {0}",week3t:"周三 {0}",week4t:"周四 {0}",week5t:"周五 {0}",week6t:"周六 {0}",month:"月",month0s:"1月",month1s:"2月",month2s:"3月",month3s:"4月",month4s:"5月",month5s:"6月",month6s:"7月",month7s:"8月",month8s:"9月",month9s:"10月",monthAs:"11月",monthBs:"12月",month0f:"一月",month1f:"二月",month2f:"三月",month3f:"四月",month4f:"五月",month5f:"六月",month6f:"七月",month7f:"八月",month8f:"九月",month9f:"十月",monthAf:"十一月",monthBf:"十二月",year:"年",am:"上午",pm:"下午",empty:"暂无",commaSymbol:"，",colonSymbol:"：",ellipsisSymbol:"……",semicolonSymbol:"；",enumCommaSymbol:"、",periodSymbol:"。"}}return n.prototype.template=function(n){return n?(n.strings.reg(this.lang,this.strings),n.strings.reg("zh-CN",this.strings),n.strings.reg("zh-SG",this.strings),n):null},n}(),t;n.Lp_zhHans=i;t=function(){function n(){this.lang="zh-Hant";this.strings={homepage:"主頁",appCenter:"應用中心",page:"頁面",pages:"頁面",first:"第一",last:"最後",previous:"前面",next:"後面",total:"總數",current:"當前",index:"索引",bindingError:"無法綁定",refresh:"刷新",reload:"重載",member:"會員",myMembers:"我的會員",recentDays:"近{0}天",planned:"未處理",processing:"處理中",completed:"已完成",ladyName:"{0}女士",gentlemanName:"{0}先生",reminder:"提醒",note:"便簽",totalScore:"綜合評分",cents:"{0}分",level:"等級",collapse:"收起",expand:"展開",showAll:"顯示全部",followUp:"跟進",noFollowUp:"暫未跟進",memberTags:"會員印象",types:"類別",history:"歷史",trend:"趨勢",distribution:"分佈",newTasks:"{0}條新任務",bizTasks:"工作任務",summaryReports:"統計報表",jobMgm:"工作管理",createTask:"新建任務",seeMore:"查看更多",exit:"退出",register:"註冊",login:"登錄",logout:"登出",search:"搜索",filter:"過濾",typeKeywords:"輸入搜索關鍵字",requestHelp:"{0} 正在請求説明中",cannotFind:"該{0}並不存在",newItem:"新建",createItem:"創建",addItem:"添加",getItem:"獲取",setItem:"設置",modifyItem:"修改",updateItem:"更新",replaceItem:"替換",overrideItem:"覆蓋",fillItem:"填充",removeItem:"移除",deleteItem:"刪除",clearItem:"清空",cleanUp:"清理",ok:"確定",save:"保存",cancel:"取消",turnBack:"返回",rollback:"回滾",undo:"撤銷",redo:"重複",cut:"剪切",copy:"複製",copySomething:"複製{0}",paste:"粘貼",clipboard:"剪切板",navigateTo:"導航至",settings:"設置",options:"選項",profile:"檔案",draft:"草稿",open:"打開",close:"關閉",turnOn:"開啟",turnOff:"關閉",layout:"佈局",add:"添加",insert:"插入",edit:"編輯",remove:"移除","delete":"刪除",clear:"清空",title:"標題",content:"內容",text:"文本",richtext:"富文本",properties:"屬性",wizard:"嚮導",slide:"幻燈片",photo:"照片",image:"圖片",images:"圖片",audio:"音訊",video:"視頻",movie:"電影",movies:"電影",document:"文檔",documents:"文檔",link:"連結",links:"連結",hyperlink:"超連結",website:"網站",sns:"社交網路",favorate:"收藏",game:"遊戲",games:"遊戲",file:"檔",files:"檔",folder:"資料夾",dir:"目錄",moveUp:"上移",moveRight:"右移",moveDown:"下移",moveLeft:"左移",module:"模組",component:"元件",chapter:"章",section:"節",update:"更新",upload:"上傳",download:"下載","switch":"切換",switchCamera:"切換攝像頭",capturePhoto:"拍照",record:"錄製",assign:"委派",reassign:"轉交",flag:"標記",send:"發送",reply:"回復",replyAll:"全部回復",forward:"轉發",cc:"抄送",bcc:"秘密抄送",phoneCall:"撥打",contact:"聯繫",contactMember:"聯繫會員",attach:"附加",attachment:"附件",expired:"已超時",message:"消息",notification:"通知",feedback:"回饋",help:"説明",support:"支援",window:"視窗",aries:"白羊座",taurus:"金牛座",gemini:"雙子座",cancer:"巨蟹座",leo:"獅子座",virgo:"室女座",libra:"天秤座",scorpio:"天蠍座",sagittarius:"射手座",capricorn:"摩羯座",aquarius:"水瓶座",pisces:"雙魚座",ophiuchus:"蛇夫座",horoscope:"星座",astrology:"占星",loading:"載入中",failToLoadData:"資料載入失敗",surname:"姓氏",givenname:"名字",middleName:"中間名",nickname:"昵稱",city:"城市",street:"接到",country:"國家",birthday:"生日",age:"年齡",gender:"性別",male:"男",female:"女",other:"其它",fromSource:"從",toTarget:"至",millisecondsNum:"{0}微秒",secondsNum:"{0}秒",minutesNum:"{0}分",hoursNum:"{0}小時",daysNum:"{0}天",weeksNum:"{0}周",timeLocaleSep:"",today:"今天",tomorrowTime:"明天 {0}",tomorrow:"明天",secondsAgo:"數秒之前",minuteAgo:"一分鐘前",minutesTwoAgo:"兩分鐘前",minutesAgo:"{0}分鐘前",hourAgo:"一個小時前",hoursTwoAgo:"兩個小時前",hoursAgo:"{0}個小時前",yesterdayTime:"昨天 {0}",yesterday:"昨天",daysTwoAgo:"前天",daysAgo:"{0}天前",lastWeekDay:"上{0}",lastWeek:"上周",future:"未來",date:"日期",day:"天",week:"星期",weekday:"工作日",weekend:"週末",week0c:"日",week1c:"一",week2c:"二",week3c:"三",week4c:"四",week5c:"五",week6c:"六",week0s:"周日",week1s:"週一",week2s:"週二",week3s:"週三",week4s:"週四",week5s:"週五",week6s:"週六",week0f:"星期天",week1f:"星期一",week2f:"星期二",week3f:"星期三",week4f:"星期四",week5f:"星期五",week6f:"星期六",week0t:"周日 {0}",week1t:"週一 {0}",week2t:"週二 {0}",week3t:"週三 {0}",week4t:"週四 {0}",week5t:"週五 {0}",week6t:"週六 {0}",month:"月",month0s:"1月",month1s:"2月",month2s:"3月",month3s:"4月",month4s:"5月",month5s:"6月",month6s:"7月",month7s:"8月",month8s:"9月",month9s:"10月",monthAs:"11月",monthBs:"12月",month0f:"一月",month1f:"二月",month2f:"三月",month3f:"四月",month4f:"五月",month5f:"六月",month6f:"七月",month7f:"八月",month8f:"九月",month9f:"十月",monthAf:"十一月",monthBf:"十二月",year:"年",am:"上午",pm:"下午",empty:"暫無",commaSymbol:"，",colonSymbol:":",ellipsisSymbol:"...",semicolonSymbol:"; ",enumCommaSymbol:"、",periodSymbol:"。"}}return n.prototype.template=function(n){return n?(n.strings.reg(this.lang,this.strings),n.strings.reg("zh-TW",this.strings),n.strings.reg("zh-HK",this.strings),n.strings.reg("zh-MO",this.strings),n):null},n}();n.Lp_zhHant=t;(new i).template(n.builtIn());(new t).template(n.builtIn())})(t=n.Res||(n.Res={}))}(AliHub||(AliHub={}));
